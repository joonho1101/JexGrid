/*
AUTHOR

	The JexGrid was written and is maintained by:
		Joon Ho Cho <joonho1101@gmail.com>

COPYRIGHT

	Copyright (c) 2010-2011, WebCash Inc. All rights reserved.

LICENSE

	- JexGrid License Policy -

	JexGrid ´Â »ó¾÷Àû ¿ëµµ·Î »ç¿ëµÉ °æ¿ì¿Í °³ÀÎ ¿ëµµ·Î »ç¿ëµÉ °æ¿ìÀÇ µÎ°¡Áö ´Ù¸¥ ¶óÀÌ¼¾½º Á¤Ã¥À» °¡Áý´Ï´Ù.
	»ó¾÷Àû ¿ëµµ·Î »ç¿ëµÉ °æ¿ì ¶óÀÌ¼¾½º¸¦ ±¸¸ÅÇÏ¿©¾ß ÇÏ°í, °³ÀÎ ¿ëµµ·Î »ç¿ëµÉ °æ¿ì¿¡´Â GNU GPL License Version 3 Á¤Ã¥À» µû¸¨´Ï´Ù.

	1. »ó¾÷¿ë: Commercial Software License
		- µµ¸ÞÀÎ ´ç 1¾ï¿øÀÇ ¶óÀÌ¼¾½º °¡°ÝÀÌ Ã»±¸µË´Ï´Ù. (List Price ±âÁØ)
		- À¥ÄÉ½Ã ³»ºÎ °³¹ß ÇÁ·ÎÁ§Æ®¿¡ »ç¿ëµÉ °æ¿ì´Â ´ÙÀ½ÀÇ Á¤Ã¥À» µû¸¨´Ï´Ù.
			- °³¹ß ±â°£ ±â¼úÁö¿ø ºñ¿ë: ÇÁ·ÎÁ§Æ® °³¹ß ÀÎ·Â * 100¸¸¿ø / 1³â
			- »óÇ°¿¡ Æ÷ÇÔµÇ¾î ¿ÜºÎ·Î ÆÇ¸ÅµÇ´Â °æ¿ì: ÇÁ·ÎÁ§Æ® µµ¸ÞÀÎ ´ç 1000¸¸¿øÀÇ ¼Ö·ç¼Ç °¡°ÝÀÌ Ã»±¸µË´Ï´Ù.

	2. °³ÀÎ¿ë: Open Source License

		- GNU GPL License Version 3 ¶óÀÌ¼¾½ºÀÇ ¿øÄ¢À» µû¸¨´Ï´Ù.

		JexGrid - A Fast, Comprehensive, and Flexible JavaScript Grid Library
		Copyright (C) 2011  Joon Ho Cho

		This program is free software: you can redistribute it and/or modify
		it under the terms of the GNU General Public License as published by
		the Free Software Foundation, either version 3 of the License, or
		(at your option) any later version.

		This program is distributed in the hope that it will be useful,
		but WITHOUT ANY WARRANTY; without even the implied warranty of
		MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
		GNU General Public License for more details.

		You should have received a copy of the GNU General Public License
		along with this program.  If not, see <http://www.gnu.org/licenses/>.

		- Áß¿ä ³»¿ë ¿ä¾à:
			- »ó¿ë ÀÌ¿ë °¡´É
			- °áÇÕ ¼Ò½º °ø°³ÀÇ ÀÇ¹«
			- Æ¯Çã Çã¿ë Á¦ÇÑ
			- ¶óÀÌ¼¾½º ÀüÆÄÀÇ ÀÇ¹«
			- JexGrid ÀÛ¼ºÀÚ´Â »ç¿ëÀÚ ¿äÃ»¿¡ ÀÇÇÑ ¹ö±× ÆÐÄ¡ÀÇ ÀÇ¹«°¡ ¾ø½À´Ï´Ù.

	¾î¶°ÇÑ °æ¿ì¿¡µµ »ç¿ëÀÚ´Â À§ÀÇ ¶óÀÌ¼¾½º Á¤Ã¥À» ¼öÁ¤ÇÏ°Å³ª »èÁ¦ÇÒ ¼ö ¾ø½À´Ï´Ù.


// Copyright 2006 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
*/

(function(){var COMPILED=!0,goog=goog||{};goog.global=window;window.goog=goog;goog.DEBUG=!0;goog.LOCALE="en";goog.provide=function(e){if(!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e];for(var h=e;h=h.substring(0,h.lastIndexOf("."));){if(goog.getObjectByName(h))break;goog.implicitNamespaces_[h]=!0}}goog.exportSymbol_(e)};
goog.setTestOnly=function(e){if(COMPILED&&!goog.DEBUG)throw e=e||"",Error("Importing test-only code into non-debug environment"+e?": "+e:".");};if(!COMPILED)goog.isProvided_=function(e){return!goog.implicitNamespaces_[e]&&!!goog.getObjectByName(e)},goog.implicitNamespaces_={};goog.exportSymbol_=function(e,h,c){e=e.split(".");c=c||goog.global;!(e[0]in c)&&c.execScript&&c.execScript("var "+e[0]);for(var b;e.length&&(b=e.shift());)!e.length&&goog.isDef(h)?c[b]=h:c=c[b]?c[b]:c[b]={}};
goog.getObjectByName=function(e,h){for(var c=e.split("."),b=h||goog.global,a;a=c.shift();)if(goog.isDefAndNotNull(b[a]))b=b[a];else return null;return b};goog.globalize=function(e,h){var c=h||goog.global,b;for(b in e)c[b]=e[b]};
goog.addDependency=function(e,h,c){if(!COMPILED){for(var b,e=e.replace(/\\/g,"/"),a=goog.dependencies_,d=0;b=h[d];d++)a.nameToPath[b]=e,e in a.pathToNames||(a.pathToNames[e]={}),a.pathToNames[e][b]=!0;for(b=0;h=c[b];b++)e in a.requires||(a.requires[e]={}),a.requires[e][h]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(e){if(!COMPILED&&!goog.isProvided_(e)){if(goog.ENABLE_DEBUG_LOADER){var h=goog.getPathFromDeps_(e);if(h){goog.included_[h]=!0;goog.writeScripts_();return}}e="goog.require could not find: "+e;goog.global.console&&goog.global.console.error(e);throw Error(e);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(e){return e};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_||(e.instance_=new e)}};
if(!COMPILED&&goog.ENABLE_DEBUG_LOADER)goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return typeof e!="undefined"&&"write"in e},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var e=goog.global.document.getElementsByTagName("script"),h=e.length-1;h>=0;--h){var c=e[h].src,b=c.lastIndexOf("?"),
b=b==-1?c.length:b;if(c.substr(b-7,7)=="base.js"){goog.basePath=c.substr(0,b-7);break}}},goog.importScript_=function(e){var h=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[e]&&h(e)&&(goog.dependencies_.written[e]=!0)},goog.writeScriptTag_=function(e){return goog.inHtmlDocument_()?(goog.global.document.write('<script type="text/javascript" src="'+e+'"><\/script>'),!0):!1},goog.writeScripts_=function(){function e(d){if(!(d in b.written)){if(!(d in b.visited)&&(b.visited[d]=
!0,d in b.requires))for(var a in b.requires[d])if(!goog.isProvided_(a))if(a in b.nameToPath)e(b.nameToPath[a]);else throw Error("Undefined nameToPath for "+a);d in c||(c[d]=!0,h.push(d))}}var h=[],c={},b=goog.dependencies_,a;for(a in goog.included_)b.written[a]||e(a);for(a=0;a<h.length;a++)if(h[a])goog.importScript_(goog.basePath+h[a]);else throw Error("Undefined script input");},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_();
goog.typeOf=function(e){var h=typeof e;if(h=="object")if(e){if(e instanceof Array)return"array";else if(e instanceof Object)return h;var c=Object.prototype.toString.call(e);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof e.length=="number"&&typeof e.splice!="undefined"&&typeof e.propertyIsEnumerable!="undefined"&&!e.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof e.call!="undefined"&&typeof e.propertyIsEnumerable!="undefined"&&!e.propertyIsEnumerable("call"))return"function"}else return"null";
else if(h=="function"&&typeof e.call=="undefined")return"object";return h};goog.propertyIsEnumerableCustom_=function(e,h){if(h in e)for(var c in e)if(c==h&&Object.prototype.hasOwnProperty.call(e,h))return!0;return!1};goog.propertyIsEnumerable_=function(e,h){return e instanceof Object?Object.prototype.propertyIsEnumerable.call(e,h):goog.propertyIsEnumerableCustom_(e,h)};goog.isDef=function(e){return e!==void 0};goog.isNull=function(e){return e===null};goog.isDefAndNotNull=function(e){return e!=null};
goog.isArray=function(e){return goog.typeOf(e)=="array"};goog.isArrayLike=function(e){var h=goog.typeOf(e);return h=="array"||h=="object"&&typeof e.length=="number"};goog.isDateLike=function(e){return goog.isObject(e)&&typeof e.getFullYear=="function"};goog.isString=function(e){return typeof e=="string"};goog.isBoolean=function(e){return typeof e=="boolean"};goog.isNumber=function(e){return typeof e=="number"};goog.isFunction=function(e){return goog.typeOf(e)=="function"};
goog.isObject=function(e){e=goog.typeOf(e);return e=="object"||e=="array"||e=="function"};goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(e){"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(h){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;
goog.cloneObject=function(e){var h=goog.typeOf(e);if(h=="object"||h=="array"){if(e.clone)return e.clone();var h=h=="array"?[]:{},c;for(c in e)h[c]=goog.cloneObject(e[c]);return h}return e};goog.bindNative_=function(e,h,c){return e.call.apply(e.bind,arguments)};
goog.bindJs_=function(e,h,c){if(!e)throw Error();if(arguments.length>2){var b=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(a,b);return e.apply(h,a)}}else return function(){return e.apply(h,arguments)}};goog.bind=function(e,h,c){goog.bind=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(e,h){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return e.apply(this,b)}};goog.mixin=function(e,h){for(var c in h)e[c]=h[c]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null)goog.global.eval("var _et_ = 1;"),typeof goog.global._et_!="undefined"?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var h=goog.global.document,c=h.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(h.createTextNode(e));h.body.appendChild(c);
h.body.removeChild(c)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(e,h){var c=function(a){return goog.cssNameMapping_[a]||a},b;b=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?c:function(a){for(var a=a.split("-"),d=[],f=0;f<a.length;f++)d.push(c(a[f]));return d.join("-")}:function(a){return a};return h?e+"-"+b(h):b(e)};goog.setCssNameMapping=function(e,h){goog.cssNameMapping_=e;goog.cssNameMappingStyle_=h};
goog.getMsg=function(e,h){var c=h||{},b;for(b in c)var a=(""+c[b]).replace(/\$/g,"$$$$"),e=e.replace(RegExp("\\{\\$"+b+"\\}","gi"),a);return e};goog.exportSymbol=function(e,h,c){goog.exportSymbol_(e,h,c)};goog.exportProperty=function(e,h,c){e[h]=c};goog.inherits=function(e,h){function c(){}c.prototype=h.prototype;e.superClass_=h.prototype;e.prototype=new c;e.prototype.constructor=e};
goog.base=function(e,h,c){var b=arguments.callee.caller;if(b.superClass_)return b.superClass_.constructor.apply(e,Array.prototype.slice.call(arguments,1));for(var a=Array.prototype.slice.call(arguments,2),d=!1,f=e.constructor;f;f=f.superClass_&&f.superClass_.constructor)if(f.prototype[h]===b)d=!0;else if(d)return f.prototype[h].apply(e,a);if(e[h]===b)return e.constructor.prototype[h].apply(e,a);else throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(e){e.call(goog.global)};var array_extension={};
(function(){var e=Array.prototype;if(!e.indexOf)e.indexOf=function(e){if(this===void 0||this===null)throw new TypeError;var c=Object(this),b=c.length>>>0;if(b===0)return-1;var a=0;arguments.length>0&&(a=Number(arguments[1]),a!==a?a=0:a!==0&&a!==1/0&&a!==-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a))));if(a>=b)return-1;for(a=a>=0?a:Math.max(b-Math.abs(a),0);a<b;a++)if(a in c&&c[a]===e)return a;return-1};if(!e.lastIndexOf)e.lastIndexOf=function(e){if(this===void 0||this===null)throw new TypeError;var c=
Object(this),b=c.length>>>0;if(b===0)return-1;var a=b;arguments.length>1&&(a=Number(arguments[1]),a!==a?a=0:a!==0&&a!==1/0&&a!==-(1/0)&&(a=(a>0||-1)*Math.floor(Math.abs(a))));for(b=a>=0?Math.min(a,b-1):b-Math.abs(a);b>=0;b--)if(b in c&&c[b]===e)return b;return-1};if(!e.filter)e.filter=function(e,c){if(this===void 0||this===null)throw new TypeError;var b=Object(this),a=b.length>>>0;if(typeof e!=="function")throw new TypeError;for(var d=[],f=0;f<a;f++)if(f in b){var k=b[f];e.call(c,k,f,b)&&d.push(k)}return d};
if(!e.forEach)e.forEach=function(e,c){var b,a=Object(this),d=a.length>>>0,f=0;if(!e||!e.call)throw new TypeError;for(c&&(b=c);f<d;){var k=String(f);a.hasOwnProperty(k)&&(k=a[k],e.call(b,k,f,a));f++}};if(!e.every)e.every=function(e,c){if(this===void 0||this===null)throw new TypeError;var b=Object(this),a=b.length>>>0;if(typeof e!=="function")throw new TypeError;for(var d=0;d<a;d++)if(d in b&&!e.call(c,b[d],d,b))return!1;return!0};if(!e.map)e.map=function(e,c){if(this===void 0||this===null)throw new TypeError;
var b=Object(this),a=b.length>>>0;if(typeof e!=="function")throw new TypeError;for(var d=Array(a),f=0;f<a;f++)f in b&&(d[f]=e.call(c,b[f],f,b));return d};if(!e.some)e.some=function(e,c){if(this===void 0||this===null)throw new TypeError;var b=Object(this),a=b.length>>>0;if(typeof e!=="function")throw new TypeError;for(var d=0;d<a;d++)if(d in b&&e.call(c,b[d],d,b))return!0;return!1};if(!e.reduce)e.reduce=function(e){var c,b=this.length,a;if(typeof e!=="function")throw new TypeError("First argument is not callable");
if((b==0||b===null)&&arguments.length<=1)throw new TypeError("Array length is 0 and no second argument");arguments.length<=1?(a=this[0],c=1):a=arguments[1];for(c=c||0;c<b;++c)c in this&&(a=e.call(void 0,a,this[c],c,this));return a};if(!e.reduceRight)e.reduceRight=function(e){if(this===void 0||this===null)throw new TypeError;var c=Object(this),b=c.length>>>0;if(typeof e!=="function")throw new TypeError;if(b===0&&arguments.length===1)throw new TypeError;b-=1;var a;if(arguments.length>=2)a=arguments[1];
else{do{if(b in this){a=this[b--];break}if(--b<0)throw new TypeError;}while(1)}for(;b>=0;)b in c&&(a=e.call(void 0,a,c[b],b,c)),b--;return a}})();var engine_extension={};
(function(){var e=Number.prototype,h=String.prototype,c=Array.prototype;if(!e.toFixedFloat)e.toFixedFloat=function(b){return parseFloat(this.toFixed(b))};if(!h.toInt)h.toInt=function(){var b;if((b=this.replace(/[^\d\.\-]/g,"")).length===0)return NaN;for(var a,d=0,f=0,k=b.length,g=0,c=!1;g<k;g++)if(a=b.charAt(g),a==="."){if(++d===2){c=!0;break}}else if(a==="-"&&++f===2){c=!0;break}return c===!0&&(b=b.replace(/[\.\-]/g,"")).length===0?NaN:/^-*0*\./.test(b)||(b=b.replace(/^-0+/,"-")).length===0||(b=
b.replace(/^0+/,"")).length===0?0:parseInt(b,10)};if(!h.toFloat)h.toFloat=function(){var b;if((b=this.replace(/[^-\d\.]/g,"")).length===0)return NaN;for(var a=0,d=b.length,f,k=0,g=0;a<d;a++)if(f=b.charAt(a),f===".")if(k!==0)return NaN;else k++;else if(f==="-")if(g!==0)return NaN;else g++;return parseFloat(b)};if(!c.remove)c.remove=function(b){if(this.length===0)return-1;b=this.indexOf(b);b!==-1&&this.splice(b,1);return b};if(!c.removeAll)c.removeAll=function(b){if(this.length===0)return this;for(var a=
this.length;(a=this.lastIndexOf(b,a-1))!==-1;)if(this.splice(a,1),a===0)break;return this};if(!c.removeList)c.removeList=function(b){if(this.length===0||b.length===0)return this;for(var a=b.length,d=0,f;d<a;d++)(f=this.indexOf(b[d]))!==-1&&this.splice(f,1);return this};if(!c.removeAt)c.removeAt=function(b){if(this.length!==0&&(b<0&&(b=this.length+b),b<0&&(b=0),this.hasOwnProperty(b)&&b<this.length))return this.splice(b,1)[0]};if(!c.addAt)c.addAt=function(b,a){this.splice(b,0,a);return a};if(!c.pushList)c.pushList=
function(b){return b.length===0?this.length:c.push.apply(this,b)};if(!c.pushListAt)c.pushListAt=function(b,a){if(a.length===0)return this.length;var d=[b,0];c.push.apply(d,a);c.splice.apply(this,d);return this.length}})();var jx={util:{}},Util={},echo={};
(function(){var e=window.console,h=[],c;c=e&&e.log?function(b){for(var a=0,d=arguments.length;a<d;a++)e.log(arguments[a])}:function(b){h.push.apply(h,arguments)};goog.exportSymbol("jx.util",Util);goog.exportSymbol("Util",Util);goog.exportSymbol("echo",c);Util.isNull=function(b){return b==null};Util.isNotNull=function(b){return b!=null};Util.isNullAnd=function(){for(var b=0,a=arguments.length;b<a;b++)if(arguments[b]!=null)return!1;return!0};Util.isNullOr=function(){for(var b=0,a=arguments.length;b<
a;b++)if(arguments[b]==null)return!0;return!1};Util.isNotNullAnd=function(){for(var b=0,a=arguments.length;b<a;b++)if(arguments[b]==null)return!1;return!0};Util.isNotNullOr=function(){for(var b=0,a=arguments.length;b<a;b++)if(arguments[b]!=null)return!0;return!1};Util.ifNull=function(b,a,d){return b==null?a:d===void 0?b:d};Util.ifTrue=function(b,a,d){return b===!0?a:d===void 0?b:d};Util.isFunction=function(b){return typeof b=="function"};Util.isString=function(b){return typeof b=="string"};Util.isNumber=
function(b){return typeof b=="number"};Util.isObject=function(b){return typeof b=="object"};Util.isArray=function(b){var a=Array.isArray;return b&&typeof b=="object"&&(a&&a(b)||typeof b.length=="number"&&b.hasOwnProperty("length")&&!b.propertyIsEnumerable("length"))};Util.split=function(b,a,d,f){if(typeof b!=="string")return[];a=a===void 0?/\s+/:a;d=d===void 0?function(d){return!!d}:d;f=f===void 0?function(d){return $.trim(d)}:f;b=b.split(a);f&&(b=b.map(f));d&&(b=b.filter(d));return b};Util.isEmpty=
function(b){if(!b)return!0;if(typeof b!="object")return!1;for(var a in b)if(b.hasOwnProperty(a))return!1;return!0};Util.isEmptyObj=function(b){if(b==null)return!0;if(typeof b!="object")return!1;for(var a in b)if(b.hasOwnProperty(a))return!1;return!0};Util.isNotEmptyObj=function(b){if(b==null||typeof b!="object")return!1;for(var a in b)if(b.hasOwnProperty(a))return!0;return!1};Util.isEmptyString=function(b){return b==null||b===""};Util.isEmptyArray=function(b){if(b==null)return!0;if(!Util.isArray(b))return!1;
for(var a=0,d=b.length;a<d;a++)if(b.hasOwnProperty(a))return!1;return!0};Util.emptyObject=function(b){if(!b||typeof b!="object")return b;if(Util.isArray(b))return b.length=0,b;for(var a in b)b.hasOwnProperty(a)&&delete b[a];return b};Util.deleteUndefined=function(b){if(!b||typeof b!="object")return b;var a;if(Util.isArray(b)){for(a=b.length-1;a>-1;a--)b.hasOwnProperty(a)&&b[a]===void 0&&b.splice(a,1);return b}for(a in b)b.hasOwnProperty(a)&&b[a]===void 0&&delete b[a];return b};Util.deepClone=function(b){if(!b)return b;
switch(typeof b){case "boolean":case "number":case "string":case "function":return b}if(Util.isArray(b)){for(var a=[],d=0,f=b.length;d<f;d++)d in b&&(a[d]=Util.deepClone(b[d]));return a}a={};for(d in b)b.hasOwnProperty(d)&&(a[d]=Util.deepClone(b[d]));return a};Util.clone=function(b,a,d){if(!b)return b;switch(typeof b){case "boolean":case "number":case "string":case "function":return b}if(Util.isArray(b)){if(d===1)return Array.prototype.slice.call(b);for(var f=[],k=b.length,g=0,d=d!==void 0?d-1:void 0;g<
k;g++)g in b&&(f[g]=Util.clone(b[g],a,d));return f}f={};k=Util.isEmptyObj(a);if(d===1)if(k)for(g in b)b.hasOwnProperty(g)&&(f[g]=b[g]);else for(g in a)a.hasOwnProperty(g)&&b.hasOwnProperty(g)&&(f[g]=b[g]);else if(d=d!==void 0?d-1:void 0,k)for(g in b)b.hasOwnProperty(g)&&(f[g]=Util.clone(b[g],void 0,d));else for(g in a)a.hasOwnProperty(g)&&b.hasOwnProperty(g)&&(f[g]=Util.clone(b[g],void 0,d));return f};Util.toArray=function(b){var a=[],d;for(d in b)b.hasOwnProperty(d)&&a.push(b[d]);return a};Util.toArrayWithKey=
function(b){var a=[],d;for(d in b)b.hasOwnProperty(d)&&a.push({key:d,val:b[d]});return a};Util.random=function(b){return Math.floor(b*Math.random())};Util.bound=function(b,a,d){isNaN(d)||(b=Math.min(b,d));isNaN(a)||(b=Math.max(b,a));return b};Util.callFn=function(){return arguments.length<=3?arguments[1].call(arguments[0],arguments[2]):arguments[1].apply(arguments[0],Array.prototype.slice.call(arguments,2))};Util.formatNumber=function(b,a,d,f,k){var d=d===void 0?"&#8361; ":d,a=isNaN(a)?0:a,f=f===
void 0?".":f,k=k===void 0?",":k,g=b<0?"-":"",c=parseInt(b=Math.abs(+b||0).toFixed(a),10)+"",i=c.length,i=i>3?i%3:0;return d+g+(i?c.substr(0,i)+k:"")+c.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+k)+(a?f+Math.abs(b-c).toFixed(a).slice(2):"")};Util.getBodyScroll=function(){var b=0,a=0;if(typeof window.pageYOffset==="number")a=window.pageYOffset,b=window.pageXOffset;else if(document.body&&(document.body.scrollLeft||document.body.scrollTop))a=document.body.scrollTop,b=document.body.scrollLeft;else if(document.documentElement&&
(document.documentElement.scrollLeft||document.documentElement.scrollTop))a=document.documentElement.scrollTop,b=document.documentElement.scrollLeft;return[b,a]};Util.hasClass=function(b,a){if(b==null||a==null)return!1;if(b.className===a)return!0;if(b.className)for(var d=b.classList?b.classList:Util.split(b.className),f=0,k=d.length;f<k;f++)if(d[f]===a)return!0;return!1};Util.hasTagAndClass=function(b,a,d){if(b==null||a==null||d==null)return!1;if(b.tagName===a){if(b.className===d)return!0;if(b.className&&
b.className.length>=d.length)for(var b=b.classList?b.classList:Util.split(b.className),a=0,f=b.length;a<f;a++)if(b[a]===d)return!0}return!1};Util.closest=function(b,a,d){if(Util.hasClass(b,a))return b;for(b=b.parentNode;Util.isNotNull(b)&&b!==d;b=b.parentNode)if(Util.hasClass(b,a))return b};Util.closestWithTag=function(b,a,d,f){if(Util.hasTagAndClass(b,a,d))return b;for(b=b.parentNode;Util.isNotNull(b)&&b!==f;b=b.parentNode)if(Util.hasTagAndClass(b,a,d))return b};Util.findFirstByClass=function(b,
a){if(b!=null){if(Util.hasClass(b,a))return b;for(var d=0,f=b.childNodes,k=f.length,g;d<k;d++)if(Util.isNotNull(f[d])&&(g=Util.findFirstByClass(f[d],a))!==void 0)return g}};Util.findFirstByTagAndClass=function(b,a,d){if(b!=null){if(Util.hasTagAndClass(b,a,d))return b;for(var f=0,b=b.childNodes,k=b.length,g;f<k;f++)if(Util.isNotNull(b[f])&&(g=Util.findFirstByTagAndClass(b[f],a,d))!==void 0)return g}};Util.findByClass=function(b,a,d){d===void 0&&(d=[]);if(b==null)return d;Util.hasClass(b,a)&&d.push(b);
for(var f=0,b=b.childNodes,k=b.length;f<k;f++)Util.isNotNull(b[f])&&Util.findByClass(b[f],a,d);return d};Util.findByTagAndClass=function(b,a,d,f){f===void 0&&(f=[]);if(b==null)return f;Util.hasTagAndClass(b,a,d)&&f.push(b);for(var k=0,b=b.childNodes,g=b.length;k<g;k++)Util.isNotNull(b[k])&&Util.findByTagAndClass(b[k],a,d,f);return f};Util.getHead=function(){return document.head?document.head:document.getElementsByTagName("head")[0]};Util.appendTag=function(b,a){return b.appendChild(document.createElement(a))};
Util.appendHTML=function(b,a){var d=document.createElement("div"),f,k=0,g=[];d.innerHTML=a;for(f=d.childNodes.length;k<f;k++)g.push(b.appendChild(d.firstChild));return g};Util.createStyle=function(b){b==null&&(b="");var a=document.createElement("style");a.type="text/css";a.rel="stylesheet";a.styleSheet?a.styleSheet.cssText=b:a.appendChild(document.createTextNode(b));Util.getHead().appendChild(a);return a};Util.removeStyle=function(b){b!=null&&b.parentNode!=null&&Util.getHead().removeChild(b)};Util.setStyle=
function(b,a){return b==null?"":b.styleSheet?b.styleSheet.cssText=a:b.childNodes[0].nodeValue=a};Util.appendStyle=function(b,a){return b==null?"":b.styleSheet?b.styleSheet.cssText+=a:b.childNodes[0].nodeValue+=a};Util.getStyle=function(b){return b==null?"":b.styleSheet?b.styleSheet.cssText:b.childNodes[0].nodeValue};Util.appendScript=function(b){var a=document.createElement("script");a.type="text/javascript";a.text?a.text=b:a.innerHTML=b;Util.getHead().appendChild(a);return a};Util.appendScriptFile=
function(b){document.write('<script type="text/javascript" src="'+b+'"><\/script>')};Util.outerHTML=function(b){if(b.outerHTML===void 0){var a=document.createElement("div");a.appendChild(b.cloneNode(!0));return a.innerHTML}return b.outerHTML};Util.index=function(b){for(var a=0;(b=b.previousSibling)!=null;)++a;return a};Util.contains=function(b,a,d){for(;a!=null;){if(a===b)return!0;if(a===d)break;a=a.parentNode}return!1};Util.areEqualArrays=function(b,a){if(b==null||a==null)return!1;if(b===a)return!0;
if(b.length!==a.length)return!1;for(var d=0,f=b.length;d<f;d++)if(b.hasOwnProperty(d)&&!a.hasOwnProperty(d)||a.hasOwnProperty(d)&&!b.hasOwnProperty(d)||b[d]!==a[d])return!1;return!0};Util.areEqualObjects=function(b,a){if(b==null||a==null)return!1;if(b===a)return!0;if(typeof b!=="object"||typeof a!=="object")return!1;for(var d in b)if(b.hasOwnProperty(d)&&(!a.hasOwnProperty(d)||b[d]!==a[d]))return!1;for(d in a)if(a.hasOwnProperty(d)&&(!b.hasOwnProperty(d)||b[d]!==a[d]))return!1;return!0};Util.areEqualComplex=
function(b,a,d){if(b==null||a==null)return!1;if(b===a)return!0;var f=d.length,k=d[0];if(f===1)return k==="array"?Util.areEqualArrays(b,a):Util.areEqualObjects(b,a);if(f>1){d=d.slice(1);f=0;if(k==="array"){if(b.length!==a.length)return!1;for(k=b.length;f<k;f++)if(!a.hasOwnProperty(f)||!Util.areEqualComplex(b[f],a[f],d))return!1}else{for(f in b)if(b.hasOwnProperty(f)&&(!a.hasOwnProperty(f)||!Util.areEqualComplex(b[f],a[f],d)))return!1;for(f in a)if(a.hasOwnProperty(f)&&(!b.hasOwnProperty(f)||!Util.areEqualComplex(b[f],
a[f],d)))return!1}return!0}};Util.typeCheck=function(b,a,d,f,k){if(d&&a===void 0||f&&a===null)return!0;switch(typeof b){case "string":if(typeof a===b)return!0;break;case "function":if(a instanceof b)return!0}if(k)return!1;throw new TypeError("object is not a "+b+", but is a "+typeof a);};Util.sprint=function(b,a,d,f){Util.typeCheck("string",b);Util.typeCheck("object",a);Util.typeCheck("string",d,!0);Util.typeCheck("string",f,!0);var k;d===void 0&&(d="%");f===void 0&&(f="%");for(k in a)a.hasOwnProperty(k)&&
(b=b.replace(RegExp(d+k+f,"gm"),a[k]));return b};Util.tagReplaces={"&":"&amp;","<":"&lt;",">":"&gt;"};Util.replaceTag=function(b){return Util.tagReplaces[b]||b};Util.escapeHtmlTags=function(b){return b.replace(/[&<>]/g,Util.replaceTag)};Util.escapeRegExp=function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};Util.strReplace=function(b,a){var d,f=[];for(d in a)a.hasOwnProperty(d)&&f.push(Util.escapeRegExp(d));return b.replace(RegExp("("+f.join("|")+")","gm"),function(d){return a[d]})};Util.calCheckSize=
function(){var b={},a=document.createElement("div");document.body.appendChild(a);a.innerHTML="<input type='checkbox' style='margin:0;padding:0;overflow:hidden'/>";b.checkboxW=a.childNodes[0].offsetWidth;b.checkboxH=a.childNodes[0].offsetHeight;a.innerHTML="<input type='radio' style='margin:0;padding:0;overflow:hidden'/>";b.radioW=a.childNodes[0].offsetWidth;b.radioH=a.childNodes[0].offsetHeight;document.body.removeChild(a);return b};Util.which=function(b){for(var a={},d=0,f;d<b.length;d++)if(f=b[d].toLowerCase(),
f==="number"){for(f=48;f<=57;f++)a[f]=!0;for(f=96;f<=105;f++)a[f]=!0}else if(f==="alphabet")for(f=65;f<=90;f++)a[f]=!0;else if(f==="arrow")for(f=37;f<=40;f++)a[f]=!0;else f.length>1&&(f=f.replace(/\s/g,"")),f.length>=3&&(f=f.replace(/numpad|num/g,"n").replace(/korean|kor/g,"kr")),a[Util.keyMapKeydown[f]]=!0;return a};Util.keyMapKeydown={backspace:8,tab:9,enter:13,shift:16,control:17,ctrl:17,alt:18,pause:19,"break":19,capslock:20,escape:27,esc:27,space:32," ":32,pageup:33,pgup:33,pagedown:34,pgdown:34,
pgdn:34,end:35,home:36,leftarrow:37,left:37,uparrow:38,up:38,rightarrow:39,right:39,downarrow:40,down:40,insert:45,ins:45,"delete":46,del:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,n0:96,n1:97,n2:98,n3:99,n4:100,n5:101,n6:102,n7:103,n8:104,n9:105,"n*":106,"n+":107,"n-":109,"n.":110,"n/":111,f1:112,
f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,mute:173,volumedown:174,volumeup:175,":":186,";":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,kr:229};Util.printEventPos=function(b){Util.print("client: ("+b.clientX+", "+b.clientY+"), layer: ("+b.layerX+", "+b.layerY+"), offset: ("+b.offsetX+", "+b.offsetY+"), page: ("+b.pageX+
", "+b.pageY+"), screen: ("+b.screenX+", "+b.screenY+"), xy: ("+b.x+", "+b.y+")")};Util.print=function(b){if(c)if(arguments.length===1)c(arguments[0]);else for(var a=0,d=arguments.length;a<d;a++)c(arguments[a])};Util.open=function(b){var a={url:"about:blank",name:"_blank",channelmode:"no",directories:"yes",fullscreen:"no",height:void 0,left:void 0,location:"yes",menubar:"yes",resizable:"yes",scrollbars:"yes",status:"yes",titlebar:"yes",toolbar:"yes",top:void 0,width:void 0,replace:void 0},d;if(Util.isNotNull(b))for(d in a)a.hasOwnProperty(d)&&
(a[d]=b[d]);b=Util.ifNull(a.height,"","height="+a.height+", ")+Util.ifNull(a.left,"","left="+a.left+", ")+Util.ifNull(a.top,"","top="+a.top+", ")+Util.ifNull(a.width,"","width="+a.width+", ")+"channelmode="+a.channelmode+", directories="+a.directories+", fullscreen="+a.fullscreen+", location="+a.location+", menubar="+a.menubar+", resizable="+a.resizable+", scrollbars="+a.scrollbars+", status="+a.status+", titlebar="+a.titlebar+", toolbar="+a.toolbar;return Util.isNull(a.replace)?window.open(a.url,
a.name,b):window.open(a.url,a.name,b,a.replace)}})();var Tracer={};
(function(){function e(){this.stack="";this.timers={}}var h=goog.getObjectByName("jx.util");goog.exportSymbol("Tracer",e);var c=e.prototype;c.print=function(b,a,d){b===void 0&&(b="");a===void 0&&(a="timer");d===void 0&&(d=!0);var f=this.timers[a],k=(new Date).getTime(),f=h.isNull(f)?0:k-f;h.print((this.stack.length>0?this.stack+" :: ":"")+b+", Time elapsed since last update: "+f+"ms");d&&(this.timers[a]=k)};c.addStack=function(b){this.stack=this.stack+" > "+b};c.removeStack=function(){this.stack=this.stack.substring(0,
this.stack.lastIndexOf(" > "))};c.clearStack=function(){this.stack=""}})();jx.util$={};var Util$={};
(function(){goog.exportSymbol("jx.util$",Util$);goog.exportSymbol("Util$",Util$);Util$.is$=function(e){return e instanceof jQuery?!0:!1};Util$.safe$=function(e){return e instanceof jQuery?e:$(e)};Util$.unbindRemove=function(e){e.unbind().remove()};jQuery.fn.getBoundingRect=function(){var e=this.offset();return{left:e.left,top:e.top,width:this.outerWidth(),height:this.outerHeight()}};jQuery.fn.containsEvent=function(e){if(this.length===0)return!1;var h,c,b,a;if(this.length<=1)return h=this.getBoundingRect(),
b=e.pageX,a=e.pageY,b>=h.left&&b<=h.left+h.width&&a>=h.top&&a<=h.top+h.height;c=!1;this.each(function(){h=$(this).getBoundingRect();b=e.pageX;a=e.pageY;if(b>=h.left&&b<=h.left+h.width&&a>=h.top&&a<=h.top+h.height)return c=!0,!1});return c};Util$.baseurlOfHeadScript=function(e){var h=$(document.getElementsByTagName("head")[0]).find("script[src$='"+e+"']").attr("src");return h.substring(0,h.indexOf(e))};Util$.calScrollbarDims=function(e){if(Util.isNotNull(window._SCROLLBAR))return window._SCROLLBAR;
if(Util.isNotNull(window.opener)&&Util.isNotNull(window.opener._SCROLLBAR))return window.opener._SCROLLBAR;var e=Util$.safe$(e),h;e[0].innerHTML="<div id='scrollbardim' style='position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;overflow:scroll;'></div>";h=$(document.getElementById("scrollbardim"));h={w:h.width()-h[0].clientWidth,h:h.height()-h[0].clientHeight};e[0].innerHTML="";return window._SCROLLBAR=h}})();jx.grid={};var JGM={};
(function(){var e=goog.getObjectByName("jx.util"),h=goog.getObjectByName("jx.util$");goog.exportSymbol("JGM",JGM);goog.exportSymbol("jx.grid",JGM);JGM.version="2.0.0";JGM._map={ArrayExtIE:{cacheModule:!1},Cache:{cacheModule:!0},Cell:{cacheModule:!1},CheckManager:{cacheModule:!0},ColDefManager:{cacheModule:!0},ColGroup:{cacheModule:!0},ColHeader:{cacheModule:!0},Collapser:{cacheModule:!0},DataManager:{cacheModule:!0},DataCreator:{cacheModule:!0},EditManager:{cacheModule:!0},Editor:{cacheModule:!0},EngineExt:{cacheModule:!1},
EventManager:{cacheModule:!0},Footer:{cacheModule:!0},HeaderTree:{cacheModule:!0},Grid:{cacheModule:!0},GridManager:{cacheModule:!1},MenuBar:{cacheModule:!0},ViewportManager:{cacheModule:!0},SelectionManager:{cacheModule:!0},SearchManager:{cacheModule:!0},TooltipManager:{cacheModule:!0},Tracer:{cacheModule:!1},Tree:{cacheModule:!0},TreeNode:{cacheModule:!1},Util:{cacheModule:!1},Util$:{cacheModule:!1}};JGM.create=function(c,b){e.isNull(b)&&(b={});if(!this.hasOwnProperty(c))throw Error("cannot find a grid module: name="+
c);if(this._map.hasOwnProperty(c))if(this._map[c].cacheModule){var a=b.mid="JGM"+this.m.length++,d=new this[c](b);this.m.hasOwnProperty(c)||(this.m[c]={});this.m[c][a]=d;c==="Grid"&&d.name&&(this.gridMap[d.name]=d);return d}else return new this[c](b);else return new this[c](b)};JGM._destroy=function(c,b){var a,d,f,k;for(d in b)if(b.hasOwnProperty(d))switch(d){case "map":a=b[d];if(e.isString(a)){a=e.split(a);k=a.length;for(f=0;f<k;f++)JGM._deleteMap(c,a[f])}else if(a instanceof Array){k=a.length;for(f=
0;f<k;f++)e.emptyObject(a[f])}else e.emptyObject(a);break;case "array":a=b[d];if(e.isString(a)){a=e.split(a);k=a.length;for(f=0;f<k;f++)JGM._deleteArray(c,a[f])}else a.length=0;break;case "$":a=b[d];if(e.isString(a)){a=e.split(a);k=a.length;for(f=0;f<k;f++)JGM._delete$(c,a[f])}else if(a instanceof Array){k=a.length;for(f=0;f<k;f++)h.unbindRemove(a[f])}else h.unbindRemove(a);break;case "style":a=b[d];if(e.isString(a)){a=e.split(a);k=a.length;for(f=0;f<k;f++)JGM._deleteStyle(c,a[f])}else if(a instanceof
Array){k=a.length;for(f=0;f<k;f++)e.removeStyle(a[f])}else e.removeStyle(a);break;case "property":a=b[d];if(e.isString(a)){a=e.split(a);k=a.length;for(f=0;f<k;f++)delete c[a[f]]}else if(a instanceof Array){k=a.length;for(f=0;f<k;f++)delete c[a[f]]}break;case "module":a=b[d];if(e.isString(a)){a=e.split(a);k=a.length;for(f=0;f<k;f++)JGM._deleteModule(c,a[f])}else if(a instanceof Array){k=a.length;for(f=0;f<k;f++)a[f].destroy()}else a.destroy();break;case "name":c.hasOwnProperty("mid")&&(JGM._remove(b[d],
c.mid),delete c.mid);break;case "path":c.hasOwnProperty("grid")&&c.grid.hasOwnProperty(b[d])&&(delete c.grid[b[d]],delete c.grid)}e.emptyObject(c)};JGM._deleteMap=function(c,b){c.hasOwnProperty(b)&&(e.emptyObject(c[b]),delete c[b])};JGM._deleteArray=function(c,b){if(c.hasOwnProperty(b))c[b].length=0,delete c[b]};JGM._delete$=function(c,b){c.hasOwnProperty(b)&&(h.unbindRemove(c[b]),delete c[b])};JGM._deleteStyle=function(c,b){c.hasOwnProperty(b)&&(e.removeStyle(c[b]),delete c[b])};JGM._deleteModule=
function(c,b){c.hasOwnProperty(b)&&(c[b].destroy(),delete c[b])};JGM._remove=function(c,b){delete this.m[c][b]};JGM.grid=function(c){return this.create("Grid",c)};JGM.gridMap={};JGM.getGrid=function(c){if(this.gridMap.hasOwnProperty(c))return this.gridMap[c]};JGM._add=function(c,b){this[c]=b};JGM._extend=function(c,b){var a=e.ifNull(b,{});$.extend(!0,c,a);$.extend(!0,a,c);return a};JGM.m={length:0};JGM._CONST={_cssUnselectable:"-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;",
_cssUnselectable:"-webkit-user-drag:none;-moz-user-drag:none;user-drag:none;",_checkboxWidth:void 0,_checkboxHeight:void 0,_radioWidth:void 0,_radioHeight:void 0};JGM._globalEventsBound=!1;JGM._globalEvents={_mousemove:function(c){var b,a=JGM.m.Grid;for(b in a)a.hasOwnProperty(b)&&a[b]._mousemove(c)},_mouseup:function(c){var b,a=JGM.m.Grid;for(b in a)a.hasOwnProperty(b)&&a[b]._mouseup(c)},_resize:function(c){var b,a=JGM.m.Grid;for(b in a)a.hasOwnProperty(b)&&a[b]._resize(c)}};JGM._bindGlobalEvents=
function(){if(!this._globalEventsBound)$(document).bind({mousemove:this._globalEvents._mousemove,mouseup:this._globalEvents._mouseup}),$(window).resize(this._globalEvents._resize),this._globalEventsBound=!0};JGM._unbindGlobalEvents=function(){if(this._globalEventsBound)$(document).unbind({mousemove:this._globalEvents._mousemove,mouseup:this._globalEvents._mouseup}),$(window).unbind("resize",this._globalEvents._resize),this._globalEventsBound=!1};JGM.error={LENGTH_NOT_EQUAL:"Lengths are not equal",
NOT_MODIFIABLE:"Cannot modify value for '%0'.",KEY_UNDEFINED:"Column '%0' is undefined.",BAD_NULL:"Column '%0' cannot be null.",DUP_KEY:"Duplicate column key '%0'.",DUP_ENTRY:"Duplicate entry '%0' for '%1'.",KEY_NOT_FOUND:"'%0' for '%1' doesn't exist in table.",PARSE_ERROR:"Cannot parse '%0' for '%1'.",INVALID_DEFAULT:"Invalid default value '%0' for '%1'.",MULTIPLE_PRI_KEY:"Multiple primary key defined.",DATA_TOO_LONG:"Data '%0' too long for column '%1'. Maximum is %2.",DATA_TOO_SHORT:"Data '%0' too short for column '%1'. Minimum is %2.",
WRONG_LENGTH:"Length of data '%0' is not '%1' characters long for column '%2'.",BIGGER_THAN:"Data '%0' too big for column '%1'. Maximum is %2.",SMALLER_THAN:"Data '%0' too small for column '%1'. Minimum is %2.",WRONG_VALUE:"Incorrect value: '%0' for '%1'."}})();jx.grid.renderer={};
(function(){var e=goog.getObjectByName("jx.grid");goog.getObjectByName("jx.util");goog.exportSymbol("jx.grid.renderer",h);var h=e.renderer=jx.grid.renderer;h.selectBox=function(c){var b=c.mapping,a=c.attr,d=c["default"],f=c.style,k=c.callback,g,j,i,e=0,h=[],n=[],m="<select";if(a)for(i in a)a.hasOwnProperty(i)&&(m+=" "+i+'="'+a[i]+'"');if(f){m+=' style="';for(i in f)f.hasOwnProperty(i)&&(m+=i+":"+f[i]+";");m+='"'}m+=">";for(g in b)b.hasOwnProperty(g)&&(c=b[g],h.push(g),n.push(c),d==c&&(j=e),e++);return function(d){var a,
f,b=m;for(f=0;f<e;f++)if(d==n[f]){a=f;break}a===void 0&&(a=j);for(f=0;f<e;f++)b+='<option value="'+n[f]+'"',f===a&&(b+=' selected="selected"'),b+=">"+h[f]+"</option>";b+="</select>";k&&(a=[],a.push(b),Array.prototype.push.apply(a,arguments),b=k.apply(this,a));return b}}})();jx.lang={};jx.lang.Disposable={};
(function(){function e(){}function h(d,a,b){if(typeof d!="object")return!1;var c,i,e;if(a)for(var b=0,l=a.length;b<l;b++)if(c=a[b],this.hasOwnProperty(c))if(d.hasOwnProperty(c)){if(i=this[c],e=d[c],i!==d&&!(i===i||e===e))return!1}else return!1;else{if(d.hasOwnProperty(c))return!1}else{if(b)for(c in this){if(this.hasOwnProperty(c)){if(!d.hasOwnProperty(c))return!1;i=this[c];e=d[c];if(i!==e)if(i){if(typeof i!="object"||typeof e!="object")return!1;if(i.equals){if(!i.equals(e,null,b-1))return!1}else if(e.equals&&
!e.equals(i,null,b-1))return!1;if(!h.call(i,e,null,b-1))return!1}else if(!(i===i||e===e))return!1}}else for(c in this)if(this.hasOwnProperty(c))if(d.hasOwnProperty(c)){if(i=this[c],e=d[c],i!==d&&!(i===i||e===e))return!1}else return!1;for(c in d)if(d.hasOwnProperty(c)&&!this.hasOwnProperty(c))return!1}return!0}function c(a,k){var b,j;if(a)for(b in this){if(this.hasOwnProperty(b)){if((j=this[b])&&typeof j=="object")if(j.dispose)j.dispose(a-1,k);else if(k){if(d(j))j.length=0;c.call(j,a-1,k)}delete this[b]}}else for(b in this)this.hasOwnProperty(b)&&
delete this[b]}var b=goog.getObjectByName("jx.util");goog.exportSymbol("jx.lang.Disposable",e);goog.exportProperty(e.prototype,"dispose",c);var a=e.prototype,d=b.isArray;b.equals=Object.equals=function(d,a,b,c){return typeof d=="object"?h.call(d,a,b,c):d!==d&&a!==a};b.dispose=Object.dispose=function(d,a,b){if(typeof d=="object")return c.call(d,a,b)};a.equals=h;a.dispose=c})();jx.events={};jx.events.EventDispatcher={};
(function(){function e(){}goog.getObjectByName("jx.grid");goog.getObjectByName("jx.util");var h=goog.getObjectByName("jx.lang.Disposable");goog.exportSymbol("jx.events.EventDispatcher",e);goog.inherits(e,h);var c=e.prototype,b=h.prototype.dispose;c.dispose=function(){b.call(this._handlers,-1,!0);b.call(this)};c.addEventListener=function(a,d){if(!a)throw Error("Invalid event type: "+a);if(typeof d!="function")throw Error("Event listener must be a function");if(!this._handlers)this._handlers={};var f=
this._handlers,a=(a+"").toLowerCase();f.hasOwnProperty(a)||(f[a]=[]);f=f[a];f.indexOf(d)===-1&&f.push(d)};c.removeEventListener=function(a,d){if(this._handlers){var a=(a+"").toLowerCase(),f=this._handlers;if(f.hasOwnProperty(a)){for(var k=f[a],b=-1;(b=k.indexOf(d,b+1))!==-1;)k.splice(b,1);k.length===0&&delete f[a]}}};c.dispatchEvent=function(a){if(!a||!a.type)throw Error("Invalid event");if(!this._handlers){if(a.cancelable&&a.defaultPrevented)return!1;a.defaultAction&&a.defaultAction(this);return!0}var d=
this._handlers,f=(a.type+"").toLowerCase();a.target=this;if(d.hasOwnProperty(f))for(var d=d[f],f=0,k=d.length,b;f<k&&!a.stopPropagation;f++)b=d[f],b.handleEvent?b.handleEvent(a):b.call(this,a);if(a.cancelable&&a.defaultPrevented)return!1;a.defaultAction&&a.defaultAction(this);return!0}})();jx.struct={};jx.struct.TreeNode={};jx.struct.Tree={};var TreeNode={},Tree={};
(function(){function e(a){this.tree=a.tree;this.data=a.data;this.nodeId=a.nodeId;this.childrenMap={};this.children=[]}function h(a){this.list=a.list;this._options=JGM._extend({nodeKey:"nodeId",parentKey:"parentId"},a.options);this.map={};this.root=new e({tree:this});this.infants={}}var c=goog.getObjectByName("jx.util");goog.exportSymbol("jx.struct.TreeNode",e);goog.exportSymbol("jx.struct.Tree",h);goog.exportSymbol("TreeNode",e);goog.exportSymbol("Tree",h);e.getInstance=function(a){return new e(a)};
var b=e.prototype;b.destroy=function(){this.detach();delete this.tree;delete this.data;delete this.nodeId;delete this.childrenMap;delete this.children};b.destroyCompletely=function(){this.detachCompletely();delete this.tree;delete this.data;delete this.nodeId;delete this.childrenMap;delete this.children};b.destroyDown=function(){c.isNotNull(this.parent)&&this.parent.removeChild(this);this.traverse({post:!0,fn:function(){this.destroy()}})};b.detach=function(){delete this.parent;delete this.level;this.children.length=
0;this.childrenMap={}};b.detachCompletely=function(){c.isNotNull(this.parent)&&this.parent.removeChild(this);this.removeAllChildren();delete this.parent;delete this.level};b.detachDown=function(){c.isNotNull(this.parent)&&this.parent.removeChild(this);this.traverse({post:!0,fn:function(){this.detach()}})};b.isRoot=function(){return c.isNull(this.parent)};b.getRoot=function(){};b.isLeaf=function(){return this.children.length===0};b.setParent=function(a){if(this.parent!==a)c.isNotNull(this.parent)&&
this.parent.removeChild(this),this.parent=a,delete this.level,c.isNotNull(a)&&a.addChild(this)};b.hasChild=function(a){return this.childrenMap.hasOwnProperty(a.nodeId)};b.addChild=function(a){this.hasChild(a)||(this.children.push(a),this.childrenMap[a.nodeId]=this.children.length-1,a.setParent(this))};b.addChildAt=function(a,d){var f;if(this.hasChild(d)){f=this.childrenMap[d.nodeId];if(f===a)return;this.children.removeAt(f)}this.children.addAt(a,d);c.isNotNull(f)&&f<a?this.resetChildIdx(f):this.resetChildIdx(a);
d.setParent(this)};b.removeChild=function(a){if(this.hasChild(a)){var d=this.childrenMap[a.nodeId];this.children.removeAt(d);delete this.childrenMap[a.nodeId];this.resetChildIdx(d);delete a.parent;delete a.level}};b.removeChildAt=function(a){var d=this.children[a];this.children.removeAt(a);delete this.childrenMap[d.nodeId];this.resetChildIdx(a);delete d.parent;delete d.level};b.resetChildIdx=function(a){c.isNull(a)&&(a=0);for(var d=this.children,f=d.length,k=this.childrenMap;a<f;a++)k[d[a].nodeId]=
a};b.removeAllChildren=function(){for(var a=0,d=this.children,f=d.length;a<f;a++)delete d[a].parent,delete d[a].level;d.length=0;this.childrenMap={}};b.getSiblings=function(){if(this.isRoot())return[];var a=this.parent.children.slice();a.removeAt(this.parent.getChildIdx(this));return a};b.getChildIdx=function(a){return this.childrenMap[a.nodeId]};b.getIdx=function(){return this.isRoot()?-1:this.parent.getChildIdx(this)};b.getPath=function(){return this.traverse({res:[],up:!0,post:!0,fn:function(a){this.isRoot()||
a.res.push(this.getIdx())}}).res};b.getAncestors=function(){var a={res:[],up:!0,post:!0,fn:function(d){d.res.push(this)}};this.traverse(a);a.res.pop();return a.res};b.getDescendents=function(){var a={res:[],fn:function(d){d.res.push(this)}};this.traverse(a);a.res.shift();return a.res};b.getLevel=function(){return this.isRoot()?this.level=-1:this.level=this.parent.getLevel()+1};b.find=function(a){return this.traverse({fn:function(d){if(this.data===a)d.res=this,d.stop=!0}}).res};b.traverse=function(a,
d){if(a.stop)return a;if(a.up)this.isRoot()?this.callFn(a):a.post?(this.parent.traverse(a),this.callFn(a)):(this.callFn(a),this.parent.traverse(a));else{var f=0,k=this.children,b=k.length;if(a.post){for(;f<b;f++)k[f].traverse(a,f);this.callFn(a,d)}else if(this.callFn(a,d),a.propagate===!1)delete a.propagate;else for(;!a.stop&&f<b;f++)k[f].traverse(a,f)}return a};b.traverseChildren=function(a){for(var d=0,f=this.children,k=f.length;d<k;d++)f[d].traverse(a,d)};b.traverseParent=function(a){c.isNotNull(this.parent)&&
this.parent.traverse(a)};b.callFn=function(a,d){if(!a.stop)c.isNull(a.target)?c.callFn(this,a.fn,a,d):(a.node=this,c.callFn(a.target,a.fn,a,d))};h.getInstance=function(a){return new h(a)};b=h.prototype;b.__init=function(){this.makeTree()};b.destroy=function(){this.root.destroyDown();this.map={};this.emptyInfants();delete this.list;delete this._options;delete this.map;delete this.root;delete this.infants;delete this.mid};b.detach=function(){this.root.detachDown();this.emptyInfants()};b.emptyInfants=
function(){var a,d=this.infants;for(a in d)if(d.hasOwnProperty(a))d[a].length=0;this.infants={}};b.reattach=function(a){this.detach();if(c.isNull(a))a=this.list;for(var d=this._options.nodeKey,f=this.map,k=a.length,b=0;b<k;b++)this.attachNode(f[a[b][d]])};b.makeTree=function(a){if(c.isNull(a))a=this.list;for(var d=0,f=a.length;d<f;d++)this.createNode(a[d])};b.hasNode=function(a){return c.isNotNull(a)&&this.map.hasOwnProperty(a[this._options.nodeKey])};b.getNode=function(a){return this.map[a[this._options.nodeKey]]};
b.getNodeByNodeId=function(a){return this.map[a]};b.createNode=function(a){if(!this.hasNode()){var d=a[this._options.nodeKey],a=new e({tree:this,data:a,nodeId:d});this.map[d]=a;this.attachNode(a);return a}};b.adoptInfants=function(a,d){if(this.infants.hasOwnProperty(d)){for(var f=this.infants[d],k=0,b=f.length;k<b;k++)a.addChild(f[k]);f.length=0;delete this.infants[d]}};b.attachNode=function(a){var d=a.nodeId,f=a.data[this._options.parentKey];this.adoptInfants(a,d);if(c.isNull(f)||f==d)return this.root.addChild(a),
!0;if(this.map.hasOwnProperty(f))return this.map[f].addChild(a),!0;this.addToInfants(a,f);return!1};b.changeNodeId=function(a,d,f){if(d!==f)delete this.map[d],this.map[f]=a,this.removeChildren(a),a.nodeId=a.data[this._options.nodeKey]=f,c.isNotNull(a.parent)&&(a.parent.childrenMap[f]=a.parent.childrenMap[d],delete a.parent.childrenMap[d]),this.adoptInfants(a,f)};b.changeParentId=function(a,d,f){d!==f&&(c.isNull(a.parent)&&this.removeFromInfants(a,d),d=this.map[f],a.setParent(d),a.data[this._options.parentKey]=
f,c.isNull(d)&&this.addToInfants(a,f))};b.destroyNodeByData=function(a){this.destroyNode(this.getNode(a))};b.destroyNode=function(a){this.removeChildren(a);this.removeFromInfants(a);this.removeFromMap(a);a.destroyCompletely()};b.removeFromMap=function(a){delete this.map[a.nodeId]};b.addToInfants=function(a,d){this.infants.hasOwnProperty(d)||(this.infants[d]=[]);this.infants[d].push(a)};b.removeFromInfants=function(a,d){c.isNull(d)&&(d=a.data[this._options.parentKey]);this.infants.hasOwnProperty(d)&&
(this.infants[d].remove(a),this.infants[d].length===0&&delete this.infants[d])};b.removeChildren=function(a){a.children.length!==0&&(this.infants.hasOwnProperty(a.nodeId)||(this.infants[a.nodeId]=[]),this.infants[a.nodeId].pushList(a.children),a.removeAllChildren())};b.sortList=function(a){c.isNull(a)?a=[]:a.length=0;this.root.traverseChildren({fn:function(){a.push(this.data)}})}})();jx.grid.BaseModule={};
(function(){function e(b){if(b){if(b.mid!=null)this.mid=b.mid;if(b.grid)this.grid=b.grid}var a=this._defaultOptions&&this._defaultOptions(b.grid),d=b&&b.options;if(d||a)a||(a={}),d&&$.extend(!0,a,d),this._options=a,this.dispatchEvent({type:"afteroption",options:a});this._init&&(this.dispatchEvent({type:"beforeinit"}),this._init(b),this.dispatchEvent({type:"afterinit"}));var f=this,k=this.grid;k&&["Dispose","CreateCss","CreateDynamicCss","Render","Keydown","Keyup","Keypress","Mousein","Mouseout","Mouseenter",
"Mouseleave","Mousemove","Mouseover","Mousedown","Mouseup","Click","Dblclick","Resize","ResizeWidth","ResizeHeight","Scroll","ScrollH","ScrollV"].forEach(function(d){var a="before"+d,d="after"+d,b="_"+a,c="_"+d;f[b]&&k.addEventListener(a,function(d){return f[b](d)});f[c]&&k.addEventListener(d,function(d){return f[c](d)})});this._bindEvents&&(this.dispatchEvent({type:"beforebindevents"}),this._bindEvents(b),this.dispatchEvent({type:"afterbindevents"}));this.dispatchEvent({type:"complete"})}var h=goog.getObjectByName("jx.events.EventDispatcher");
goog.exportSymbol("jx.grid.BaseModule",e);goog.inherits(e,h);var h=e.prototype,c=h.dispose;h._beforeDispose=function(){this.dispose()};h.dispose=function(){delete this.grid;this.dispatchEvent({type:"beforedispose"});c.call(this);this.dispatchEvent({type:"afterdispose"})};h.getDataMgr=function(){return this.grid.dataMgr};h.getAllData=function(){return this.grid.dataMgr.all};h.getDataList=function(){return this.grid.dataMgr.datalist};h.getIdKey=function(){return this.grid.dataMgr.idKey};h.getColMgr=
function(){return this.grid.colDefMgr};h.getColumns=function(){return this.grid.colDefMgr.get()};h.getEventMgr=function(){return this.grid.event};h.getView=function(){return this.grid.view};h.getHeader=function(){return this.grid.header};h.bindGridEvent=function(){var b=this.grid.event;return b.bind.apply(b,arguments)};h.triggerGridEvent=function(){var b=this.grid.event;return b.trigger.apply(b,arguments)};h.toCssStyle=function(b,a,d){var f=[];d||(b="#"+this.grid.mid+" "+b);if(typeof a!="string"){var k,
d="";a.hasOwnProperty("_prepend")&&(a._prepend&&f.push(a._prepend),delete a._prepend);a.hasOwnProperty("_append")&&(a._append&&(d=";"+a._append),delete a._append);for(k in a)f.push(k+":"+a[k]);f=f.join(";")+d}return b+"{"+f+"}"};h.toCssStyles=function(b,a,d){var b=b||[],f;for(f in a)b.push(this.toCssStyle(f,a[f],d));return b}})();jx.data={};jx.data.DataManager={};
(function(){function e(a){this.mid=a.mid;this.grid=a.grid;this.grid.dataMgr=this;this.all=[];this.datalist=[];this.failed=[];this._options=h._extend({idKey:void 0,idColKeys:[],uniqueKeys:[]},a.options);this._consts={_auto:0,_given:1,_composite:2,_notReal:this.mid+"@NR"+c.random(1E4),_add:0,_addList:1,_update:2,_updateList:3,_remove:4,_removeList:5,unknown:0,number:1,string:2,"boolean":3,date:4,"enum":5};c.isNotNull(this._options.idKey)?(this._idMode=this._consts._given,this.idKey=this._options.idKey):
(this._idMode=this._options.idColKeys.length!==0?this._consts._composite:this._consts._auto,this.idKey="J@I"+this.mid+"@"+c.random(1E4));this._increment=0;this.keyToType={};this._idToIdx={};this._idToData={};this._filters=[];this._history=[];this._redoHistory=[];this.uniqueMap={};this.__init(a)}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.data.DataManager",e);h._add("DataManager",e);e.getInstance=function(a){return new e(a)};
var b=e.prototype;b.__init=function(a){for(var d=0,f=this._options.uniqueKeys,b,g=this.uniqueMap,j=f.length,i=this.keyToType,e=this.grid.colDefMgr.getAll();d<j;d++)b=f[d],typeof b==="string"&&(g[b]={});j=e.length;for(d=0;d<j;d++)f=e[d],b=f.key,f.hasOwnProperty("unique")&&f.unique===!0&&!g.hasOwnProperty(b)&&(g[b]={}),i[b]=this.mapDatatype(f.type);c.ifNull(a.datalist,[]);this.bindEvents();this.set(a.datalist)};b.mapDatatype=function(a){if(typeof a==="string")switch(a=a.toLowerCase(),a){case "number":return this._consts.number;
case "string":return this._consts.string;case "boolean":return this._consts["boolean"];case "date":return this._consts.date;case "enum":return this._consts["enum"]}return this._consts.unknown};b.bindEvents=function(){this.grid.event.bind({onDestroy:this._destroy,keydownCanvas:this._keydownCanvas},this)};b._destroy=function(){this.cleanList(this.all);h._destroy(this,{name:"DataManager",path:"dataMgr",property:"all _idMode _increment idKey _sorter",map:"consts _idToIdx _idToData _options",array:"datalist failed _history _redoHistory _filters"})};
b.addUniqueIndex=function(a,d,f,b){if(b!==!0&&(c.isNull(a)||c.isEmptyString(d)||c.isNull(f)))return!1;if(f.hasOwnProperty(d)===!1)return this.grid.error("KEY_UNDEFINED",d);if(c.isEmptyString(b=f[d]))return this.grid.error("BAD_NULL",d);if(a.hasOwnProperty(b))return a[b]===f?!1:this.grid.error("DUP_ENTRY",b,d);a[b]=f;return!0};b.addUniqueIndices=function(a,d,f,b){if(b!==!0&&(c.isNull(a)||c.isEmptyString(d)||c.isEmptyArray(f)))return!1;for(var g=f.length,j=[],i,e,b=0;b<g;b++)if(!c.isNull(e=f[b])){if(e.hasOwnProperty(d)===
!1)return this.removeUniqueIndices(a,d,j),this.grid.error("KEY_UNDEFINED",d);if(c.isEmptyString(i=e[d]))return this.removeUniqueIndices(a,d,j),this.grid.error("BAD_NULL",d);if(a.hasOwnProperty(i)){if(a[i]===e)continue;this.removeUniqueIndices(a,d,j);return this.grid.error("DUP_ENTRY",i,d)}j.push(a[i]=e)}return j.length>0};b.updateUniqueIndex=function(a,d,f,b,g,j){if(j!==!0&&(c.isEmptyObj(a)||c.isEmptyString(d)||c.isNullOr(f,g)||c.isEmptyObj(b)))return!1;if(b.hasOwnProperty(d)===!1)return!1;if(g.hasOwnProperty(d)===
!1||f.hasOwnProperty(d)===!1)return this.grid.error("KEY_UNDEFINED",d);if(a.hasOwnProperty(g=g[d])===!1)return this.grid.error("KEY_NOT_FOUND",g,d);if(c.isEmptyString(b=b[d]))return this.grid.error("BAD_NULL",d);if(a.hasOwnProperty(b))return a[b]===f?!1:this.grid.error("DUP_ENTRY",b,d);a[b]=f;delete a[g];return g};b.updateUniqueIndices=function(a,d,f,b,g,j){if(j!==!0){if(c.isEmptyObj(a)||c.isEmptyString(d)||c.isEmptyArray(f)||c.isEmptyArray(b)||c.isEmptyArray(g))return!1;if(f.length!==b.length||f.length!==
g.length)return this.grid.error("LENGTH_NOT_EQUAL")}for(var j=0,i=f.length,e,h,n,m=[],q=[],p=[],r,t;j<i;j++)if(!c.isNull(e=f[j]))if((n=b[j]).hasOwnProperty(d)!==!1){h=g[j];if(h.hasOwnProperty(d)===!1||e.hasOwnProperty(d)===!1)return this.updateUniqueIndices(a,d,m,p,q),this.grid.error("KEY_UNDEFINED",d);if(a.hasOwnProperty(t=h[d])===!1)return this.updateUniqueIndices(a,d,m,p,q),this.grid.error("KEY_NOT_FOUND",t,d);if(c.isEmptyString(r=n[d]))return this.updateUniqueIndices(a,d,m,p,q),this.grid.error("BAD_NULL",
d);if(a.hasOwnProperty(r)){if(a[r]===e)continue;this.updateUniqueIndices(a,d,m,p,q);return this.grid.error("DUP_ENTRY",r,d)}a[r]=e;delete a[t];m.push(e);q.push(n);p.push(h)}return m.length===0?!1:{datalist:m,changes:q,befores:p}};b.removeUniqueIndex=function(a,d,f,b){if(!(b!==!0&&(c.isEmptyObj(a)||c.isEmptyString(d)||c.isEmptyObj(f)))){var g;f.hasOwnProperty(d)&&a.hasOwnProperty(g=f[d])&&delete a[g]}};b.removeUniqueIndices=function(a,d,f,b){if(!(b!==!0&&(c.isEmptyObj(a)||c.isEmptyString(d)||c.isEmptyArray(f))))for(var g=
f.length,j,i,b=0;b<g;b++)i=f[b],i.hasOwnProperty(d)&&a.hasOwnProperty(j=i[d])&&delete a[j]};b.addToUniqueMap=function(a){if(c.isEmptyObj(a)||c.isEmptyObj(this.uniqueMap))return!1;var d=[],f,b=this.uniqueMap,g;for(f in b)if(b.hasOwnProperty(f))if(g=this.addUniqueIndex(b[f],f,a),g===!0)d.push(f);else if(g instanceof Error){f=0;for(var j=d.length;f<j;f++)this.removeUniqueIndex(b[d[f]],d[f],a);return g}return d.length>0};b.addListToUniqueMap=function(a){if(c.isEmptyArray(a)||c.isEmptyObj(this.uniqueMap))return!1;
var d=this.uniqueMap,f=[],b,g;for(b in d)if(d.hasOwnProperty(b))if(g=this.addUniqueIndices(d[b],b,a),g===!0)f.push(b);else if(g instanceof Error){b=0;for(var j=f.length;b<j;b++)this.removeUniqueIndices(d[f[b]],f[b],a);return g}return f.length>0};b.updateUniqueMap=function(a,d,f){if(c.isNullOr(a,d,f)||c.isEmptyObj(this.uniqueMap))return!1;var b,g=this.uniqueMap,j=[],i;for(b in g)if(g.hasOwnProperty(b)){i=this.updateUniqueIndex(g[b],b,a,d,f);if(i instanceof Error){b=0;for(var e=j.length;b<e;b++)this.updateUniqueIndex(g[j[b]],
j[b],a,f,d);return i}i!==!1&&j.push(b)}return j.length>0};b.updateListUniqueMap=function(a,d,f){if(c.isEmptyArray(a)||c.isEmptyArray(d)||c.isEmptyArray(f)||c.isEmptyObj(this.uniqueMap))return!1;if(a.length!==d.length||a.length!==f.length)return this.grid.error("LENGTH_NOT_EQUAL");var b,g=this.uniqueMap,j=[],i;for(b in g)if(g.hasOwnProperty(b)){i=this.updateUniqueIndices(g[b],b,a,d,f);if(i instanceof Error){b=0;for(var e=j.length;b<e;b++)this.updateUniqueIndices(g[j[b]],j[b],a,f,d);return i}i!==!1&&
j.push(b)}return j.length>0};b.removeFromUniqueMap=function(a){if(!c.isEmptyObj(a)&&!c.isEmptyObj(this.uniqueMap)){var d,f=this.uniqueMap;for(d in f)f.hasOwnProperty(d)&&this.removeUniqueIndex(f[d],d,a)}};b.removeListFromUniqueMap=function(a){if(!c.isEmptyArray(a)&&!c.isEmptyObj(this.uniqueMap)){var d,f=this.uniqueMap;for(d in f)f.hasOwnProperty(d)&&this.removeUniqueIndices(f[d],d,a)}};b.addToIdMap=function(a){if(c.isNull(a))return!1;var d=this.idKey;switch(this._idMode){case this._consts._auto:a.hasOwnProperty(d)===
!1&&(a[d]=this._increment++);case this._consts._given:case this._consts._composite:return this.addUniqueIndex(this._idToData,d,a)}return!1};b.addListToIdMap=function(a){if(c.isEmptyArray(a))return!1;var d=this.idKey;switch(this._idMode){case this._consts._auto:for(var f=0,b,g=a.length;f<g;f++)if((b=a[f]).hasOwnProperty(d)===!1)b[d]=this._increment++;case this._consts._given:case this._consts._composite:return this.addUniqueIndices(this._idToData,d,a)}return!1};b.updateIdMap=function(a,d,f){if(c.isNullOr(a,
f)||c.isEmptyObj(d))return!1;var b=this.idKey;switch(this._idMode){case this._consts._auto:if(d.hasOwnProperty(b))return this.grid.error("NOT_MODIFIABLE",b);case this._consts._given:return this.updateUniqueIndex(this._idToData,b,a,d,f);case this._consts._composite:if(d.hasOwnProperty(b))return this.grid.error("NOT_MODIFIABLE",b);for(var f=this._options.idColKeys,g=f.length,j=0;j<g;j++)if(d.hasOwnProperty(f[j])){for(var i="",e=0,h,n,m={},q={},j=q[b]=a[b];e<g;e++)if(h=f[e],d.hasOwnProperty(h)){if(c.isEmptyString(n=
d[h]))return this.grid.error("BAD_NULL",h);i+="&"+n}else i+="&"+a[h];a[b]=m[b]=i;if(j===i)break;d=this.updateUniqueIndex(this._idToData,b,a,m,q);d instanceof Error&&(a[b]=j);return d}}return!1};b.updateListIdMap=function(a,d,f){if(c.isEmptyArray(a)||c.isEmptyArray(d)||c.isEmptyArray(f))return!1;var b=this.idKey,g=a.length,j=0;switch(this._idMode){case this._consts._auto:for(;j<g;j++)if(d[j].hasOwnProperty(b))return this.grid.error("NOT_MODIFIABLE",b);case this._consts._given:return this.updateUniqueIndices(this._idToData,
b,a,d,f);case this._consts._composite:for(var i=this._idToData,e,h,n=this._options.idColKeys,m=n.length,q,f=[],p=[],r=[],t=[],s,u,v,w;j<g;j++){e=a[j];h=d[j];if(h.hasOwnProperty(b)){s=0;for(g=f.length;s<g;s++)p[s][b]=f[s];return this.grid.error("NOT_MODIFIABLE",b)}for(s=0;s<m;s++)if(h.hasOwnProperty(n[s])){q="";for(u=0;u<m;u++)if(v=n[u],h.hasOwnProperty(v)){if(c.isEmptyString(w=h[v])){s=0;for(g=f.length;s<g;s++)p[s][b]=f[s];return this.grid.error("BAD_NULL",v)}q+="&"+w}else q+="&"+e[v];e[b]!==q&&(p.push(e),
r.push({}),t.push({}),f.push(e[b]),e[b]=q)}}if(p.length===0)break;a=this.updateUniqueIndices(i,b,p,r,t);if(a instanceof Error){s=0;for(g=f.length;s<g;s++)p[s][b]=f[s]}return a}return!1};b.removeFromIdMap=function(a){var d=this.idKey,f=this._idToData,b;c.isNotNull(a)&&a.hasOwnProperty(d)&&f.hasOwnProperty(b=a[d])&&delete f[b]};b.removeListFromIdMap=function(a){if(!c.isEmptyArray(a))for(var d=this.idKey,f=a.length,b=this._idToData,g,j,i=0;i<f;i++)j=a[i],j.hasOwnProperty(d)&&b.hasOwnProperty(g=j[d])&&
delete b[g]};b.fillTemp=function(a,d){if(!c.isNull(a)){var f=this.grid.colDefMgr.getAll(),b=f.length,g,j,i=0;if(d!==void 0&&d.isNew)for(;i<b;i++)j=f[i],g=j.key,j.nullOnCreate&&c.isNull(a[g])&&(a[g]="J@H"+this._increment++)}};b.fillTempList=function(a,d){if(!c.isEmptyArray(a)){var f=this.grid.colDefMgr.getAll(),b=f.length,g=a.length,j,i,e=0;if(d!==void 0&&d.isNew)for(;e<b;e++)if(i=f[e],j=i.key,i.nullOnCreate)for(i=0;g;i++)a[i][j]="J@H"+this._increment++}};b.query=function(a){if(typeof a==="string"&&
(a=$.trim(a),a.length!==0)){var d,f,b,g,c;d=a.toLowerCase();f=a.indexOf(" ");if(f!==-1&&(b=d.substring(0,f),d=d.indexOf(" where "),g=d>-1,f=$.trim(g?a.substring(f+1,d):a.substring(f+1)),f.length!==0))switch(g&&(c=$.trim(a.substring(d+7))),b){case "select":return this.executeSelect(f,c);case "insert":return this.executeInsert(f,c);case "update":return this.executeUpdate(f,c);case "delete":return this.executeDelete(f,c)}}};b.parseWhere=function(a){typeof a==="string"&&$.trim(a)};b.executeSelect=function(a){var a=
c.split(a,/[\s,]+/),d=a.length,f=0,b={},g=this.all,j=[];if(d===0)return j;for(;f<d;f++){if(a[f]==="*")break;b[a[f]]=!0}f=0;for(d=g.length;f<d;f++)j.push(c.clone(g[f],b));return j};b.parse=function(a,d){if(c.isNull(a))return!1;for(var f=this.grid.colDefMgr.getAll(),b=f.length,g,j,i=d!==void 0&&d.isNew,e=0;e<b;e++)if(j=f[e],!i||!j.nullOnCreate)if(c.isFunction(g=j.parser))if(j=j.key,a.hasOwnProperty(j))try{a[j]=g(a[j],a)}catch(h){return c.isNull(a)?this.grid.error("PARSE_ERROR",a,j):this.grid.error("PARSE_ERROR",
a[j],j)}return!0};b.parseList=function(a,d){if(c.isNull(a))return!1;if(a.length===0)return!0;for(var f=this.grid.colDefMgr.getAll(),b=f.length,g=a.length,j,i,e=0,h,n=d!==void 0&&d.isNew,m;e<b;e++)if(i=f[e],!n||!i.nullOnCreate)if(c.isFunction(j=i.parser)){i=i.key;try{for(h=0;h<g;h++)m=a[h],m.hasOwnProperty(i)&&(m[i]=j(m[i],m))}catch(q){return c.isNull(m)?this.grid.error("PARSE_ERROR",m,i):this.grid.error("PARSE_ERROR",m[i],i)}}return!0};b.validate=function(a,d){if(c.isNull(a))return!1;for(var f=this.grid.colDefMgr.getAll(),
b=f.length,g,j,i,e,h,n,m,q=d!==void 0&&d.isNew,p=0;p<b;p++)if(g=f[p],j=g.key,h=void 0,e=i=!1,!q||!g.nullOnCreate){if(g.notNull===!0){if(a.hasOwnProperty(j)===!1||c.isEmptyString(h=a[j]))return this.grid.error("BAD_NULL",j);n=h.toString()}else a.hasOwnProperty(j)===!1||c.isNull(h=a[j])?e=i=!0:h===""&&(e=!0),n=i===!1?h.toString():"";if(i===!1){if(c.isNotNull(m=g.max)&&e===!1&&h>m)return this.grid.error("BIGGER_THAN",h,j,m);if(c.isNotNull(m=g.min)&&e===!1&&h<m)return this.grid.error("SMALLER_THAN",h,
j,m);if(c.isNotNull(m=g.length)){if(e===!0||n.length!==m)return this.grid.error("WRONG_LENGTH",n,m,j)}else{if(c.isNotNull(m=g.maxlength)&&e===!1&&n.length>m)return this.grid.error("DATA_TOO_LONG",n,j,m);if(c.isNotNull(m=g.minlength))if(e===!0||n.length<m)return this.grid.error("DATA_TOO_SHORT",n,j,m)}}if(c.isFunction(g=g.validator))try{if(g(h,a,n,i,e)!==!0)return this.grid.error("WRONG_VALUE",n,j)}catch(r){return this.grid.error("WRONG_VALUE",n,j)}}return!0};b.validateList=function(a,d){if(c.isNull(a))return!1;
if(a.length===0)return!0;for(var f=this.grid.colDefMgr.getAll(),b=f.length,g=a.length,j,i,e=0,h,n,m,q,p,r=d!==void 0&&d.isNew,t=[],s=[];e<b;e++)if(j=f[e],i=j.key,n={},m={},t.length=0,s.length=0,!r||!j.nullOnCreate){if(j.notNull===!0)for(h=0;h<g;h++){if(a[h].hasOwnProperty(i)===!1||c.isEmptyString(q=a[h][i]))return this.grid.error("BAD_NULL",i);t.push(q);s.push(q.toString())}else for(h=0;h<g;h++)q=void 0,a[h].hasOwnProperty(i)===!1||c.isNull(q=a[h][i])?(n[h]=!0,m[h]=!0):q===""&&(m[h]=!0),t.push(q),
n.hasOwnProperty(h)?s.push(""):s.push(q.toString());if(c.isNotNull(p=j.max))for(h=0;h<g;h++)if(m.hasOwnProperty(h)===!1&&t[h]>p)return this.grid.error("BIGGER_THAN",t[h],i,p);if(c.isNotNull(p=j.min))for(h=0;h<g;h++)if(m.hasOwnProperty(h)===!1&&t[h]<p)return this.grid.error("SMALLER_THAN",t[h],i,p);if(c.isNotNull(p=j.length))for(h=0;h<g;h++){if(n.hasOwnProperty(h)===!1&&(m.hasOwnProperty(h)||s[h].length!==p))return this.grid.error("WRONG_LENGTH",s[h],p,i)}else{if(c.isNotNull(p=j.maxlength))for(h=0;h<
g;h++)if(m.hasOwnProperty(h)===!1&&s[h].length>p)return this.grid.error("DATA_TOO_LONG",s[h],i,p);if(c.isNotNull(p=j.minlength))for(h=0;h<g;h++)if(n.hasOwnProperty(h)===!1&&(m.hasOwnProperty(h)||s[h].length<p))return this.grid.error("DATA_TOO_SHORT",s[h],i,p)}if(c.isFunction(j=j.validator))try{for(h=0;h<g;h++)if(j(t[h],a[h],s[h],n.hasOwnProperty(h),m.hasOwnProperty(h))!==!0)return this.grid.error("WRONG_VALUE",s[h],i)}catch(u){return this.grid.error("WRONG_VALUE",s[h],i)}}return!0};b.makeCompositeKey=
function(a,d){if(!(this._idMode!==this._consts._composite||c.isNull(a)))if(d===!0||a.hasOwnProperty(this.idKey)===!1){for(var f=this._options.idColKeys,b=f.length,g=0,j="";g<b;g++)j+="&"+a[f[g]];a[this.idKey]=j}};b.makeCompositeKeyList=function(a,d){if(!(this._idMode!==this._consts._composite||a.length===0)){var f=this.idKey,b=a.length,g=this._options.idColKeys,c=g.length,i,e=0,h,n;if(d===!0)for(;e<b;e++){i=a[e];n="";for(h=0;h<c;h++)n+="&"+i[g[h]];i[f]=n}else for(;e<b;e++)if((i=a[e]).hasOwnProperty(f)===
!1){n="";for(h=0;h<c;h++)n+="&"+i[g[h]];i[f]=n}}};b.map=function(a){if(!c.isNull(a)){var d=this._idToData,f=this.idKey,b;this.makeCompositeKey(a);if(a.hasOwnProperty(f)&&d.hasOwnProperty(b=a[f]))return d[b]}};b.mapList=function(a){if(c.isEmptyArray(a))return{mapped:[],unmapped:[]};this.makeCompositeKeyList(a);for(var d=[],f=[],b=this.idKey,g=this._idToData,e=a.length,i=0,h,l;i<e;i++)(h=a[i]).hasOwnProperty(b)&&g.hasOwnProperty(l=h[b])?d.push(g[l]):f.push(h);return{mapped:d,unmapped:f}};b.getById=
function(a){if(c.isNotNull(a)&&this._idToData.hasOwnProperty(a))return this._idToData[a]};b.getByIdx=function(a){if(c.isNotNull(a)&&this.datalist.hasOwnProperty(a))return this.datalist[a]};b.getByNode=function(a){return this.getById(this.getIdByNode(a))};b.getIdx=function(a){return this.getIdxById(this.getId(a))};b.getIdxById=function(a){return c.isNotNull(a)&&this._idToIdx.hasOwnProperty(a)?this._idToIdx[a]:-1};b.getIdxByNode=function(a){return this.getIdxById(this.getIdByNode(a))};b.getId=function(a){if(c.isNotNull(a)&&
a.hasOwnProperty(this.idKey))return a[this.idKey]};b.getIdByIdx=function(a){return this.getId(this.getByIdx(a))};b.getIdByNode=function(a){if(c.isNotNull(a))return a.getAttribute("i")};b._reidxFrom=function(a){c.isNull(a)&&(a=0);for(var d=this.datalist,f=d.length,b=this.idKey,g=this._idToIdx;a<f;a++)g[d[a][b]]=a};b._reidx=function(){this._idToIdx={};this._reidxFrom()};b.has=function(a){return this.hasById(this.getId(a))};b.hasById=function(a){return c.isNotNull(a)?this._idToIdx.hasOwnProperty(a):
!1};b.contains=function(a){return this.containsById(this.getId(a))};b.containsById=function(a){return c.isNotNull(a)?this._idToData.hasOwnProperty(a):!1};b.set=function(a){if(this.all===a||c.isEmptyArray(a)&&this.all===0)return!1;this.grid.event.trigger("onBeforeDataChange");this.grid.event.trigger("onBeforeSetDatalist",[this.all,a]);this.cleanList(this.all);var d,f=this.uniqueMap;for(d in f)f.hasOwnProperty(d)&&(f[d]={});this._idToData={};this.all=[];this._history.length=0;this._redoHistory.length=
0;c.isNull(a)&&(a=[]);if((d=this.parseList(a))instanceof Error)return d;if((d=this.validateList(a))instanceof Error)return d;if((d=this.addListToUniqueMap(a))instanceof Error)return d;this.makeCompositeKeyList(a,!0);if((d=this.addListToIdMap(a))instanceof Error)return d;this.all=a;this.grid.event.trigger("onAfterSetDatalist",[a]);this.grid.event.trigger("onDataChange");this.refresh();return!0};b.add=function(a,d){if(c.isNull(a)||c.isNotNull(this.map(a)))return!1;this.grid.event.trigger("onBeforeDataChange");
this.fillTemp(a,d);var f;if((f=this.parse(a,d))instanceof Error)return f;if((f=this.validate(a,d))instanceof Error)return f;if((f=this.addToUniqueMap(a))instanceof Error)return f;if((f=this.addToIdMap(a))instanceof Error)return f;this.all.push(a);if(c.isNull(d)||d.undo!==!0)this._history.push({_action:this._consts._add,_target:a}),this._redoHistory.length=0;this.grid.event.trigger("onAddDatarow",[a,d]);this.grid.event.trigger("onDataChange");(d===void 0||d.noRefresh!==!0)&&this.refresh(d);return!0};
b.addList=function(a,d){if(c.isEmptyArray(a))return!1;var f=this.mapList(a).unmapped;if(f.length===0)return!1;this.grid.event.trigger("onBeforeDataChange");this.fillTempList(a,d);var b;if((b=this.parseList(f,d))instanceof Error)return b;if((b=this.validateList(f,d))instanceof Error)return b;if((b=this.addListToUniqueMap(f))instanceof Error)return b;if((b=this.addListToIdMap(f))instanceof Error)return b;this.all.pushList(f);if(c.isNull(d)||d.undo!==!0)this._history.push({_action:this._consts._addList,
_target:f}),this._redoHistory.length=0;this.grid.event.trigger("onAddDatalist",[f,d]);this.grid.event.trigger("onDataChange");(d===void 0||d.noRefresh!==!0)&&this.refresh(d);return!0};b.updateByKey=function(a,d,f,b){var g={};g[d]=f;return this.update(a,g,b)};b.update=function(a,d,f){if(c.isNullOr(a,d))return!1;this.grid.event.trigger("onBeforeDataChange");this.grid.event.trigger("onBeforeUpdateDatarow",[a,d]);var b={},g;for(g in d)d.hasOwnProperty(g)&&(a[g]===d[g]?delete d[g]:(b[g]=a[g],a[g]=d[g]));
if(c.isEmptyObj(b))return!1;if((g=this.parse(a,f))instanceof Error)return this._rollback(a,b),g;if((g=this.validate(a,f))instanceof Error)return this._rollback(a,b),g;if((g=this.updateUniqueMap(a,d,b))instanceof Error)return this._rollback(a,b),g;if((g=this.updateIdMap(a,d,b))instanceof Error)return this._rollback(a,b),g;g!==!1&&this.grid.event.trigger("onIdChange",[a,g,a[this.idKey]]);if(c.isNull(f)||f.undo!==!0)this._history.push({_action:this._consts._update,_target:a,_before:b,_change:d}),this._redoHistory.length=
0;this.grid.event.trigger("onUpdateDatarow",[a,d,b,f]);this.grid.event.trigger("onDataChange");(f===void 0||f.noRefresh!==!0)&&this.refresh(f);return!0};b.updateList=function(a,d){if(c.isEmptyArray(a))return!1;this.grid.event.trigger("onBeforeDataChange");this.grid.event.trigger("onBeforeUpdateDatalist",[a]);for(var f=[],b=[],g=[],e,i,h,l=a.length,n=0,m;n<l;n++){i={};e=a[n].datarow;h=a[n].change;for(m in h)h.hasOwnProperty(m)&&(e[m]===h[m]?delete h[m]:(i[m]=e[m],e[m]=h[m]));c.isNotEmptyObj(i)&&(f.push(e),
b.push(i),g.push(h))}if(f.length===0)return!1;if((e=this.parseList(f,d))instanceof Error)return this._rollbackList(f,b),e;if((e=this.validateList(f,d))instanceof Error)return this._rollbackList(f,b),e;if((e=this.updateListUniqueMap(f,g,b))instanceof Error)return this._rollbackList(f,b),e;if((e=this.updateListIdMap(f,g,b))instanceof Error)return this._rollbackList(f,b),e;e!==!1&&this.grid.event.trigger("onIdListChange",[e.list,e.befores,this.idKey]);if(c.isNull(d)||d.undo!==!0)this._history.push({_action:this._consts._updateList,
_target:f,_before:b,_change:g}),this._redoHistory.length=0;this.grid.event.trigger("onUpdateDatalist",[f,g,b,d]);this.grid.event.trigger("onDataChange");(d===void 0||d.noRefresh!==!0)&&this.refresh(d);return!0};b._rollback=function(a,d){for(var f in d)d.hasOwnProperty(f)&&(a[f]=d[f])};b._rollbackList=function(a,d){for(var f=a.length,b=0,g,c,e;b<f;b++)for(e in g=a[b],c=d[b],c)c.hasOwnProperty(e)&&(g[e]=c[e])};b.remove=function(a,d){if(c.isNull(a))return!1;var f=this.map(a);if(c.isNull(f))return!1;
this.grid.event.trigger("onBeforeDataChange");this.removeFromIdMap(f);this.removeFromUniqueMap(f);this.all.remove(f);this.removeId(f);if(c.isNull(d)||d.undo!==!0)this._history.push({_action:this._consts._remove,_target:f}),this._redoHistory.length=0;this.grid.event.trigger("onRemoveDatarow",[f,d]);this.grid.event.trigger("onDataChange");(d===void 0||d.noRefresh!==!0)&&this.refresh(d);return!0};b.removeList=function(a,d){if(c.isEmptyArray(a))return!1;var f=this.mapList(a).mapped;if(f.length===0)return!1;
this.grid.event.trigger("onBeforeDataChange");this.removeListFromIdMap(f);this.removeListFromUniqueMap(f);this.all.removeList(f);this.cleanList(f);if(c.isNull(d)||d.undo!==!0)this._history.push({_action:this._consts._removeList,_target:f}),this._redoHistory.length=0;this.grid.event.trigger("onRemoveDatalist",[f,d]);this.grid.event.trigger("onDataChange");(d===void 0||d.noRefresh!==!0)&&this.refresh(d);return!0};b._keydownCanvas=function(a){if(a.ctrlKey)switch(a.which){case "Z".charCodeAt(0):this.undo();
break;case "Y".charCodeAt(0):this.redo()}};b.undo=function(){if(this._history.length===0)return!1;var a=this._history.pop();this._redoHistory.push(a);var d=a._target,f=a._before;switch(a._action){case this._consts._add:return this.remove(d,{undo:!0});case this._consts._addList:return this.removeList(d,{undo:!0});case this._consts._update:return this.update(d,f,{undo:!0});case this._consts._updateList:for(var a=[],b=0,g=d.length;b<g;b++)a.push({datarow:d[b],change:f[b]});return this.updateList(a,{undo:!0});
case this._consts._remove:return this.add(d,{undo:!0});case this._consts._removeList:return this.addList(d,{undo:!0})}};b.redo=function(){if(this._redoHistory.length===0)return!1;var a=this._redoHistory.pop();this._history.push(a);var d=a._target,f=a._change;switch(a._action){case this._consts._add:return this.add(d,{undo:!0});case this._consts._addList:return this.addList(d,{undo:!0});case this._consts._update:return this.update(d,f,{undo:!0});case this._consts._updateList:for(var a=[],b=0,g=d.length;b<
g;b++)a.push({datarow:d[b],change:f[b]});return this.updateList(a,{undo:!0});case this._consts._remove:return this.remove(d,{undo:!0});case this._consts._removeList:return this.removeList(d,{undo:!0})}};b.equals=function(a,d){if(c.isNullOr(a,d))return!1;if(a===d)return!0;this._idMode===this._consts._composite&&(this.makeCompositeKey(a),this.makeCompositeKey(d));var f=this.idKey;return c.isNull(a[f])||c.isNull(d[f])?!1:a[f]===d[f]};b.getReal=function(){var a=this._consts._notReal;return this.all.filter(function(d){return d.hasOwnProperty(a)===
!1})};b.filterReal=function(a){var d=this._consts._notReal;return a.filter(function(a){return a.hasOwnProperty(d)===!1})};b.isReal=function(a){return c.isNotNull(a)&&a.hasOwnProperty(this._consts._notReal)===!1};b.dropNonReal=function(a){if(!c.isEmptyArray(a))for(var d=this._consts._notReal,f=a.length-1;f>=0;f--)a[f].hasOwnProperty(d)&&(delete a[f][d],a.removeAt(f))};b.removeIdCol=function(a){if(!(this._idMode===this._consts._given||c.isEmptyArray(a)))for(var d=this.idKey,f=0,b=a.length;f<b;f++)a[f].hasOwnProperty(d)&&
delete a[f][d]};b.removeId=function(a){c.isNotNull(a)&&this._idMode!==this._consts._given&&a.hasOwnProperty(this.idKey)&&delete a[this.idKey]};b.cleanList=function(a){c.isEmptyArray(a)||(this.removeIdCol(a),this.dropNonReal(a))};b.purify=function(a){if(a!==void 0)a=this.all;if(c.isEmptyArray(a))return[];for(var d=[],f=a.length,b=0,g,e,i=this._consts._notReal;b<f;b++)if((e=a[b]).hasOwnProperty(i)===!1)for(g in d.push({}),e)e.hasOwnProperty(g)&&e.hasOwnProperty(g)&&g.substring(0,3);return d};b.setSorter=
function(a){this.grid.event.trigger("onChangeSorter",[this._sorter,a]);this._sorter=a};b._sort=function(a){c.isNull(a)?a=this._sorter:this.setSorter(a);if(!c.isNull(a)){var d=this.all;this.grid.event.trigger("onBeforeSort",[d]);c.isNotNull(a.comparator)?(d.sort(a.comparator),a.desc&&d.reverse()):c.isNotNull(a.lexi)&&this.constructor._lexi(d,a.lexi,a.desc);this.grid.event.trigger("onAfterSort",[d])}};b.addFilter=function(a){this._filters.push(a);this.refresh()};b.removeFilter=function(a){var d=this._filters.length;
this._filters.remove(a);d!==this._filters.length&&this.refresh()};b._filter=function(){var a=this.datalist,d=this.failed,f=0,b=this._filters.length,g,c;this.grid.event.trigger("onBeforeFilter",[a,d]);a.length=0;a.pushList(this.all);for(d.length=0;f<b;f++){g=this._filters[f];for(c=a.length-1;c>=0;c--)g(a[c])||(d.push(a[c]),a.removeAt(c))}this.grid.event.trigger("onFilter",[a,d]);this.grid.event.trigger("onAfterFilter",[a,d])};b._finish=function(a){this._reidx();this.grid.event.trigger("onAfterRefresh",
[a])};b.refresh=function(a){this.grid.event.trigger("onBeforeRefresh");a===void 0?this._sort():a.noSort!==!0&&this._sort(a.sorter);(a===void 0||a.noFilter!==!0)&&this._filter();this._finish(a)};b.exportRowToArray=function(a,d){if(!(a in this.datalist))return null;d||(d=this.grid.colDefMgr.getKeys());for(var f=this.datalist[a],b=[],g,c=0,e=d.length;c<e;c++)g=d[c],b.push(g in f?f[g]:null);return b};b.exportToArray=function(a,d,f){a||(a=this.grid.colDefMgr.getKeys());for(var d=this.datalist.slice(d,
f),b=[],g,c,e=0,h=d.length,l,n=a.length;e<h;e++){g=d[e];l=0;for(f=[];l<n;l++)c=a[l],f.push(c in g?g[c]:null);b.push(f)}return b};e._lexi=function(a,d,f){var b=Object.prototype.toString;Object.prototype.toString=c.isFunction(d)?d:function(){return this[d]};a.sort();Object.prototype.toString=b;f&&a.reverse()}})();jx.grid.EventManager={};
(function(){function e(a){this.mid=a.mid;this.grid=a.grid;a.grid.event=this;this._map={}}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.EventManager",e);h._add("EventManager",e);e.getInstance=function(a){return new e(a)};var b=e.prototype;b.destroy=function(){var a,d=this._map;for(a in d)d.hasOwnProperty(a)&&h._deleteArray(d,a);h._destroy(this,{name:"EventManager",path:"event",map:"map"})};b.register=function(a,
d,f){if(c.isString(a))this._parseAndAdd(a,d,f);else if(c.isNotNull(a.e))this._parseAndAdd(a.e,a.f,a.t);else for(var b,d=a.length,g;b<d;b++)c.isNotNull(g=a[b])&&this._parseAndAdd(g.e,g.f,g.t)};b.bind=function(a,d,f){if(c.isString(a))this._parseAndAdd(a,d,f);else for(var b in a)a.hasOwnProperty(b)&&this._parseAndAdd(b,a[b],d)};b._parseAndAdd=function(a,d,f){c.isNull(f)&&(f=window);var a=c.split(a),b=a.length,g=0;if(c.isFunction(d))for(;g<b;g++)this._addHandler(a[g],d,f);else if(c.isString(d))for(var d=
c.split(d),e=d.length,i,h;g<b;g++){i=a[g];for(h=0;h<e;h++)this._addHandler(i,f[d[h]],f)}else for(e=d.length;g<b;g++){i=a[g];for(h=0;h<e;h++)this._addHandler(i,d[h],f)}};b._addHandler=function(a,d,f){this._map.hasOwnProperty(a)||(this._map[a]=[]);this._map[a].push({fn:d,target:f})};b.unregister=function(a,d){var f=this._map;if(f.hasOwnProperty(a)){var b=f[a];if(c.isNull(d))b.length=0,delete f[a];else for(var g=0,e=b.length;g<e;g++)if(b[g].fn===d){b.removeAt(g);b.length===0&&delete f[a];break}}};b.trigger=
function(a,d,f){for(var b,g,e=this._map,i=[],a=c.split(a),h=a.length,l=c.isEmptyArray(d),n=c.isFunction(f),m,q=0;q<h;q++)if(b=a[q],e.hasOwnProperty(b)&&(b=e[b],g=b.length,g!==0))if(m=0,n){var p;if(l)for(;m<g;m++)p=b[m].fn.call(b[m].target),f(p)&&i.push(p);else for(;m<g;m++)p=b[m].fn.apply(b[m].target,d),f(p)&&i.push(p)}else if(l)for(;m<g;m++)i.push(b[m].fn.call(b[m].target));else for(;m<g;m++)i.push(b[m].fn.apply(b[m].target,d));return i};b.triggerInvalid=function(a,d){return this.trigger(a,d,function(d){return d===
!1}).length!==0};b.sendToBack=function(a,d){for(var f=this._map[a],b=f.length,g,c=-1,e=0;e<b;e++)if(f[e].fn===d){c=e;g=f[e];break}c>-1&&(f.removeAt(e),f.push(g))};b.sendToFront=function(a,d){for(var f=this._map[a],b=f.length,g,c=-1,e=0;e<b;e++)if(f[e].fn===d){c=e;g=f[e];break}c>-1&&(f.removeAt(e),f.unshift(g))}})();jx.grid.Grid={};
(function(){function e(d){this.mid=d.mid;b.call(this,d)}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util"),b=goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.Grid",e);h._add("Grid",e);e.V_KEYDOWN=3;e.V_KEYPRESS=3;e.V_KEYUP=3;e.V_MOUSEMOVE=5;e.V_MOUSEOVER=4;e.V_MOUSEOUT=4;e.V_MOUSEIN=4;e.V_MOUSEDOWN=3;e.V_MOUSEUP=3;e.V_MOUSEENTER=3;e.V_MOUSELEAVE=3;e.V_CLICK=2;e.V_DBLCLICK=2;e.V_RESIZE=2;e.V_INIT=1;goog.inherits(e,b);e.getInstance=function(d){return new e(d)};var a=
e.prototype;a._defaultOptions=function(){return{classGrid:"jgrid",border:"1px solid #868686",width:void 0,font:"15px Arial,Helvetica,sans-serif",style:"",borderSide:!0,imageUrl:"../images/",links:{data:"dataMgr.all",datalen:"dataMgr.all.length",shown:"dataMgr.datalist",set:"dataMgr.set",add:"dataMgr.add",addList:"dataMgr.addList",update:"dataMgr.update",updateByKey:"dataMgr.updateByKey",updateList:"dataMgr.updateList",remove:"dataMgr.remove",removeList:"dataMgr.removeList",select:"dataMgr.executeSelect",
undo:"dataMgr.undo",redo:"dataMgr.redo",addFilter:"dataMgr.addFilter",removeFilter:"dataMgr.removeFilter",check:"collapser.checkMgr.checkList checkMgr.checkList",checked:"collapser.checkMgr.getCheckList checkMgr.getCheckList",removeChecked:"collapser.checkMgr.removeChecked checkMgr.removeChecked",register:"event.register",trigger:"event.trigger",bind:"event.bind",unregister:"event.unregister",unbind:"event.unregister",collen:"colDefMgr.length"},autoWidth:!1,showMessage:!1}};a._init=function(d){var a=
this._ctnr=d.container,b=this._options,g;this.name=b.name;this._drag=!1;this._lastH=this._lastW=null;this._vars={scrollbarDim:void 0};a=this._ctnr=$("<div id='"+this.mid+"' class='"+b.classGrid+"' "+(c.isNull(b.width)?"":"style='width:"+b.width+"px' ")+"tabIndex='0'>").appendTo(Util$.safe$(a));this._vars.scrollbarDim=Util$.calScrollbarDims(a);g=this.event=h.create("EventManager",{grid:this,options:b.EventManager});this.colDefMgr=h.create("ColDefManager",{grid:this,colDefs:d.colDefs,options:b.ColDefManager});
this.dataMgr=h.create("DataManager",{grid:this,datalist:d.datalist,options:b.DataManager});b.CheckManager&&(this.checkMgr=h.create("CheckManager",{grid:this,options:b.CheckManager}));if(b.Collapser)this.collapser=h.create("Collapser",{grid:this,options:b.Collapser}),this.collapser.__init();b.ColGroup&&(this.colGroup=h.create("ColGroup",{grid:this,options:b.ColGroup}));b.SelectionManager&&(this.selMgr=h.create("SelectionManager",{grid:this,options:b.SelectionManager}));b.EditManager&&(this.editMgr=
h.create("EditManager",{grid:this,options:b.EditManager}));b.ColHeader&&(this.header=h.create("ColHeader",{grid:this,container:a,options:b.ColHeader}));b.SearchManager&&(this.search=h.create("SearchManager",{grid:this,container:a,options:b.SearchManager}));b.MenuBar&&(this.menubar=h.create("MenuBar",{grid:this,container:a,options:b.MenuBar}));this.view=h.create("ViewportManager",{grid:this,container:a,options:b.ViewportManager});b.TooltipManager&&(this.tooltip=h.create("TooltipManager",{grid:this,
container:a,options:b.TooltipManager}));b.DataCreator&&(this.creator=h.create("DataCreator",{grid:this,container:a,options:b.DataCreator}));b.Footer&&(this.footer=h.create("Footer",{grid:this,container:a,options:b.Footer}));b.autoWidth&&g.bind("onResizeCanvasWidth",this.width,this);this._createCss();g.trigger("onBeforeRenderModules onRenderModules onAfterRenderModules");this.msg=$("<div id='"+this.mid+"msg' class='msg' onmousedown='$(this).hide(1000)' style='position:relative;padding-left:4px;overflow:hidden;z-index:100;font-size:12px;height:21px;line-height:21px'></div>").appendTo(a).hide();
a=a[0];this._lastW=a.clientWidth;this._lastH=a.clientHeight;this._registerLinks(b.links)};a._bindEvents=function(){h._bindGlobalEvents();var d=this;this._ctnr.bind({keydown:function(a){d._keydown(a)},keyup:function(a){d._keyup(a)},keypress:function(a){d._keypress(a)},mousein:function(a){d._mousein(a)},mouseout:function(a){d._mouseout(a)},mouseenter:function(a){d._mouseenter(a)},mouseleave:function(a){d._mouseleave(a)},mouseover:function(a){d._mouseover(a)},mousedown:function(a){d._mousedown(a)},click:function(a){d._click(a)},
dblclick:function(a){d._dblclick(a)}});this._charts=[]};a.destroy=function(){try{this.dispatchEvent({type:"beforeDispose"}),c.isEmptyObj(h.m.Grid)&&h._unbindGlobalEvents(),this.event.trigger("onDestroy"),h._destroy(this,{name:"Grid",module:"event",$:"ctnr",map:"vars _options",style:"style _dynStyle"}),this.dispose()}catch(d){return d}};a._registerLinks=function(d){var a,b,g,e,i,h,l,n,m,q;a:for(a in d)if(d.hasOwnProperty(a)&&!(a in this)){b=c.split(d[a]);g=b.length;e=0;b:for(;e<g;e++)if(i=b[e].split("."),
h=i.length,!(h<1)){l=this;n=this;m="";for(q=0;q<h;q++)if(i[q]in l)n=l,l=l[m=i[q]];else continue b;this._registerLink(a,l,n,m);continue a}}};a._registerLink=function(d,a,b,g){if(this.hasOwnProperty(d))return!1;this[d]=c.isFunction(a)?function(){return a.apply(b,arguments)}:function(){return b[g]};return!0};a._createCss=function(){var d={type:"beforeCreateCss",css:[]},a=this._options,b=this.event;this.dispatchEvent(d);d=c.sprint("%selector%{overflow:hidden;font:%font%;%border%%style%}%submodule%",{selector:"#"+
this.mid,font:a.font,border:a.borderSide?"border:"+a.border+";":"border-top:"+a.border+";border-bottom:"+a.border+";",style:a.style,submodule:d.css.join("")+b.trigger("onCreateCss").join("")});this._style=c.createStyle(d);d={type:"beforeCreateDynamicCss",css:[]};this.dispatchEvent(d);this._dynStyle=c.createStyle(d.css.join("")+";"+b.trigger("onCreateDynamicCss").join(""))};a._recreateDynamicCss=function(){c.setStyle(this._dynStyle,this.event.trigger("onCreateDynamicCss").join(""))};a._keydown=function(d){var a=
this.event;a.triggerInvalid("onBeforeKeydown",[d])||a.trigger("keydown_"+d.which+" keydown",[d])};a._keyup=function(d){var a=this.event;a.triggerInvalid("onBeforeKeyup",[d])||a.trigger("keyup_"+d.which+" keyup",[d])};a._keypress=function(d){var a=this.event;a.triggerInvalid("onBeforeKeypress",[d])||a.trigger("keypress_"+d.which+" keypress",[d])};a._mousein=function(d){var a=this.event;a.triggerInvalid("onBeforeMousein",[d])||(this._drag?a.trigger("dragin mousein",[d]):a.trigger("mousein",[d]))};a._mouseout=
function(d){var a=this.event;a.triggerInvalid("onBeforeMouseout",[d])||(this._drag?a.trigger("dragout mouseout",[d]):a.trigger("mouseout",[d]))};a._mouseenter=function(d){var a=this.event;a.triggerInvalid("onBeforeMouseenter",[d])||(this._drag?a.trigger("dragenter mouseenter",[d]):a.trigger("mouseenter",[d]))};a._mouseleave=function(d){var a=this.event;a.triggerInvalid("onBeforeMouseleave",[d])||(this._drag?a.trigger("dragleave mouseleave",[d]):a.trigger("mouseleave",[d]))};a._mousemove=function(d){var a=
this.event;a.triggerInvalid("onBeforeMousemove",[d])||(this._drag?a.trigger("dragmove mousemove",[d]):a.trigger("mousemove",[d]))};a._mouseover=function(d){var a=this.event;a.triggerInvalid("onBeforeMouseover",[d])||(this._drag?a.trigger("dragover mouseover",[d]):a.trigger("mouseover",[d]))};a._mousedown=function(d){var a=this.event;this._drag=!0;a.triggerInvalid("onBeforeMousedown",[d])||a.trigger("mousedown",[d])};a._mouseup=function(d){var a=this.event;this._drag=!1;a.trigger("unsetDrag");this.containsEvent(d)&&
(a.triggerInvalid("onBeforeMouseup",[d])||a.trigger("mouseup",[d]))};a._click=function(d){var a=this.event;a.triggerInvalid("onBeforeClick",[d])||a.trigger("click",[d])};a._dblclick=function(d){var a=this.event;a.triggerInvalid("onBeforeDblclick",[d])||a.trigger("dblclick",[d])};a._resize=function(d){var a=this.event,b=!1,g=this._ctnr[0],c=this._lastW,e=this._lastH,h=g.clientWidth,g=g.clientHeight;if(h>=1&&c!==h)a.trigger("resizeWidth",[h,c]),this._lastW=h,b=!0;if(g>=1&&e!==g)a.trigger("resizeHeight",
[g,e]),this._lastH=g,b=!0;b&&a.trigger("resize",[d])};a.width=function(d){var a=this._ctnr[0],b=a.clientWidth,g=this.event;if(!d)return b;typeof d!="number"&&(d=parseInt(d));if(d<1||d===b||!isFinite(d))return b;a.style.width=d+"px";g.trigger("resizeWidth",[d,this._lastW]);this._lastW=d;g.trigger("resize");return d};a.height=function(d){var a=this._ctnr[0],b=a.clientHeight,g=this.event;if(!d)return b;typeof d!="number"&&(d=parseInt(d));if(d<1||d===b||!isFinite(d))return b;a.style.height=d+"px";g.trigger("resizeHeight",
[d,this._lastH]);this._lastH=d;g.trigger("resize");return d};a.getCellByIdAndKey=function(d,a){return h.create("Cell",{grid:this,datarow:this.dataMgr.getById(d),colDef:this.colDefMgr.getByKey(a)})};a.getCellByIdx=function(d,a){return h.create("Cell",{grid:this,row:d,col:a})};a.error=function(d){for(var a=h.error[d],b=1,g=arguments.length;b<g;b++)a=a.replace(RegExp("%"+(b-1),"g"),arguments[b]);a=Error(a);a.code=d;this.printError(a.message);this.event.trigger("onError",[a]);return a};a.printError=function(d){if(this._options.showMessage){var a=
this.msg,b=a[0],g=b.style;b.innerHTML=d;g.width=this._ctnr[0].clientWidth+"px";g.background="#ffebe8";g.color="#333";a.show();clearTimeout(this.timeout);this.timeout=setTimeout(function(){a.hide(1E3)},5E3)}};a.printMessage=function(d){if(this._options.showMessage){var a=this.msg,b=a[0],g=b.style;b.innerHTML=d;g.width=this._ctnr[0].clientWidth+"px";g.background="#dfdfdf";g.color="#6f6f6f";a.show();clearTimeout(this.timeout);this.timeout=setTimeout(function(){a.hide(1E3)},5E3)}};a.containsEvent=function(d){return c.contains(this._ctnr[0],
d.target)};a.getChart=function(d){return this._charts[d]};a.log=function(){};a.chart=function(d,a,b,g){var c,a=a.toLowerCase();switch(a){case "area":a="corechart";c="AreaChart";break;case "bar":a="corechart";c="BarChart";break;case "candle":a="corechart";c="CandlestickChart";break;case "column":a="corechart";c="ColumnChart";break;case "combo":a="corechart";c="ComboChart";break;case "gauge":a="gauge";c="Gauge";break;case "geo":a="geochart";c="GeoChart";break;case "line":a="corechart";c="LineChart";
break;case "pie":a="corechart";c="PieChart";break;case "scatter":a="corechart";c="ScatterChart";break;case "table":a="table";c="Table";break;case "treemap":a="treemap";c="TreeMap";break;default:throw Error("unknown chart type: "+a);}google.load("visualization","1",{packages:[a]});var e=this,h=this.colDefMgr,l=this.dataMgr,n=b.map(function(d){if(d=h.getByKey(d))return d;throw Error("column key not found");}),m=l.exportToArray(b);google.setOnLoadCallback(function(){for(var a=new google.visualization.DataTable,
f=0,h=n.length,o,s;f<h;f++){o=n[f];s=o.type;switch(s){case "boolean":s="boolean";break;case "int":case "integer":case "long":case "float":case "double":s="number";break;case "string":case "text":s="string"}a.addColumn(s||f===0&&"string"||"number",o.name)}a.addRows(m);var u=e._charts[d]=new google.visualization[c](document.getElementById(d));u.draw(a,g);e.event.bind("onAfterRefresh",function(){a.removeRows(0,a.getNumberOfRows());a.addRows(l.exportToArray(b));u.draw(a,g)})})}})();jx.grid.TooltipManager={};
(function(){function e(a){this.mid=a.mid;this.grid=a.grid;this.grid.tooltip=this;this._ctnr=a.container;this._options=h._extend({classTooltip:"jgrid-tooltip",tooltipSyncEnabled:!0,offsetX:0,offsetY:18,background:"#F5F5F5",border:"1px solid #868686",padding:"2px 10px",font:"14px Arial,Helvetica,sans-serif",color:"#333"},a.options);this.__init()}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.TooltipManager",e);
h._add("TooltipManager",e);e.getInstance=function(a){return new e(a)};var b=e.prototype;b.__init=function(){this.grid.event.bind({onCreateCss:this._onCreateCss,onDestroy:this._destroy,mouseoutCanvas:this._mouseoutCanvas,mousemoveCanvas:this._mousemoveCanvas,mouseoverCanvas:this._mouseoverCanvas},this)};b._destroy=function(){h._destroy(this,{name:"TooltipManager",path:"tooltip",$:"tooltip",property:"ctnr",map:"options"})};b._onCreateCss=function(){var a=this._options,d=[];d.push("#"+this.grid.mid+
" ."+a.classTooltip+"{position:absolute;z-index:10;background:"+a.background+";border:"+a.border+";padding:"+a.padding+";color:"+a.color+";font:"+a.font+"}");return d.join("")};b._mouseoutCanvas=function(){c.isNotNull(this._tooltip)&&(this._ctnr[0].removeChild(this._tooltip[0]),delete this._tooltip)};b._mousemoveCanvas=function(a){var d=this._options;d.tooltipSyncEnabled&&c.isNotNull(this._tooltip)&&this._tooltip.css({left:a.pageX+d.offsetX+"px",top:a.pageY+d.offsetY+"px"})};b._mouseoverCanvas=function(a,
d){if(d.getColDef().tooltipEnabled&&c.isNull(this._tooltip)){var b=this._options,k=document.createElement("div");k.innerHTML="<div class='"+b.classTooltip+"' style='left:"+(a.pageX+b.offsetX)+"px;top:"+(a.pageY+b.offsetY)+"px'>"+d.getValue()+"</div>";this._tooltip=$(k.firstChild);this._ctnr[0].appendChild(this._tooltip[0])}}})();jx.grid.DataCreator={};
(function(){function e(a){this.mid=a.mid;this._ctnr=a.container;this.grid=a.grid;this.grid.creator=this;this._options=h._extend({background:"#dfdfdf",borderThickness:0,border:"solid #D6D6D6",inputBorder:"solid #A7A7A7",inputBorderThickness:1,inputHeight:18,inputMargin:8,nameMargin:2,font:"12px Arial,Helvetica,sans-serif",height:28,padding:3,classCreatorIcon:"creator-icon",creatorIconUrl:this.grid._options.imageUrl+"data-creator-icon.png",creatorIconWidth:13,creatorIconHeight:13,classCreator:"data-creator",
classColName:"data-creator-name",inputBorderRadius:3},a.options);this._inputMap={};this.__init()}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.DataCreator",e);h._add("DataCreator",e);e.getInstance=function(a){return new e(a)};var b=e.prototype;b.__init=function(){this._creator=$("<div class='"+this._options.classCreator+"'>").appendTo(this._ctnr);this.bindEvents()};b.bindEvents=function(){this.grid.event.bind({onRenderModules:this._onRenderModules,
onCreateCss:this._onCreateCss,onDestroy:this._destroy},this)};b._onCreateCss=function(){var a="#"+this.grid.mid+" .",d=this._options,b=[];b.push(a+d.classCreator+"{"+h._CONST._cssUnselectable+"float:left;width:100%;padding-left:8px;background:"+d.background+";border-top:"+(d.borderThickness+"px "+d.border)+";font:"+d.font+"}");b.push(a+d.classCreator+" button{float:left;margin:"+d.padding+"px "+d.padding+"px 0 0;height:"+(d.height-2*d.padding)+"px}");b.push(a+d.classCreator+" input{float:left;padding:0;margin-top:"+
(d.height-d.inputHeight-2*d.inputBorderThickness)/2+"px;height:"+d.inputHeight+"px;border:"+d.inputBorderThickness+"px "+d.inputBorder+";border-radius:"+d.inputBorderRadius+"px;-moz-border-radius:"+d.inputBorderRadius+"px}");b.push(a+d.classCol+"{float:left;overflow:hidden;white-space:nowrap;line-height:"+d.height+"px;margin-right:"+d.inputMargin+"px}");b.push(a+d.classColName+"{float:left;margin-right:"+d.nameMargin+"px}");b.push(a+d.classCreatorIcon+"{background:url("+d.creatorIconUrl+") no-repeat center;width:"+
d.creatorIconWidth+"px;height:"+d.creatorIconHeight+"px}");return b.join("")};b._onRenderModules=function(){for(var a=[],d=this.grid.colDefMgr.getAll(),b=d.length,k,g=this._options,e=g.classCol,i=g.classColName,h=this,l=this._creator,n=this._inputMap,m=0,q=function(d){d.which===c.keyMapKeydown.enter&&h._addData()};m<b;m++)k=d[m],k.inputOnCreate===!0&&a.push("<div key='"+k.key+"' class='"+e+"'><div class='"+i+"'>"+k.name+"</div><input type='text' value='"+c.ifNull(k.defaultValue,"")+"' style='width:"+
k.width+"px'/></div>");l[0].innerHTML=a.join("")+"<button type='button' onclick='JGM.m.DataCreator."+this.mid+"._addData()'>µî·Ï</button><button type='button' onclick='JGM.m.DataCreator."+this.mid+"._reset()'>ÃÊ±âÈ­</button>";for(m=0;m<b;m++)k=d[m],k.inputOnCreate===!0&&(n[k.key]=l.find("div[key='"+k.key+"'] input").keyup(q));c.isNotNull(this.grid.menubar)&&(this.grid.menubar.addIcon(g.classCreatorIcon,"µ¥ÀÌÅÍ ·Î¿ì¸¦ Ãß°¡ÇÕ´Ï´Ù.",g.creatorIconWidth,g.creatorIconHeight,function(){l.toggle("fast")}),l.hide())};b._addData=
function(){var a,d=this._inputMap,b=this.grid.colDefMgr,c={},g=b.getAll(),e=g.length,i=0;for(a in d)d.hasOwnProperty(a)&&b.getByKey(a);for(;i<e;i++)b=g[i],a=b.key,d.hasOwnProperty(a)?c[a]=d[a][0].value:b.defaultValue!==void 0&&(c[a]=b.defaultValue);this.grid.event.trigger("onAfterDataCreate",[c]);this.grid.dataMgr.add(c,{isNew:!0})};b._reset=function(){var a,d=this.grid.colDefMgr,b,c=this._inputMap;for(a in c)if(c.hasOwnProperty(a)&&(b=d.getByKey(a),b.defaultValue!==void 0))c[a][0].value=b.defaultValue};
b._destroy=function(){var a,d=this._inputMap;for(a in d)d.hasOwnProperty(a)&&h._delete$(d,a);h._destroy(this,{name:"DataCreator",path:"creator",$:"creator",map:"inputMap _options"})}})();jx.grid.SearchManager={};
(function(){function e(d){this.mid=d.mid;this._ctnr=d.container;this.grid=d.grid;this.grid.search=this;this._options=h._extend({background:"#f0f0f0",borderThickness:1,border:"solid #d6d6d6",inputBorder:"1px solid #A7A7A7",inputPadding:0,searchbarAlign:"center",searchbarMargin:3,searchbarWidth:"99%",searchbarHeight:20,tagsHeight:26,tagsPadding:2,tagsBorderRadius:3,advButtonColor:"#123272",advButtonFont:"bold 12px Arial,Helvetica,sans-serif",advButtonPadding:5,advButtonBg:"",advButtonBgHover:"url("+
this.grid._options.imageUrl+"more-options-bg-hover.png) repeat-x scroll center",advButtonBgActive:"url("+this.grid._options.imageUrl+"more-options-bg-active.png) repeat-x scroll center",advButtonBgOpened:"url("+this.grid._options.imageUrl+"more-options-bg-opened.png) repeat-x scroll center",advButtonBorderThickness:1,advButtonBorder:"solid transparent",advButtonBorderHover:"solid #a4a4a4",advButtonBorderActive:"solid #c5c5c5",advButtonBorderOpened:"solid #bfbfbf",advButtonIconWidth:9,advButtonIconMargin:2,
advButtonIconUrl:this.grid._options.imageUrl+"more-options.png",advButtonIconCloseUrl:this.grid._options.imageUrl+"more-options-close.png",tagPadding:2,tagBorder:"solid #93979D",tagBorderThickness:1,tagFont:"bold 13px Arial",tagColor:"#282853",tagBackground:"url("+this.grid._options.imageUrl+"tag-background.png) repeat-x scroll center",tagRemoveIconWidth:12,tagRemoveIconUrl:this.grid._options.imageUrl+"tag-close.png",tagRemoveIconHoverUrl:this.grid._options.imageUrl+"tag-close-hover.png",advFont:"11px Arial",
advInputWidth:30,classMask:"search-mask",classSearchbar:"search-bar",classAdvButtonName:"more-option-name",classAdvButton:"more-options",classAdvButtonIcon:"more-icon",classClearTags:"clear-tags",classTagbar:"search-tags",classTag:"search-tag",classTagName:"search-tag-name",classRemoveTag:"search-tag-remove",classAdvanced:"search-advanced",classOptionCol:"search-option-col",classOption:"search-option",classSearchIcon:"search-icon",searchIconUrl:this.grid._options.imageUrl+"search-icon.png",searchIconWidth:15,
searchIconHeight:15,keyMap:void 0,tagRemoveIconActiveUrl:this.grid._options.imageUrl+"tag-close-active.png",syncMaster:!1},d.options);this._filterMap={};this._tagMap={};this._nameMap={};this._codeMap={};this._global=[];this._globalMap={};this._keyToName={};this.__init()}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.SearchManager",e);h._add("SearchManager",e);var b=e.prototype;b._onCreateCss=function(){var d=
"#"+this.grid.mid+" .",a=this._options,b=a.borderThickness+"px "+a.border,f="border-radius:"+a.tagsBorderRadius+"px;-moz-border-radius:"+a.tagsBorderRadius+"px",c=a.advButtonBorderThickness+"px "+a.advButtonBorder,g=a.advButtonBorderThickness+"px "+a.advButtonBorderHover,k=a.advButtonBorderThickness+"px "+a.advButtonBorderActive,e=a.advButtonBorderThickness+"px "+a.advButtonBorderOpened,i=a.tagsHeight-2*a.tagsPadding,j=i-2*a.advButtonBorderThickness,l=i-2*a.tagBorderThickness,o=d+a.classMask,m=d+
a.classSearchbar,n=d+a.classAdvButton,q=d+a.classRemoveTag,p=[];p.push(o+"{"+h._CONST._cssUnselectable+"overflow:hidden;width:100%;background:"+a.background+"}");p.push(o+" button{margin:0;padding:0 3px}");p.push(o+" input{border:"+a.inputBorder+";padding:"+a.inputPadding+"}");p.push(m+"{text-align:"+a.searchbarAlign+";border-bottom:"+b+"}");p.push(m+" input{width:"+a.searchbarWidth+";margin:"+a.searchbarMargin+"px 0;height:"+a.searchbarHeight+"px;"+f+"}");p.push(d+a.classTagbar+"{cursor:default;height:"+
(a.tagsHeight-a.tagsPadding)+"px;padding:"+a.tagsPadding+"px 0 0 "+a.tagsPadding+"px;border-bottom:"+b+"}");p.push(n+"{float:left;margin-right:"+a.tagsPadding+"px;background:"+a.advButtonBg+";border:"+c+";padding:0 "+a.advButtonPadding+"px;"+f+"}");p.push(n+":hover{background:"+a.advButtonBgHover+";border:"+g+"}");p.push(n+".opened{background:"+a.advButtonBgOpened+";border:"+e+"}");p.push(n+":active{background:"+a.advButtonBgActive+";border:"+k+"}");p.push(d+a.classAdvButtonName+"{float:left;color:"+
a.advButtonColor+";font:"+a.advButtonFont+";line-height:"+j+"px}");p.push(d+a.classAdvButtonIcon+"{float:left;height:"+j+"px;margin-left:"+a.advButtonIconMargin+"px;background:url("+a.advButtonIconUrl+") no-repeat center;width:"+a.advButtonIconWidth+"px}");p.push(n+".opened ."+a.classAdvButtonIcon+"{background:url("+a.advButtonIconCloseUrl+") no-repeat center}");p.push(d+a.classTag+"{float:left;border:"+a.tagBorderThickness+"px "+a.tagBorder+";margin:0 "+a.tagsPadding+"px "+a.tagsPadding+"px 0;padding:0 "+
a.tagPadding+"px;background:"+a.tagBackground+";"+f+"}");p.push(d+a.classTagName+"{float:left;color:"+a.tagColor+";font:"+a.tagFont+";line-height:"+l+"px}");p.push(q+"{float:left;margin-left:"+a.tagPadding+"px;background:url("+a.tagRemoveIconUrl+") no-repeat center;width:"+a.tagRemoveIconWidth+"px;height:"+l+"px}");p.push(q+":hover{background:url("+a.tagRemoveIconHoverUrl+") no-repeat center}");p.push(q+":active{background:url("+a.tagRemoveIconActiveUrl+") no-repeat center}");p.push(d+a.classClearTags+
"{height:"+i+"px}");p.push(d+a.classAdvanced+"{cursor:default;font:"+a.advFont+";border-bottom:"+b+"}");p.push(d+a.classOptionCol+"{display:inline-block;vertical-align:top}");p.push(d+a.classOptionCol+" input{width:"+a.advInputWidth+"px;margin-right:2px;"+f+"}");p.push(d+a.classSearchIcon+"{background:url("+a.searchIconUrl+") no-repeat center;width:"+a.searchIconWidth+"px;height:"+a.searchIconHeight+"px}");return p.join("")};e.getInstance=function(a){return new e(a)};b.__init=function(){var a=this._options,
d=this,b,f,g;b=this._mask=$("<div class='"+a.classMask+"'>").prependTo(this._ctnr);this._search=$("<div class='"+a.classSearchbar+"'><input type='text'/></div>").appendTo(b);this._masterInput=this._search.children(":eq(0)").keyup(function(a){a.which===c.keyMapKeydown.enter?d._parse($(this)[0].value):a.which===c.keyMapKeydown.esc&&d._removeAllOptions()});f=this._hasFilter=this.grid.colDefMgr.get().some(function(a){return c.isNotNull(a.filter)});g=this._tag=$("<div class='"+a.classTagbar+"'>"+(f?"<div class='"+
a.classAdvButton+"'><div class='"+a.classAdvButtonName+"'>Ãß°¡ ¿É¼Ç</div><div class='"+a.classAdvButtonIcon+"'></div></div>":"")+"<button type='button' class='"+a.classClearTags+"' onclick='JGM.m.SearchManager."+this.mid+"._removeAllOptions()'>¸ðµç ÇÊÅÍ Á¦°Å</button></div>").appendTo(b);if(f){var k=this._adv=$("<div class='"+a.classAdvanced+"'>").appendTo(b).hide().keyup(function(a){if(a.which===c.keyMapKeydown.enter){var b=a.target.getAttribute("key");d._registerOption(b,d._keyToName[b],a.target.getAttribute("tag"),
a.target.value);a.target.value=""}});this._advButton=g.children(":eq(0)").click(function(){$(this).toggleClass("opened");k.toggle("fast")})}this.grid.event.bind({onRenderModules:this._onRenderModules,onCreateCss:this._onCreateCss,onFilter:this._onFilter,onDestroy:this._destroy,onAfterRenderModules:this._onAfterRenderModules},this)};b._onRenderModules=function(){var a=[],d=this._options,b=this._mask;if(this._hasFilter){for(var f=this.grid.colDefMgr.get(),g=f.length,k=d.keyMap,e=this._nameMap,i=this._keyToName,
h,j,l,o=0;o<g;o++)if(h=f[o],c.isNotNull(h.filter))l=h.key,j=c.isNull(k)||!k.hasOwnProperty(l)?h.name||l:k[l],e[j]=l,i[l]=j,a.push("<div class='"+d.classOptionCol+"'>"),this._registerFilter(l,j,h.name,h.filter,a),a.push("</div>");this._adv[0].innerHTML=a.join("")}c.isNotNull(this.grid.menubar)&&(this.grid.menubar.addIcon(d.classSearchIcon,"µ¥ÀÌÅÍ °Ë»öÀ» ÇÕ´Ï´Ù.",d.searchIconWidth,d.searchIconHeight,function(){b.toggle("fast")}),b.hide())};b._onAfterRenderModules=function(){var a=this._filterMap,d,b,f,c,g=this._adv;
for(b in a)if(a.hasOwnProperty(b))for(f in d=a[b],d)if(d.hasOwnProperty(f)&&f!=="andor"&&f!=="parser"&&f!=="validator")(c=d[f]).input=g.find("#"+b+c.option.name)};b._destroy=function(){var a,d,b,f=this._globalMap,c=this._filterMap,g=this._tagMap;for(a in f)f.hasOwnProperty(a)&&(h._delete$(f[a],"tag"),h._deleteArray(f[a],"list"));for(a in c)if(c.hasOwnProperty(a)){f=c[a];for(d in f)f.hasOwnProperty(d)&&(d!=="andor"&&d!=="parser"&&d!=="validator"&&h._delete$(f[d],"input"),h._deleteMap(f,d));h._deleteMap(c,
a)}for(a in g)if(g.hasOwnProperty(a)){c=g[a];for(d in c)if(c.hasOwnProperty(d)){f=c[d];for(b in f)f.hasOwnProperty(b)&&(h._delete$(f[b],"tag"),h._deleteMap(f,b));h._deleteMap(c,d)}h._deleteMap(g,a)}h._destroy(this,{name:"SearchManager",path:"search",$:"masterInput _advButton _mask _search _tag _adv",property:"ctnr _hasFilter",array:"global",map:"globalMap _filterMap _tagMap _codeMap _nameMap _options _keyToName"})};b._onFilter=function(a,d){if(!(this._global.length===0&&c.isEmptyObj(this._codeMap))){var b,
f=this._tagMap,g,k,e=a.length,i,h=this._filterMap,j=this.constructor.CONST.and,l,o=this._global.length>0,n,m;if(o){var p=this._global,q;i=this.grid.colDefMgr.get().filter(function(a){return!a.noSearch});var r=i.length,t=[];for(n=0;n<r;n++)t.push(i[n].key)}n=e-1;a:for(;n>=0;n--){e=a[n];if(o){i=p.slice();b=0;for(;i.length!==0&&b<r;b++)if(!c.isNull(q=e[t[b]])){c.isString(q)||(q=q.toString());for(m=i.length-1;m>=0;m--)q.indexOf(i[m])!==-1&&i.removeAt(m)}if(i.length!==0){a.removeAt(n);d.push(e);continue a}}for(g in f)if(f.hasOwnProperty(g))if(m=
f[g],b=h[g].andor,i=e[g],b===j)for(k in m){if(m.hasOwnProperty(k))for(l in b=m[k],b)if(b.hasOwnProperty(l)&&!b[l].fn(i)){a.removeAt(n);d.push(e);continue a}}else{for(k in m)if(m.hasOwnProperty(k))for(l in b=m[k],b)if(b.hasOwnProperty(l)&&b[l].fn(i))continue a;a.removeAt(n);d.push(e);continue a}}}};b._registerFilter=function(a,d,b,f,c){if(!this._filterMap.hasOwnProperty(a)){if(f==="number")f=this.constructor._numberFilter;else if(f==="string")f=this.constructor._stringFilter;var g,k=f.length,e=0,i=
this.mid,h=this._options.classOption,j,l,o,n;j=this._filterMap[a]={andor:this.constructor.CONST.and};l=this._tagMap[a]={};for(c.push("<table>");e<k;e++)g=f[e],n=g.name,n==="parser"?j.parser=g.fn:n==="validator"?j.validator=g.fn:(o=g.tag,j[o]={option:g},l[o]={},c.push("<tr title='"+g.comment(b,"ÀÔ·Â°ª")+"'><td><div class='"+h+"'>"+b+" "+o+"</td><td><input id='"+a+n+"' key='"+a+"' tag='"+o+"' type='text'><button type='button' onclick=\"JGM.m.SearchManager."+i+"._registerOption('"+a+"','"+d+"','"+o+"',this.previousSibling.value)\">µî·Ï</button></div></td></tr>"));
c.push("</table>")}};b._parse=function(a){for(var d,b,f,g,k=c.split(a),e=k.length,i=2,h=!1,j=[],l=this._nameMap,o=this._filterMap,n=0;n<e;n++)if(a=k[n],a!=="")switch(i){case 0:o[d].hasOwnProperty(a)&&(f=a,i=1);break;case 1:g=a;i=2;break;case 2:a.charAt(0)==="@"?(a=a.substring(1),l.hasOwnProperty(a)?(c.isNotNullAnd(d,b,f,g)&&this._registerOption(d,b,f,g,!0)&&(h=!0),d=l[a],b=a,g=f=void 0,i=0):c.isNull(d)?j.push(a):g+=" "+a):c.isNull(d)?j.push(a):g+=" "+a}c.isNotNullAnd(d,b,f,g)&&this._registerOption(d,
b,f,g,!0)&&(h=!0);this._registerGlobal(j)&&(h=!0);this._syncMasterInput();h&&this.grid.dataMgr.refresh()};b._syncMasterInput=function(){if(this._options.syncMaster){var a=this._global.join(" "),d=this._tagMap,b=this._keyToName,f,g,c,k,e;for(f in d)if(d.hasOwnProperty(f))for(g in k=d[f],k)if(k.hasOwnProperty(g))for(c in e=k[g],e)e.hasOwnProperty(c)&&(a+=" @"+b[f]+" "+g+" "+c);this._masterInput[0].value=$.trim(a)}else this._masterInput[0].value=""};b._registerGlobal=function(a){for(var d=0,b=a.length,
f=this._global;d<b;d++)f.indexOf(a[d])!==-1?a.removeAt(d--):f.push(a[d]);if(a.length===0)return!1;d=this._options;this._globalMap[a[0]]={tag:$("<div class='"+d.classTag+"' title='"+a.join(", ")+" ¸¦ Æ÷ÇÔÇÏ´Â'><div class='"+d.classTagName+"'>"+a.join(" ")+"</div><div class='"+d.classRemoveTag+"' title='ÇÊÅÍ Á¦°Å' onclick=\"JGM.m.SearchManager."+this.mid+"._removeGlobal('"+a[0]+"')\"></div></div>").appendTo(this._tag),list:a};return!0};b._removeGlobal=function(a){var d=this._globalMap;if(d.hasOwnProperty(a)){var b=
d[a];b.tag.remove();delete b.tag;this._global.removeList(b.list);b.list.length=0;delete b.list;delete d[a];this._syncMasterInput();this.grid.dataMgr.refresh()}};b._registerOption=function(a,d,b,f,g){var k=this._filterMap,i,h=this._codeMap;if(k.hasOwnProperty(a)&&(i=k[a]).hasOwnProperty(b)){k=i[b];if(c.isNull(f)){var j=k.input,f=$.trim(j.val());j.val("")}else f=$.trim(f);if(f.length===0)return!1;c.isNotNull(i.parser)&&(f=i.parser(f));if(h.hasOwnProperty(a+"@T"+b+"@B"+f))return!1;if(c.isNotNull(i.validator)&&
!i.validator(f))return!1;k=k.option;i=i.andor}else return!1;j=this._tagMap[a];if(j[b].hasOwnProperty(f))return!1;var l,o,n,m,q=this._filterMap[a],p;for(n in j)if(j.hasOwnProperty(n))for(m in l=j[n],l)l.hasOwnProperty(m)&&(p=l[m],o=c.isNotNull(q.parser)?q.parser(m):m,e._checkDisable(k.type,p.option.type,i,f,o)&&(delete h[a+"@T"+p.option.tag+"@B"+o],p.tag.remove(),delete p.tag,delete p.option,delete p.fn,delete l[m]));h[a+"@T"+b+"@B"+f]=!0;this._createTag(a,k,f,d);g||(this._syncMasterInput(),this.grid.dataMgr.refresh());
return!0};b._removeOption=function(a,d,b){var f=this._tagMap,g,c;if(f.hasOwnProperty(a)&&(g=f[a]).hasOwnProperty(d)&&(c=g[d]).hasOwnProperty(b))f=c[b],f.tag.remove(),delete f.tag,delete f.option,delete f.fn,delete c[b],delete this._codeMap[a+"@T"+d+"@B"+b],this._syncMasterInput(),this.grid.dataMgr.refresh()};b._removeAllOptions=function(){var a,d=this._globalMap,b,f=this._tagMap,g,c,k;for(a in d)if(d.hasOwnProperty(a))b=d[a],b.tag.remove(),delete b.tag,b.list.length=0,delete b.list,delete d[a];this._global.length=
0;for(a in f)if(f.hasOwnProperty(a))for(g in d=f[a],d)if(d.hasOwnProperty(g))for(c in b=d[g],b)b.hasOwnProperty(c)&&(k=b[c],k.tag.remove(),delete k.tag,delete k.option,delete k.fn,delete b[c]);this._codeMap={};this._syncMasterInput();this.grid.dataMgr.refresh()};b._createTag=function(a,d,b,f){var g=this._options;return this._tagMap[a][d.tag][b]={tag:$("<div class='"+g.classTag+"' title='"+d.comment(f,b)+"'><div class='"+g.classTagName+"'>@"+f+" "+d.tag+" "+b+"</div><div class='"+g.classRemoveTag+
"' title='ÇÊÅÍ Á¦°Å' onclick=\"JGM.m.SearchManager."+this.mid+"._removeOption('"+a+"','"+d.tag+"','"+b+"')\"></div></div>").appendTo(this._tag),option:d,fn:d.fn(b)}};var a=e.CONST={lt:0,lte:1,eq:2,neq:3,gt:4,gte:5,and:6,or:7,T:8,F:9},b=a.lt,d=a.gt,f=a.eq,k=a.neq,g=a.and,j=a.or,i=a.T,a=a.F,o=e._comparator={},l=o[b]=function(a,d){return a<=d},n=o[d]=function(a,d){return a>=d},m=o[f]=function(a,d){return a===d},i=o[i]=function(){return!0},q=e._disableMap={},p=q[b]={},r=q[d]={},t=q[f]={},q=q[k]={};o[a]=function(){return!1};
p[b]={};p[b][g]=i;p[b][j]=i;p[d]={};p[d][g]=l;p[d][j]=n;p[f]={};p[f][g]=i;p[f][j]=n;p[k]={};p[k][g]=l;p[k][j]=i;r[b]={};r[b][g]=n;r[b][j]=l;r[d]={};r[d][g]=i;r[d][j]=i;r[f]={};r[f][g]=i;r[f][j]=l;r[k]={};r[k][g]=n;r[k][j]=i;t[b]={};t[b][g]=i;t[b][j]=l;t[d]={};t[d][g]=i;t[d][j]=n;t[f]={};t[f][g]=i;t[f][j]=m;t[k]={};t[k][g]=i;t[k][j]=i;q[b]={};q[b][g]=n;q[b][j]=i;q[d]={};q[d][g]=l;q[d][j]=i;q[f]={};q[f][g]=i;q[f][j]=i;q[k]={};q[k][g]=m;q[k][j]=i;e._checkDisable=function(a,d,b,f,g){try{return this._disableMap[a][d][b](f,
g)}catch(c){return!1}};e._numberFilter=[{name:"gt",tag:">",type:d,comment:function(a,d){return a+" ÀÌ(°¡) "+d+"º¸´Ù Å«"},fn:function(a){c.isString(a)&&(a=a.toFloat());return function(d){return d>a}}},{name:"gte",tag:">=",type:d,comment:function(a,d){return a+" ÀÌ(°¡) "+d+"º¸´Ù Å©°Å³ª °°Àº"},fn:function(a){c.isString(a)&&(a=a.toFloat());return function(d){return d>=a}}},{name:"lt",tag:"<",type:b,comment:function(a,d){return a+" ÀÌ(°¡) "+d+"º¸´Ù ÀÛÀº"},fn:function(a){c.isString(a)&&(a=a.toFloat());return function(d){return d<
a}}},{name:"lte",tag:"<=",type:b,comment:function(a,d){return a+" ÀÌ(°¡) "+d+"º¸´Ù ÀÛ°Å³ª °°Àº"},fn:function(a){c.isString(a)&&(a=a.toFloat());return function(d){return d<=a}}},{name:"eq",tag:"=",type:f,comment:function(a,d){return a+" ÀÌ(°¡) "+d+"ÀÎ"},fn:function(a){c.isString(a)&&(a=a.toFloat());return function(d){return d===a}}},{name:"neq",tag:"!=",type:k,comment:function(a,d){return a+" ÀÌ(°¡) "+d+"ÀÌ(°¡) ¾Æ´Ñ"},fn:function(a){c.isString(a)&&(a=a.toFloat());return function(d){return d!==a}}},{name:"contains",
tag:"*=",comment:function(a,d){return a+" ÀÌ(°¡) ¼ýÀÚ "+d+"¸¦ Æ÷ÇÔÇÏ´Â"},fn:function(a){a=c.isNumber(a)?a.toString():$.trim(a);return function(d){return d.toString().indexOf(a)!==-1}}},{name:"parser",fn:function(a){return a.toFloat()}},{name:"validator",fn:function(a){return!isNaN(a)}}];e._stringFilter=[{name:"to",tag:"<=",type:b,comment:function(a,d){return a+" ÀÌ(°¡) "+d+"º¸´Ù »çÀü¿¡¼­ ÀÌÀüÀÎ"},fn:function(a){a=$.trim(a).toLowerCase();return function(d){return d.toLowerCase()<=a}}},{name:"from",tag:">=",type:d,comment:function(a,
d){return a+" ÀÌ(°¡) "+d+"º¸´Ù »çÀü¿¡¼­ ÀÌÈÄÀÎ"},fn:function(a){a=$.trim(a).toLowerCase();return function(d){return d.toLowerCase()>=a}}},{name:"equals",tag:"=",type:f,comment:function(a,d){return a+" ÀÌ(°¡) "+d+"¿Í(°ú) °°Àº"},fn:function(a){a=$.trim(a).toLowerCase();return function(d){return d.toLowerCase()===a}}},{name:"notEquals",tag:"!=",type:k,comment:function(a,d){return a+" ÀÌ(°¡) "+d+"ÀÌ(°¡) ¾Æ´Ñ"},fn:function(a){a=$.trim(a).toLowerCase();return function(d){return d.toLowerCase()!==a}}},{name:"startsWith",tag:"^=",
comment:function(a,d){return a+" ÀÌ(°¡) "+d+"(À¸)·Î ½ÃÀÛÇÏ´Â"},fn:function(a){var a=$.trim(a).toLowerCase(),d=a.length;return function(b){return b.substr(0,d).toLowerCase()===a}}},{name:"endsWith",tag:"$=",comment:function(a,d){return a+" ÀÌ(°¡) "+d+"(À¸)·Î ³¡³ª´Â"},fn:function(a){var a=$.trim(a).toLowerCase(),d=a.length;return function(b){return b.substr(b.length-d,b.length).toLowerCase()===a}}},{name:"contains",tag:"*=",comment:function(a,d){return a+" ÀÌ(°¡) "+d+"À»(¸¦) Æ÷ÇÔÇÏ´Â"},fn:function(a){a=$.trim(a).toLowerCase();
return function(d){return d.toLowerCase().indexOf(a)!==-1}}},{name:"containsAny",tag:"|=",comment:function(a,d){return a+" ÀÌ(°¡) "+d+"µé Áß ÇÏ³ª ÀÌ»óÀ» Æ÷ÇÔÇÏ´Â"},fn:function(a){var a=a.toLowerCase(),d=c.split(a),b=d.length;return b<=1?function(d){return d.toLowerCase().indexOf(a)!==-1}:function(a){for(var a=a.toLowerCase(),f=0;f<b;f++)if(a.indexOf(d[f])!==-1)return!0;return!1}}},{name:"containsAll",tag:"&=",comment:function(a,d){return a+" ÀÌ(°¡) "+d+"µé ¸ðµÎ¸¦ Æ÷ÇÔÇÏ´Â"},fn:function(a){var a=a.toLowerCase(),d=c.split(a),
b=d.length;return b<=1?function(d){return d.toLowerCase().indexOf(a)!==-1}:function(a){for(var a=a.toLowerCase(),f=0;f<b;f++)if(a.indexOf(d[f])===-1)return!1;return!0}}}]})();jx.grid.PrintManager={};
(function(){function e(a){this.mid=a.mid;this._ctnr=Util$.safe$(a.container);this.grid=a.grid;this._options=h._extend({title:"Print Preview",font:"15px arial,sans-serif",headerFontColor:"#27413E",headerBackgroundColor:"#DCDEDE",tableBorderColor:"#6E7174",headerBorderColor:"#909192",cellBorderColor:"#D0D7E5",winOptions:{name:"Print Preview",width:800,height:600,directories:"no",location:"no",menubar:"no",status:"no",toolbar:"no"}},a.options);this.__init()}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util");
goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.PrintManager",e);h._add("PrintManager",e);e.getInstance=function(a){return new e(a)};var b=e.prototype;b.__init=function(){var a=this;this._ctnr[0].innerHTML="<button type='button'>Print</button>";this._ctnr.click(function(){a.print()})};b.print=function(){var a=this.getPrintHtml(this.grid.colDefMgr.get(),this.grid.dataMgr.datalist),d=c.open(this._options.winOptions);d.document.write(a);d.document.close()};b.getPrintHtml=function(a,
d){var b=this._options,c=b.tableBorderColor,g=b.headerBorderColor,e=b.cellBorderColor,i=[],h=a.length,l=h-1,n=d.length,m=n-1,q=0,p;i.push("<html><head>");i.push("<title>"+b.title+"</title>");i.push("</head><body onload='window.print();'>");i.push("<table width='100%' cellspacing='0' cellpadding='0'><tbody><tr><td align='left'>");i.push("<table width='100%' cellspacing='0' cellpadding='2' style='border-collapse:collapse'>");i.push("<tbody style='font:"+b.font+";'>");for(i.push("<tr style='background-color:"+
b.headerBackgroundColor+";color:"+b.headerFontColor+";text-align:center'>");q<h;q++)i.push("<td style='border:solid 1px "+g+";'>"+a[q].name+"</td>");i.push("</tr>");for(q=0;q<n;q++){b=d[q];i.push("<tr>");if(q===0)for(p=0;p<h;p++)p===0?i.push("<td style='border:solid 1px "+e+";border-top:solid 1px "+g+";border-left:solid 1px "+c+"'>"+b[a[p].key]+"</td>"):p===l?i.push("<td style='border:solid 1px "+e+";border-top:solid 1px "+g+";border-right:solid 1px "+c+"'>"+b[a[p].key]+"</td>"):i.push("<td style='border:solid 1px "+
e+";border-top:solid 1px "+g+"'>"+b[a[p].key]+"</td>");else if(q<m)for(p=0;p<h;p++)p===0?i.push("<td style='border:solid 1px "+e+";border-left:solid 1px "+c+"'>"+b[a[p].key]+"</td>"):p===l?i.push("<td style='border:solid 1px "+e+";border-right:solid 1px "+c+"'>"+b[a[p].key]+"</td>"):i.push("<td style='border:solid 1px "+e+"'>"+b[a[p].key]+"</td>");else for(p=0;p<h;p++)p===0?i.push("<td style='border:solid 1px "+e+";border-bottom:solid 1px "+c+";border-left:solid 1px "+c+"'>"+b[a[p].key]+"</td>"):
p===l?i.push("<td style='border:solid 1px "+e+";border-bottom:solid 1px "+c+";border-right:solid 1px "+c+"'>"+b[a[p].key]+"</td>"):i.push("<td style='border:solid 1px "+e+";border-bottom:solid 1px "+c+"'>"+b[a[p].key]+"</td>");i.push("</tr>")}i.push("</tbody></table></td></tr></tbody></table></body></html>");return i.join("")}})();jx.grid.Column={};
(function(){function e(c){if(!(c.manager&&typeof c.manager=="object"))throw Error("Column needs a valid manager!");this.manager=c.manager;this.key=c.key+"";if(!this.key)throw Error("Column needs a non-empty key!");var b="column key="+this.key;if(this.manager.hasKey(this.key))throw Error("Duplicate column key!"+b);this.name=c.name?c.name+"":"";this.title=c.title?c.title+"":"";this.noName=!!c.noName;this.noTitle=!!c.noTitle;this.type=c.type+""||null;this.defaultValue=c.defaultValue;this.inputOnCreate=
!!c.inputOnCreate;this.width=(this.width=Number(c.width))||90;this.minW=(this.minW=Number(c.minW))||30;this.maxW=Number(c.maxW)||null;this.resizable=!!c.resizable;this.hidden=!!c.hidden;this.noSearch=!!c.noSearch;this.tooltipEnabled=!!c.tooltipEnabled;this.colClass=c.colClass+""||null;this.style=c.style+""||null;this.headerStyle=c.headerStyle+""||null;if(c.parser&&typeof c.parser!="function")throw Error("Invalid parser!"+b);this.parser=c.parser||null;if(c.validator&&typeof c.validator!="function")throw Error("Invalid validator!"+
b);this.validator=c.validator||null;if(c.renderer&&typeof c.renderer!="function")throw Error("Invalid renderer!"+b);this.renderer=c.renderer||null;if(c.sumRenderer&&typeof c.sumRenderer!="function")throw Error("Invalid sum renderer!"+b);this.sumRenderer=c.sumRenderer||null;if(c.editor&&typeof c.editor!="object")throw Error("Invalid editor!"+b);this.editor=c.editor||null;this.sorter=c.sorter||null;this.filter=c.filter||null}var h=goog.getObjectByName("jx.events.EventDispatcher");goog.exportSymbol("jx.grid.Column",
e);goog.inherits(e,h);h=e.prototype;h.show=function(){return this.hidden?(this.hidden=!1,this.dispatchEvent({type:"hidden",value:!1}),!0):!1};h.hide=function(){return!this.hidden?(this.hidden=!0,this.dispatchEvent({type:"hidden",value:!0}),!0):!1};h.setHidden=function(c){return c?this.hide():this.show()};h.setWidth=function(c){return(c=Number(c))&&this.width!==c?(this.width=c,this.dispatchEvent({type:"width",value:c}),c):!1};h.setRenderer=function(c){if(this.renderer!==c){if(c&&typeof c!="function")throw Error("Invalid renderer!column key="+
this.key);this.renderer=c||null;this.dispatchEvent({type:"renderer",value:c})}}})();jx.grid.ColumnManager={};
(function(){function e(a){this.mid=a.mid;this.grid=a.grid;this.grid.colDefMgr=this;this._options=k._extend({colDef:{type:"string",key:void 0,name:"",colClass:void 0,defaultValue:void 0,inputOnCreate:void 0,style:"",headerStyle:"",width:80,minW:30,maxW:void 0,editor:void 0,sorter:void 0,hidden:!1,sumRenderer:void 0,tooltipEnabled:!1,resizable:!1,renderer:k.ViewportManager._renderer,rendererInput:!1,noTitle:!1,noName:!1,title:void 0,noSearch:!1,filter:void 0,parser:void 0,validator:void 0}},a.options);
this._colDefs=[];this._filtered=[];this._keyToDef={};this._keyToIdx={};this.__init(a)}function h(a){if(a)switch(a=a.toLowerCase(),a){case "bool":case "boolean":return"boolean";case "int":case "integer":case "long":case "short":return"int";case "float":case "double":case "number":case "num":case "numeric":return"float";case "str":case "string":case "text":return"string";case "date":case "datetime":case "time":case "timestamp":return"date"}return null}function c(a){if(typeof a!="boolean"){if(!a)return!1;
switch(a.toString().toLowerCase()){case "0":case "n":case "no":case "false":case "f":case "off":case "disable":case "disabled":case "null":case "undefined":case "nil":case "fail":case "not":return!1}return!0}return a}function b(a){return typeof a!="string"?a==null?"":a.toString():a}function a(a){return new Date(Date.parse(a))}function d(a,d){switch(typeof a){case "undefined":return Number.MAX_VALUE;case "boolean":return a?1:0;case "number":return a;case "string":return a[d]();default:if(a==null)return Number.MAX_VALUE}a=
a.valueOf();switch(typeof a){case "undefined":return Number.MAX_VALUE;case "boolean":return a?1:0;case "number":return a;case "string":return a[d]();default:return a==null?Number.MAX_VALUE:a.toString()[d]()}}function f(a){switch(typeof a){case "undefined":return Number.MAX_VALUE;case "boolean":return a?1:0;case "number":return a}return a==null?Number.MAX_VALUE:c(a)?1:0}var k=goog.getObjectByName("jx.grid"),g=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("jx.grid.Column");
goog.exportSymbol("jx.grid.ColumnManager",e);k._add("ColDefManager",e);e.getInstance=function(a){return new e(a)};var j=e.prototype;j.__init=function(a){this.grid.event.bind("onDestroy",this._destroy,this);this.set(a.colDefs)};j._destroy=function(){k._destroy(this,{name:"ColDefManager",path:"colDefMgr",property:"colDefs",map:"keyToIdx _keyToDef _options",array:"filtered"})};j.getAll=function(){return this._colDefs};j.set=function(a){if(this._colDefs===a||g.areEqualArrays(this._colDefs,a))return a;
if(g.isNull(a))a=[];else{var d=a.filter(function(a){return g.isNotNull(a)});a.length=0;a.pushList(d)}this.grid.event.trigger("onBeforeSetColDefs",[this._colDefs,a]);this._colDefs=[];this._filtered.length=0;this._keyToIdx={};this._keyToDef={};this.grid.event.trigger("onEmptyColDefs");for(var d=0,b=a.length,f=this._keyToDef,c,k;d<b;d++){c=a[d];if(!c.hasOwnProperty("key"))return this._keyToDef={},this.grid.error("KEY_UNDEFINED",d);k=c.key;if(g.isEmptyString(k))return this._keyToDef={},this.grid.error("BAD_NULL",
d);if(f.hasOwnProperty(k))return this._keyToDef={},this.grid.error("DUP_KEY",k);f[k]=c}this._colDefs=a;for(d=0;d<b;d++)this._extend(a[d]);this.grid.event.trigger("onAfterSetColDefs",[a,this._filter()]);return a};j.push=function(a){return this.addAt(this._filtered.length,a)};j.addAt=function(a,d){if(!g.isNull(d)){var b=d.key,f=this._keyToDef,c=this._filtered;g.isNull(a)||a>c.length?a=c.length:a<0&&(a+=c.length);this.grid.event.trigger("onBeforeAddColDef",[d]);if(g.isNull(b))return this.grid.error("KEY_UNDEFINED");
if(f.hasOwnProperty(b))return this.grid.error("DUP_KEY",b);this._colDefs.addAt(a,this._extend(f[b]=d));d.hidden!==!0&&(c.addAt(a,d),this._reidx());this.grid.event.trigger("onAfterAddColDef",[d,a]);return c.length}};j._extend=function(d){if(d){var f={},g,k;$.extend(!0,f,this._options.colDef);$.extend(!0,f,d);$.extend(!0,d,f);f=d.type=h(d.type);k=d.key;k!=null&&typeof k!="string"&&(d.key=k=k.toString());if(!k)throw Error("column key is not defined!");if(g=d.sorter){typeof g=="string"?g=h(g):f&&(g=f);
if(g=e.sorter(g,k))g.key=k;d.sorter=g}if((g=d.parser)&&f&&typeof g!="function"){switch(f){case "boolean":g=c;break;case "int":g=parseInt;break;case "float":g=parseFloat;break;case "string":g=b;break;case "date":g=a;break;default:g=null}d.parser=g}}return d};j.hide=function(a){var d=this._filtered[a];if(!g.isNull(d))return d.hidden=!0,this._filtered.removeAt(a),this._reidx(),this.grid.event.trigger("onHideCol",[d,a]),d};j.show=function(a){if(!g.isNull(a)){if(!g.isString(a)){if(!g.isObject(a))return;
a=a.key}var d=this._keyToDef;if(d.hasOwnProperty(a)){if(this._keyToIdx.hasOwnProperty(a))return d[a];d=d[a];d.hidden=!1;this._filter();this._reidx();this.grid.event.trigger("onShowCol",[d,this._keyToIdx[a]]);return d}}};j._filter=function(){this._filtered=this._colDefs.filter(function(a){return a.hidden!==!0});this._reidx();return this._filtered};j._reidx=function(){this._keyToIdx={};return this._reidxFrom()};j._reidxFrom=function(a){g.isNull(a)&&(a=0);for(var d=this._filtered,b=d.length,f=this._keyToIdx;a<
b;a++)f[d[a].key]=a;return f};j.get=function(a){if(g.isNull(a))return this._filtered;if(this._filtered.hasOwnProperty(a))return this._filtered[a]};j.getByKey=function(a){if(g.isNotNull(a)&&this._keyToDef.hasOwnProperty(a))return this._keyToDef[a]};j.length=function(){return this._filtered.length};j.getIdxByKey=function(a){return this._keyToIdx.hasOwnProperty(a)?this._keyToIdx[a]:-1};j.getIdx=function(a){return g.isNotNull(a)&&this._keyToIdx.hasOwnProperty(a.key)?this._keyToIdx[a.key]:-1};j.sortByKey=
function(a){this._filtered.length=0;this._keyToIdx={};for(var d=0,b=a.length,f=this._filtered,g=this._keyToIdx,c=this._keyToDef;d<b;d++)f.push(c[a[d]]),g[a[d]]=d;this.grid.event.trigger("onReorderCols",a);return this._filtered};j.getKeys=function(){return this._filtered.map(function(a){return a.key})};e.sorter=function(a,b,g){g={on:!!g,key:b};switch(a){case "boolean":return g.comparator=function(a,d){return f(a[b])-f(d[b])},g;case "string":return g.lexi=b,g;case "int":return g.comparator=function(a,
f){return d(a[b],"toInt")-d(f[b],"toInt")},g;case "float":return g.comparator=function(a,f){return d(a[b],"toFloat")-d(f[b],"toFloat")},g;case "date":return g.comparator=function(a,f){return d(a[b],"toInt")-d(f[b],"toInt")},g}return null}})();jx.grid.MenuBar={};
(function(){function e(a){b.call(this,a);this.grid.menubar=this}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util"),b=goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.MenuBar",e);h._add("MenuBar",e);goog.inherits(e,b);e.getInstance=function(a){return new e(a)};var a=e.prototype;a._defaultOptions=function(){return{background:"url("+this.grid._options.imageUrl+"menubar-bg.png) repeat-x scroll center",borderThickness:1,border:"solid #b6bac0",height:27,classMenuBar:"menubar",
classIcon:"menu-icon",iconBorderThickness:1,iconBorder:"solid transparent",iconBorderHover:"solid #d4d4d4",iconBorderActive:"solid #9a9a9a",iconMargin:2,iconBackground:"",iconBackgroundHover:"url("+this.grid._options.imageUrl+"menu-icon-hover.png) repeat-x scroll center",iconBackgroundActive:"url("+this.grid._options.imageUrl+"menu-icon-active.png) repeat-x scroll center",iconHeight:21,iconWidth:21,iconBorderRadius:4,iconBorderFocus:"solid #5f5f5f"}};a._init=function(a){this._ctnr=a.container;this._menubar=
$("<div class='"+this._options.classMenuBar+"'></div>").prependTo(this._ctnr)};a._bindEvents=function(){this.grid.event.bind({onCreateCss:this._onCreateCss,onDestroy:this._destroy},this)};a._destroy=function(){h._destroy(this,{name:"MenuBar",path:"menubar",$:"menubar",property:"ctnr",map:"options"})};a._onCreateCss=function(){var a="#"+this.grid.mid+" .",b=this._options,c=[];c.push(a+b.classMenuBar+"{"+h._CONST._cssUnselectable+"overflow:hidden;width:100%;background:"+b.background+";border-bottom:"+
(b.borderThickness+"px "+b.border)+";height:"+b.height+"px}");c.push(a+b.classIcon+"{float:left;height:"+b.iconHeight+"px;width:"+b.iconWidth+"px;border:"+b.iconBorderThickness+"px "+b.iconBorder+";margin:"+b.iconMargin+"px 0 0 "+b.iconMargin+"px;background:"+b.iconBackground+";border-radius:"+b.iconBorderRadius+"px;-moz-border-radius:"+b.iconBorderRadius+"px}");c.push(a+b.classIcon+":hover,"+a+b.classIcon+":focus{background:"+b.iconBackgroundHover+";border:"+b.iconBorderThickness+"px "+b.iconBorderHover+
"}");c.push(a+b.classIcon+":active,"+a+b.classIcon+".active{cursor:default;background:"+b.iconBackgroundActive+";border:"+b.iconBorderThickness+"px "+b.iconBorderActive+"}");c.push(a+b.classIcon+".active:focus{border:"+b.iconBorderThickness+"px "+b.iconBorderFocus+"}");return c.join("")};a.addIcon=function(a,b,k,g,e){return $("<div class='"+this._options.classIcon+"' tabIndex='0' title='"+b+"'><div class='"+a+"' style='margin-top:"+(this._options.iconHeight-g)/2+"px;margin-left:"+(this._options.iconWidth-
k)/2+"px'></div></div>").appendTo(this._menubar).click(function(a){e();$(this).toggleClass("active");a.preventDefault()}).keydown(function(a){if(a.which===c.keyMapKeydown.enter||a.which===c.keyMapKeydown.space)e(),$(this).toggleClass("active"),a.preventDefault()})}})();jx.grid.CheckManager={};
(function(){function e(a){function f(){var a=this._options,d=this._isRadio=a.isRadio=!!a.isRadio;this._hasMaster=a.master=!d&&!!a.master;this._col=a.colDef;this._key=this._col.key;this._cssClass=a.classCheck;this._cssClassMaster=a.classMasterCheck;this._name=a.name||d&&"radio"+this.mid||null}this.addEventListener("afteroption",f);b.call(this,a);this.removeEventListener("afteroption",f)}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util"),b=goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.CheckManager",
e);h._add("CheckManager",e);goog.inherits(e,b);e.getInstance=function(a){return new e(a)};var a=e.prototype;a._init=function(){this._map={};this.disabledmap={};this._count=0;this._disabled=!1;var a,b=h._CONST;a=this.getColMgr();a.getByKey(this._col.key)||a.addAt(this._options.colIdx,this._col);if(c.isNull(b._checkboxWidth))a=c.calCheckSize(),b._checkboxWidth=a.checkboxW,b._checkboxHeight=a.checkboxH,b._radioWidth=a.radioW,b._radioHeight=a.radioH};a._bindEvents=function(){var a=this._col.key,b;b={onAfterSetDatalist:this.uncheckAll,
onIdChange:this._onIdChange,onIdListChange:this._onIdListChange,onRemoveDatarow:this._onRemoveDatarow,onRemoveDatalist:this._onRemoveDatalist};b["onRenderCell_"+a+"_prepend"]=this._onRenderCell;b["keydownColSel_"+a+"_"+c.keyMapKeydown.space]=this._keydownColSel;if(this._hasMaster)b["onRenderHeader_"+a+"_prepend"]=this._onRenderHeader,b.onRenderHeadersComplete=this._getMaster;this.bindGridEvent(b,this)};a._defaultOptions=function(){return{colDef:{key:"checkbox",width:20,name:" ",noTitle:!0,resizable:!1,
sorter:null,filter:null,noSearch:!0,editor:null,inputOnCreate:!1},colIdx:0,name:void 0,classCheck:"checkmg",classMasterCheck:"checkm",master:!0,isRadio:!1}};a._beforeDispose=function(){this.dispose()};a._beforeCreateCss=function(a){var b,c,g=a.css;this._isRadio?(a=h._CONST._radioWidth,b=h._CONST._radioHeight):(a=h._CONST._checkboxWidth,b=h._CONST._checkboxHeight);c="*overflow:hidden;padding:0;width:"+a+"px;height:"+b+"px;";g.push(this.getView()._getCellSelector()+" ."+this._cssClass+"[mid='"+this.mid+
"']{"+c+"margin:"+(this.getView()._getRowInnerHeight()-b)/2+"px 0 0 "+(this._col.width-this.getView()._getPadding()-a)/2+"px}#"+this.mid+"h{"+c+"margin:"+(this.getHeader()._options.height-b)/2+"px 0 0 0}")};a.checkList=function(a,b){if(!b)a=this.getDataMgr().mapList(a).mapped;for(var c=0,g=a.length;c<g;c++)this.check(a[c],!0)};a.setCheckList=function(a,b){this.uncheckAll();this.checkList(a,b)};a.getCheckList=function(){return c.toArray(this._map)};a.getDisableds=function(){return c.toArray(this.disabledmap)};
a.toggleCheckAll=function(){this.isCheckedAll()?this.uncheckAll():this.checkAll()};a.checkAll=function(){this._hasMaster&&e._check(this._master);e._check(this.getCheckboxes());for(var a=this.getAllData(),b=a.length,c=this.getIdKey(),g=this._map,h=0;h<b;h++)g[a[h][c]]=a[h];this._count=b};a.uncheckAll=function(){this._hasMaster&&e._uncheck(this._master);e._uncheck(this.getCheckboxes());this._map={};this._count=0};a.toggleCheck=function(a,b){b||(a=this.getDataMgr().map(a));this.isChecked(a,!0)&&!this._isRadio?
this.uncheck(a,!0):this.check(a,!0)};a.toggleDisable=function(a,b){b||(a=this.getDataMgr().map(a));this.isDisabled(a,!0)?this.enable(a,!0):this.disable(a,!0)};a.toggleById=function(a){this.toggleCheck(this.getDataMgr().getById(a),!0)};a.check=function(a,b){b||(a=this.getDataMgr().map(a));this._add(a)&&(e._check(this.getCheckbox(a)),this._updateMaster(),this.triggerGridEvent("onCheckChange",[a,!0]))};a.uncheck=function(a,b){b||(a=this.getDataMgr().map(a));this._remove(a)&&(e._uncheck(this.getCheckbox(a)),
this._hasMaster&&e._uncheck(this._master),this.triggerGridEvent("onCheckChange",[a,!1]))};a.disable=function(a,b){var c=this.getDataMgr();b||(a=c.map(a));var c=c.getId(a),g=this.disabledmap;g.hasOwnProperty(c)||(g[c]=a,e.disableNode(this.getCheckbox(a)),this.triggerGridEvent("onDisableCheck",[a]))};a.enable=function(a,b){var c=this.getDataMgr();b||(a=c.map(a));var c=c.getId(a),g=this.disabledmap;g.hasOwnProperty(c)&&(delete g[c],e.enableNode(this.getCheckbox(a)),this.triggerGridEvent("onEnableCheck",
[a]))};a._updateMaster=function(){this._hasMaster&&e._setCheck(this._master,this.isCheckedAll())};a._add=function(a){var b=a[this.getIdKey()];if(this._map.hasOwnProperty(b))return!1;if(this._isRadio)this._map={},this._count=0;this._map[b]=a;this._count++;return!0};a._remove=function(a){var a=a[this.getIdKey()],b=this._map;if(!b.hasOwnProperty(a))return!1;delete b[a];this._count--;return!0};a.isChecked=function(a,b){var c=this.getDataMgr();b||(a=c.map(a));return this._map.hasOwnProperty(c.getId(a))};
a.isDisabled=function(a,b){var c=this.getDataMgr();b||(a=c.map(a));return this.disabledmap.hasOwnProperty(c.getId(a))};a.splitChecked=function(a,b){if(!b)a=this.getDataMgr().mapList(a).mapped;for(var c=[],g=[],e=0,h=a.length,o=this.getIdKey(),l,n=this._map;e<h;e++)n.hasOwnProperty((l=a[e])[o])?c.push(l):g.push(l);return{checked:c,unchecked:g}};a.isCheckedAll=function(){return this._count!==0&&this._count===this.getAllData().length?!0:!1};a.removeChecked=function(){return this.getDataMgr().removeList(this.getCheckList())};
a._getMaster=function(){this._master=$(document.getElementById(this.mid+"h"))};a._getChecks=function(a){for(var b=a.length,c=[],g=0,e=this.getColMgr().getIdxByKey(this._key);g<b;g++)c.push(a[g].childNodes[e].childNodes[0]);return c};a.getCheckboxes=function(){return this._getChecks(this.getView().getRenderedRows())};a.getCheckboxById=function(a){if(a=this.getView().getRowById(a))return a.childNodes[this.getColMgr().getIdxByKey(this._key)].childNodes[0]};a.getCheckbox=function(a){return this.getCheckboxById(this.getDataMgr().getId(a))};
a.getCheckboxByIdx=function(a){return this.getCheckboxById(this.getDataMgr().getIdByIdx(a))};a._onRemoveDatarow=function(a){this.uncheck(a,!0);this.enable(a,!0)};a._onRemoveDatalist=function(a){for(var b=0,c=a.length;b<c;b++)this.uncheck(a[b],!0),this.enable(a[b],!0)};a._onIdChange=function(a,b,c){var g=this._map,e=this.disabledmap;g.hasOwnProperty(b)&&(delete g[b],g[c]=a);e.hasOwnProperty(b)&&(delete e[b],e[c]=a)};a._onIdListChange=function(a,b,c){for(var g=0,e=a.length,h=this._map,o=this.disabledmap,
l,n;g<e;g++)l=a[g],n=b[g],h.hasOwnProperty(n)&&(delete h[n],h[l[c]]=l),o.hasOwnProperty(n)&&(delete o[n],o[l[c]]=l)};a._keydownColSel=function(a,b,c){a.preventDefault();if(b&&c){var a=this.isChecked(c.getDatarow(),!0),g,c=this.getDataList();if(this._isRadio)for(g in b){if(b.hasOwnProperty(g)&&g!=="length"){this.check(c[g],!0);break}}else for(g in b)b.hasOwnProperty(g)&&g!=="length"&&(a?this.uncheck(c[g],!0):this.check(c[g],!0))}};a._onRenderHeader=function(a){a.push("<input id='"+this.mid+"h' type='checkbox' tabIndex='-1' onclick='JGM.m.CheckManager."+
this.mid+".toggleCheckAll();' class='"+this._cssClass+" "+this._cssClassMaster+"' mid='"+this.mid+"'");this.isCheckedAll()&&a.push(" checked='checked'");this._disabled&&a.push(" disabled='disabled'");a.push("/>")};a._onRenderCell=function(a,b,c,g,e){e.push("<input tabIndex='-1' onclick=\"JGM.m.CheckManager."+this.mid+".toggleById('"+c[this.getIdKey()]+"')\" type='"+(this._isRadio?"radio":"checkbox")+"' class='"+this._cssClass+"' mid='"+this.mid+"'");this._name&&e.push(" name='"+this._name+"'");this.isChecked(c,
!0)&&e.push(" checked='checked'");(this._disabled||this.isDisabled(c,!0))&&e.push(" disabled='disabled'");e.push("/>")};a.disableAll=function(){if(!this._disabled)this._disabled=!0,this._hasMaster&&this._master.attr("disabled","disabled"),$(this.getCheckboxes()).attr("disabled","disabled")};a.enableAll=function(){if(this._disabled)this._disabled=!1,this._hasMaster&&this._master.removeAttr("disabled"),$(this.getCheckboxes()).removeAttr("disabled")};e._check=function(a){a&&Util$.safe$(a).attr("checked",
"checked")};e._uncheck=function(a){a&&Util$.safe$(a).removeAttr("checked")};e.disableNode=function(a){a&&Util$.safe$(a).attr("disabled","disabled")};e.enableNode=function(a){a&&Util$.safe$(a).removeAttr("disabled")};e._setCheck=function(a,b){b?e._check(a):e._uncheck(a)}})();jx.grid.Collapser={};
(function(){function e(a){this.mid=a.mid;this.grid=a.grid;this.grid.collapser=this;this._options=h._extend({key:void 0,colDef:{key:"collapser",width:120,name:" ",noSearch:!0},colIdx:0,urlCollapsed:this.grid._options.imageUrl+"collapsed.png",urlCollapsedHover:this.grid._options.imageUrl+"collapsed-hover.png",urlExpanded:this.grid._options.imageUrl+"expanded.png",urlExpandedHover:this.grid._options.imageUrl+"expanded-hover.png",width:6,padding:5,classCollapser:"jgrid-collapser",classCollapsed:"collapsed",
classExpanded:"expanded",classIndent:"indent",classMasterCollapser:"master",indentSize:12,beginCollapsed:!1,CheckManager:void 0,Tree:void 0},a.options);if(this._options.CheckManager)this.checkMgr=h.create("CheckManager",{grid:this.grid,options:this._options.CheckManager}),delete this._options.CheckManager,c.isNull(this._options.key)&&this._options.colIdx++;this._tree=new b({list:this.grid.dataMgr.all,options:this._options.Tree})}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util");
goog.getObjectByName("jx.grid.BaseModule");var b=goog.getObjectByName("jx.struct.Tree");goog.exportSymbol("JGM.module.Collapser",e);h._add("Collapser",e);e.getInstance=function(a){return new e(a)};var a=e.prototype;a.__init=function(){c.isNull(this._options.key)&&this.grid.colDefMgr.addAt(this._options.colIdx,this._options.colDef);this._makeTree();this._filterRefresh();this.key=c.isNull(this._options.key)?this._options.colDef.key:this._options.key;this.bindEvents()};a.bindEvents=function(){var a=
this.key,b;b={onAfterFilter:this._onAfterFilter,onCreateCss:this._onCreateCss,onDestroy:this._destroy,onAfterSetDatalist:this._onAfterSetDatalist,onAddDatarow:this._onAddDatarow,onAddDatalist:this._onAddDatalist,onUpdateDatarow:this._onUpdateDatarow,onUpdateDatalist:this._onUpdateDatalist,onRemoveDatarow:this._onRemoveDatarow,onRemoveDatalist:this._onRemoveDatalist,onRenderHeadersComplete:this._getMaster};b["onRenderHeader_"+a+"_prepend"]=this._onRenderHeader;b["clickHeaderValid_"+a]=this._clickHeaderValid;
b["onRenderCell_"+a+"_prepend"]=this._onRenderCell;b["dblclickCanvas_"+a]=this._dblclickCanvas;b["keydownColSel_"+a+"_"+c.keyMapKeydown.space]=this._keydownColSel;if(c.isNotNull(this.checkMgr))b.onCheckChange=this._onCheckChange;this.grid.event.bind(b,this)};a._destroy=function(){h._destroy(this,{name:"Collapser",path:"collapser",module:"tree",$:"master",property:"checkMgr",map:"options"})};a._onCreateCss=function(){var a="#"+this.grid.mid+" .",b=this._options,e=a+this.grid.view._options.classRow+
" .",g=a+b.classCollapser,h=g+"."+b.classExpanded,i=g+"."+b.classCollapsed,o=this.grid.view._getRowInnerHeight(),l=[],n=this.grid.header;l.push(a+b.classIndent+"{height:"+o+"px;float:left;}");l.push(g+"{width:"+b.width+"px;float:left;padding:0 "+b.padding+"px}");l.push(e+b.classCollapser+"{height:"+o+"px}");l.push(h+"{background:url("+b.urlExpanded+") no-repeat center transparent}");l.push(h+":hover{background:url("+b.urlExpandedHover+") no-repeat center transparent}");l.push(i+"{background:url("+
b.urlCollapsed+") no-repeat center transparent}");l.push(i+":hover{background:url("+b.urlCollapsedHover+") no-repeat center transparent}");c.isNotNull(n)&&l.push(a+n._options.classColHeader+" ."+b.classCollapser+"{height:"+n._options.height+"px}");return l.join("")};a._onAfterSetDatalist=function(){this._tree.destroy();this._tree=new b({list:this.grid.dataMgr.all,options:this._options.Tree});this._makeTree()};a._onAddDatarow=function(a){a=this._tree.createNode(a);a._collapsed=this._options.beginCollapsed;
a._shown=c.isNotNull(a.parent)&&(a.parent===a.tree.root||a.parent._shown&&!a.parent._collapsed)?!0:!1;c.isNotNull(a.parent)&&a.parent.children.length===1&&this.grid.view.rerenderCellByIdAndKey(this.grid.dataMgr.getId(a.parent.data),this.key);a._collapsed===!0||a._shown===!1?a.traverseChildren({fn:function(){this._shown=!1}}):a.traverseChildren({fn:function(a){c.isNotNull(this.parent)&&(this.parent===this.tree.root||this.parent._shown&&!this.parent._collapsed)?this._shown=!0:(a.propagate=!1,this.traverse({fn:function(){this._shown=
!1}}))}});this.grid.event.trigger("onCollapserTreeChange")};a._onAddDatalist=function(a){for(var b=0,e=a.length,g=this._tree,h=g.root,i=this._options.beginCollapsed,o=this.key,l=this.grid.view,n=this.grid.dataMgr,m,q=[],p;b<e;b++)m=g.createNode(a[b]),m._collapsed=i,c.isNotNull(m.parent)&&m.parent.children.length===1&&q.push(m.parent.data);if(l!==void 0){b=0;for(e=q.length;b<e;b++)l.rerenderCellByIdAndKey(n.getId(q[b]),o)}h.traverseChildren({fn:function(a){p=this.parent;c.isNotNull(p)&&(p===h||p._shown&&
!p._collapsed)?this._shown=!0:(a.propagate=!1,this.traverse({fn:function(){this._shown=!1}}))}});this.grid.event.trigger("onCollapserTreeChange")};a._onUpdateDatarow=function(a,b,e){var g=this._tree,h=g._options.nodeKey,i=g._options.parentKey,o;b.hasOwnProperty(h)&&(o=g.getNodeByNodeId(e[h]),g.changeNodeId(o,e[h],b[h]),this.grid.event.trigger("onCollapserTreeChange"));b.hasOwnProperty(i)&&(c.isNull(o)&&(o=g.getNode(a)),g.changeParentId(o,e[i],b[i]),this.grid.event.trigger("onCollapserTreeChange"))};
a._onUpdateDatalist=function(a,b,e){for(var b=this._tree,g=b._options.nodeKey,h=b._options.parentKey,i,o,l,n=[],m=[],q=0,p=a.length;q<p;q++)i=e[q],o=a[q],l=void 0,i.hasOwnProperty(g)&&(c.isNull(l)&&(l=b.getNodeByNodeId(i[g])),n.push({node:l,before:i[g],newId:o[g]})),i.hasOwnProperty(h)&&(c.isNull(l)&&(l=b.getNode(o)),m.push({node:l,before:i[h],newId:o[h]}));a=n.length;e=m.length;if(a+e!==0){if(a+e>10)b.reattach();else{for(q=0;q<a;q++)g=n[q],b.changeNodeId(g.node,g.before,g.newId);for(q=0;q<e;q++)g=
m[q],b.changeParentId(g.node,g.before,g.newId)}this.grid.event.trigger("onCollapserTreeChange")}};a._onRemoveDatarow=function(a){this._tree.destroyNodeByData(a);this.grid.event.trigger("onCollapserTreeChange")};a._onRemoveDatalist=function(a){for(var b=0,c=a.length,g=this._tree;b<c;b++)g.destroyNodeByData(a[b]);this.grid.event.trigger("onCollapserTreeChange")};a._onAfterFilter=function(a,b){var e=this._tree;if(b.length>0){var g=this.grid.dataMgr,h=a.length,i=g._idToIdx,o=g.idKey,l,n=0,m=function(e){c.isNotNull(this.parent)?
(l=this.parent.data,c.isNotNull(l)&&!g.has(l)&&(a.push(l),b.remove(l),i[l[o]]=-1)):e.stop=!0};g._reidx();for(e.reattach();n<h;n++)e.getNode(a[n]).traverse({up:!0,fn:m});e.reattach(a);e.sortList(a);this.grid.event.trigger("onCollapserTreeChange")}else e.reattach(a),this.grid.event.trigger("onCollapserTreeChange"),this._filter(a,b)};a._filter=function(a,b){a.length=0;this._tree.root.traverseChildren({fn:function(){this._shown?a.push(this.data):b.push(this.data)}})};a.toggleById=function(a){if(c.isNotNull(a))return this.toggleCollapse(this._tree.getNode(this.grid.dataMgr.getById(a)))};
a.toggle=function(a){return this.toggleById(this.grid.dataMgr.getId(a))};a.toggleByIdx=function(a){return this.toggleById(this.grid.dataMgr.getIdByIdx(a))};a._clickHeaderValid=function(a){if(c.hasTagAndClass(a.target,"DIV",this._options.classCollapser))return!1};a._dblclickCanvas=function(a,b){c.hasTagAndClass(a.target,"DIV",this._options.classCollapser)||this.toggleCollapse(this._tree.getNode(b.getDatarow()))};a._keydownColSel=function(a,b,e){a.preventDefault();if(c.isNotNullAnd(b,e)){var a=this._tree,
e=a.getNode(e.getDatarow())._collapsed,g=this.grid.dataMgr.datalist,h,i;for(i in b)b.hasOwnProperty(i)&&i!=="length"&&(h=a.getNode(g[i]),e?this.expand(h):this.collapse(h));this._filterRefresh()}};a._makeTree=function(){var a=this._tree,b,c;a.__init();c=a.map;a=a.root;if(this._options.beginCollapsed){for(b in c)if(c.hasOwnProperty(b))c[b]._collapsed=!0,c[b]._shown=!1;c=a.children;var g=c.length;for(b=0;b<g;b++)c[b]._shown=!0;a._collapsed=!0}else{for(b in c)if(c.hasOwnProperty(b))c[b]._collapsed=!1,
c[b]._shown=!0;a._collapsed=!1}this.grid.event.trigger("onCollapserTreeChange")};a._onRenderHeader=function(a){a.push("<div id='"+this.mid+"h' onmousedown='JGM.m.Collapser."+this.mid+".toggleMaster();' class='"+this._options.classCollapser+" "+this._options.classMasterCollapser);this._tree.root._collapsed?a.push(" "+this._options.classCollapsed):a.push(" "+this._options.classExpanded);a.push("'></div>")};a._onRenderCell=function(a,b,e,g,h){a=this._tree.getNode(e);if(c.isNull(a))return null;e=this.grid.dataMgr.getId(e);
b=this._options;h.push("<div class='"+b.classIndent+"' style='width:"+b.indentSize*a.getLevel()+"px;'></div><div ");a.isLeaf()?h.push("class='"+b.classCollapser):(h.push('onmousedown="JGM.m.Collapser.'+this.mid+".toggleById('"+e+"');\" class='"+b.classCollapser),a._collapsed?h.push(" "+b.classCollapsed):h.push(" "+b.classExpanded));h.push("'></div>")};a.getLevel=function(a){a=this._tree.getNode(a);return c.isNull(a)?null:a.getLevel()};a.collapse=function(a,b){if(!(a._collapsed===!0||a.isLeaf())){a._collapsed=
!0;a.traverseChildren({fn:function(a){this._shown=!1;this._collapsed&&(a.propagate=!1)}});var c=this._getCollapser(a.data);c.length>0&&this._setClass(c,!0);if(!b&&a.parent===this._tree.root&&this._tree.root._collapsed===!1)this._setClass(this._master,this._tree.root._collapsed=!0)}};a.expand=function(a,b){if(!(a._collapsed===!1||a.isLeaf())){a._collapsed=!1;a.traverseChildren({fn:function(a){this._shown=!0;this._collapsed&&(a.propagate=!1)}});var c=this._getCollapser(a.data),g=this._tree;c.length>
0&&this._setClass(c,!1);if(!b&&a.parent===g.root){for(var c=g.root.children,e=c.length,h=0;h<e;h++)if(c[h]._collapsed)return;this._setClass(this._master,g.root._collapsed=!1)}}};a._setClass=function(a,b){if(!c.isNull(a)){var e=this._options;b?a.addClass(e.classCollapsed).removeClass(e.classExpanded):a.addClass(e.classExpanded).removeClass(e.classCollapsed)}};a.toggleMaster=function(){var a=this._tree.root,b=a.children,c=b.length,g=0;if(a._collapsed){for(;g<c;g++)this.expand(b[g],!0);this._setClass(this._master,
a._collapsed=!1)}else{for(;g<c;g++)this.collapse(b[g],!0);this._setClass(this._master,a._collapsed=!0)}this._filterRefresh()};a.toggleCollapse=function(a){a=a._collapsed?this.expand(a):this.collapse(a);this._filterRefresh();return a};a._onCheckChange=function(a,b){var e=this._tree.getNode(a),g=this.checkMgr,j=[],i;b?(e.traverseChildren({fn:function(a){g.isChecked(this.data)?a.propagate=!1:(g._add(this.data),c.isNotNull(i=g.getCheckbox(this.data))&&j.push(i))}}),e.traverseParent({up:!0,fn:function(a){c.isNull(this.data)||
g.isChecked(this.data)?a.stop=!0:(g._add(this.data),c.isNotNull(i=g.getCheckbox(this.data))&&j.push(i))}}),h.CheckManager._check($(j)),g._updateMaster()):(e.traverseChildren({fn:function(a){g.isChecked(this.data)?(g._remove(this.data),c.isNotNull(i=g.getCheckbox(this.data))&&j.push(i)):a.propagate=!1}}),e.traverseParent({up:!0,fn:function(a){if(c.isNull(this.data)||!g.isChecked(this.data))a.stop=!0;else{for(var d=0,b=this.children,f=b.length;d<f;d++)if(g.isChecked(b[d].data)){a.stop=!0;return}g._remove(this.data);
c.isNotNull(i=g.getCheckbox(this.data))&&j.push(i)}}}),h.CheckManager._uncheck($(j)))};a._filterRefresh=function(){this._filter(this.grid.dataMgr.datalist,this.grid.dataMgr.failed);this.grid.dataMgr._finish()};a._getCollapser=function(a){if(c.isNull(a))return $([]);a=c.findFirstByTagAndClass(this.grid.view.getCell(this.grid.dataMgr.getIdx(a),this.grid.colDefMgr.getIdxByKey(this.key)),"DIV",this._options.classCollapser);return a===void 0?$([]):$(a)};a._getMaster=function(){this._master=$(document.getElementById(this.mid+
"h"))}})();jx.grid.Cell={};
(function(){function e(a){this.grid=a.grid;this._datarow=a.datarow;this._colDef=a.colDef;this.__init(a)}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util"),b=goog.getObjectByName("jx.lang.Disposable");goog.exportSymbol("jx.grid.Cell",e);h._add("Cell",e);goog.inherits(e,b);e.getInstance=function(a){return new e(a)};var h=e.prototype,a=b.prototype.dispose;h.dispose=function(){a.call(this)};h.__init=function(a){if(c.isNull(this._datarow))if(c.isNotNull(a.row))this._datarow=this.grid.dataMgr.getByIdx(a.row);
else if(c.isNotNull(a.node))this._datarow=this.grid.dataMgr.getByNode(a.node.parentNode);else if(c.isNotNull(a.$))this._datarow=this.grid.dataMgr.getByNode(a.$[0].parentNode);if(c.isNull(this._colDef))if(c.isNotNull(a.col))this._colDef=this.grid.colDefMgr.get(a.col);else if(c.isNotNull(a.node))this._colDef=this.grid.colDefMgr.get(c.index(a.node));else if(c.isNotNull(a.$))this._colDef=this.grid.colDefMgr.get(c.index(a.$[0]));if(c.isNullOr(this._datarow,this._colDef)&&c.isNotNull(a.event)&&(a=this.grid.view._getClosestCell(a.event.target),
c.isNotNull(a)))this._datarow=this.grid.dataMgr.getByNode(a.parentNode),this._colDef=this.grid.colDefMgr.get(c.index(a))};h.destroy=function(){this.dispose()};h.getRowIdx=function(){if(c.isNotNull(this._datarow))return this.grid.dataMgr.getIdx(this._datarow)};h.getColIdx=function(){if(c.isNotNull(this._colDef))return this.grid.colDefMgr.getIdx(this._colDef)};h.getNode=function(){if(c.isNotNullAnd(this._datarow,this._colDef))return this.grid.view.getCellByIdAndKey(this.grid.dataMgr.getId(this._datarow),
this._colDef.key)};h.getRowNode=function(){return this.grid.view.getRow(this._datarow)};h.get$=function(){var a=this.getNode();return a!==void 0?$(a):$([])};h.getDatarow=function(){return this._datarow};h.getColDef=function(){return this._colDef};h.getKey=function(){if(c.isNotNull(this._colDef))return this._colDef.key};h.getId=function(){return this.grid.dataMgr.getId(this._datarow)};h.getValue=function(){if(c.isNotNullAnd(this._datarow,this._colDef))return this._datarow[this._colDef.key]};h.isValid=
function(){return c.isNotNull(this.getNode())};h.isInvalid=function(){return c.isNull(this.getNode())};h.isEmpty$=function(){return this.get$().length===0};h.has$=function(){return this.get$().length!==0};h.equals=function(a){return a&&this._datarow&&this._datarow===a._datarow&&this._colDef&&this._colDef===a.__colDef}})();jx.grid.EditManager={};jx.grid.Editor={};
(function(){function e(a){this.mid=a.mid;this.grid=a.grid;this.grid.editMgr=this;this._options=c._extend({classEdit:"jgrid-edit",classCellEditable:"jgrid-editable",classCellNotEditable:"jgrid-notEditable",editableBgEnabled:!1,notEditableBgEnabled:!1,editableBg:"#FFF",notEditableBg:"#F6F6F6",deleteEnabled:!1,editIconEnabled:!0,urlEditIcon:this.grid._options.imageUrl+"editable-small.png",classEditIcon:"edit-icon",editIconWidth:12,editIconPadding:3,basicBackground:"#FFF9D7",classSuccess:"edit-success",
successBackground:"#cdf7b6",classFailure:"edit-failure",failureBackground:"#ffcec5"},a.options);this._beginEditKeys=b.which(["number","alphabet","del","backspace"]);this.__init()}function h(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}var c=goog.getObjectByName("jx.grid"),b=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.EditManager",e);goog.exportSymbol("jx.grid.Editor",h);c._add("EditManager",e);c._add("Editor",h);e.getInstance=function(a){return new e(a)};
var a=e.prototype;a.__init=function(){this.bindEvents()};a.bindEvents=function(){var a={onGetColCellClass:this._onGetColCellClass,keydownCanvas:this._keydownCanvas,onDestroy:this._destroy,dblclickCanvas:this._dblclickCanvas,onCreateDynamicCss:this.onCreateDynamicCss,"onBeforeNavigate onBeforeRefresh onBeforeSelect":this.commit,onBeforeFocusCanvas:this.notActive};b.isNull(this.grid.selMgr)?a.onCreateCss=this._onBeforeCreateSelCss:a.onBeforeCreateSelCss=this._onBeforeCreateSelCss;if(this._options.deleteEnabled)a["keydownSel_"+
b.keyMapKeydown.del]=this._deleteContents;if(this._options.editIconEnabled)for(var f=this.grid.colDefMgr.get(),c=f.length,g=0;g<c;g++)if(b.isNotNull(f[g].editor))a["onRenderHeader_"+f[g].key+"_prepend"]=this._onRenderHeader;this.grid.event.bind(a,this)};a._destroy=function(){this._deleteEditor();c._destroy(this,{name:"EditManager",path:"editMgr",map:"beginEditKeys _options"})};a._onBeforeCreateSelCss=function(){var a="#"+this.grid.mid+" .",b=this._options,c=[],g=this.grid.view._getRowInnerHeight();
c.push(this.grid.view._getCellSelector()+"."+b.classEdit+"{background:"+b.basicBackground+"}");c.push(a+b.classEdit+" input{position:absolute;z-index:10;top:0;padding:0;border:0;margin:0;background:"+b.basicBackground+";height:"+g+"px;line-height:"+g+"px}");b.editableBgEnabled&&c.push(a+b.classCellEditable+"{background:"+b.editableBg+"}");b.notEditableBgEnabled&&c.push(a+b.classCellNotEditable+"{background:"+b.notEditableBg+"}");b.editIconEnabled&&c.push(a+b.classEditIcon+"{float:left;position:absolute;left:0;top:0;padding:0 "+
b.editIconPadding+"px;width:"+b.editIconWidth+"px;height:"+g+"px;background:url("+b.urlEditIcon+") no-repeat center transparent}");c.push(a+b.classSuccess+"{background:"+b.successBackground+"}");c.push(a+b.classFailure+"{background:"+b.failureBackground+"}");return c.join("")};a.onCreateDynamicCss=function(){for(var a=this.grid.view._getCellSelector(),f=this.grid.view._getPadding(),c=this.grid.colDefMgr.get(),g=0,e="";g<c.length;g++)b.isNotNull(c[g].editor)&&(e+=a+".k_"+c[g].key+" .basic-editor{width:"+
(c[g].width-2*f)+"px}");return e};a._onRenderHeader=function(a){a.push("<span class='"+this._options.classEditIcon+"'></span>")};a._onRenderCell=function(a,b,c,g,e){this.grid.dataMgr.isReal(c)&&e.push("<span class='"+this._options.classEditIcon+"' title='Å¬¸¯ÇÏ¿© ¿¡µðÆÃÀ» ½ÃÀÛÇÕ´Ï´Ù' onclick='JGM.m.EditManager."+this.mid+'.beginEdit("'+c[this.grid.dataMgr.idKey]+'","'+g.key+"\")'></span>")};a.cancelMouseEvent=function(a){return!b.hasTagAndClass(a.target,"DIV",this._options.classEditIcon)};a.beginEdit=function(a,
b){this.begin(c.create("Cell",{grid:this.grid,datarow:this.grid.dataMgr.getById(a),colDef:this.grid.colDefMgr.getByKey(b)}))};a._dblclickCanvas=function(a,b){b.isEdited()||this.begin(b)};a._keydownCanvas=function(a){this.active()?a.which===b.keyMapKeydown.esc&&this.cancel():!a.ctrlKey&&!a.altKey&&b.isNotNull(this.grid.selMgr)&&(a.which===b.keyMapKeydown.del&&this._options.deleteEnabled?this._deleteContent(this.grid.selMgr.getCell()):this._beginEditKeys[a.which]?this.begin(this.grid.selMgr.getCell()):
a.which===b.keyMapKeydown.f2&&(a.preventDefault(),this.begin(this.grid.selMgr.getCell())))};a.active=function(){return b.isNotNull(this.editor)};a.notActive=function(){return b.isNull(this.editor)};a._isEdited=function(a){return this.active()&&this.editor.cell.equals(a)};a._onGetColCellClass=function(a){return b.isNotNull(a.editor)?this._options.classCellEditable:this._options.classCellNotEditable};c.Cell.prototype.isEdited=function(){return this.grid.editMgr._isEdited(this)};c.Cell.prototype.setValue=
function(a){var f=this.getDatarow(),c=this.getKey(),g;b.isNotNullAnd(f,c)&&(g=this.grid.dataMgr.updateByKey(f,c,a,{noSort:!0,noFilter:!0,noRerender:!0}),g===!0&&this.grid.view.rerenderRow(f));return g};a.isEditable=function(a){return b.isNotNull(a)&&b.isNotNull(a.getColDef().editor)&&this.grid.dataMgr.isReal(a.getDatarow())};a.begin=function(a){this.active()&&this.commit();if(this.isEditable(a)){this.editor=a.getColDef().editor;this.editor.cell=a;this.editor.grid=this.grid;var b=a.getNode();this.editor.before=
b.innerHTML;b.innerHTML=this.editor.edit(a.getValue());a.get$().addClass(this._options.classEdit);this.editor.focus()}};a.cancel=function(){if(this.active()){var a=this.editor.cell;a.getNode().innerHTML=this.editor.before;this._deleteEditor();a.get$().removeClass(this._options.classEdit);this.grid.view.focus()}};a._deleteEditor=function(){b.isNotNull(this.editor)&&(delete this.editor.grid,delete this.editor.cell,delete this.editor.before,delete this.editor)};a.commit=function(){if(!this.beingCommitted&&
this.active()){this.beingCommitted=!0;var a=this.editor.cell,b=this.editor.value(a.getNode()),c;if(b==a.getValue())this.cancel();else{var b=a.setValue(b),g;c=a.get$();b instanceof Error?(this.cancel(),g=this._options.classFailure):(this._deleteEditor(),this.grid.view.focus(),g=this._options.classSuccess,this.grid.printMessage("Successfully Updated."));c.addClass(g);setTimeout(function(){c.removeClass(g)},1E3)}a.get$().removeClass(this._options.classEdit);this.beingCommitted=!1}};a._deleteContent=
function(a){if(!this.active()&&this.isEditable(a)){var b=a.getColDef();a.getValue()!==b.defaultValue&&a.setValue(b.defaultValue)}};a._deleteContents=function(a,f,c){if(!this.active()){var a={},f={},g=[],e,h,o,l,n,m,q;a:for(e in c)if(c.hasOwnProperty(e)&&e!=="length")for(q in l=o=h=void 0,m=c[e],m)if(m.hasOwnProperty(q)&&!(q==="length"||f.hasOwnProperty(q))){n=m[q].cell;if(b.isNull(h)&&(h=n.getColDef(),o=h.defaultValue,l=h.key,b.isNull(h.editor)))continue a;n=b.isNotNull(a[q])?a[q].datarow:n.getDatarow();
this.grid.dataMgr.isReal(n)?o!==n[l]&&(b.isNull(a[q])&&(a[q]={datarow:n,change:{}},g.push(a[q])),a[q].change[l]=o):f[q]=!0}g.length!==0&&this.grid.dataMgr.updateList(g)}};h.getInstance=function(a){return new h(a)};a=h.prototype;a.edit=function(a){return"<input type='text' class='basic-editor' value='"+b.ifNull(a,"")+"' style='position:relative'/>"};a.focus=function(){var a=this.cell.getNode().childNodes[0];if(b.isFunction(a.setActive))try{a.setActive()}catch(f){}a.focus();document.activeElement!==
a&&this.cell.get$().children(":eq(0)").focus()};a.value=function(a){return a.childNodes[0].value};a.path=function(){return"JGM.m.Editor."+this.mid};h.numberKeys=b.which(["number","del","backspace"]);h.isNumberKey=function(a){return this.numberKeys[a]?!0:!1};h.numberEdit=function(a){a=a.getValue();return"<input type='text' class='basic-editor' onkeydown='if (!JGM.Editor.isNumberKey(event.which)) return false;' value='"+b.ifNull(a,"")+"'/>"};h.floatKeys=b.which(["number",".","del","backspace"]);h.isFloatKey=
function(a){return this.floatKeys[a]?!0:!1};h.floatEdit=function(a){a=a.getValue();return"<input type='text' class='basic-editor' onkeydown='if (!JGM.Editor.isFloatKey(event.which)) return false;' value='"+b.ifNull(a,"")+"'/>"};h.alphabetKeys=b.which(["alphabet","del","backspace","space"]);h.isAlphabet=function(a){return this.alphabetKeys[a]?!0:!1};h.alphabetEdit=function(a){a=a.getValue();return"<input type='text' class='basic-editor' onkeydown='if (!JGM.Editor.isAlphabet(event.which)) return false;' value='"+
b.ifNull(a,"")+"'/>"}})();jx.grid.ColumnGroup={};
(function(){function e(a){this.mid=a.mid;this.grid=a.grid;this.grid.colGroup=this;this._options=h._extend({key:void 0,padColKeys:[],sumColKeys:[],prefix:"ÇÕ°è: ",Collapser:{indentSize:0}},a.options);this._options.Collapser.key=this._options.key;this._parentMap={};this.__init()}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("jx.grid.Collapser");goog.exportSymbol("jx.grid.ColumnGroup",e);h._add("ColGroup",e);e.getInstance=
function(a){return new e(a)};var b=e.prototype;b.__init=function(){var a=this.grid,d=a.dataMgr,b=this._options;this.bindEvents();a=this.collapser=h.create("Collapser",{grid:a,options:b.Collapser});delete b.Collapser;this._processData(d.all);a.__init();d.refresh()};b.bindEvents=function(){var a;a={onBeforeSetDatalist:this._removeAll,"onAfterSetDatalist onAddDatalist":this._processData,onAddDatarow:this._onAddDatarow,onUpdateDatarow:this._onUpdateDatarow,onUpdateDatalist:this._onUpdateDatalist,onRemoveDatarow:this._onRemoveDatarow,
onRemoveDatalist:this._onRemoveDatalist,onDestroy:this._destroy};if(this._options.sumColKeys.length!==0){var d=this.mid,b=this.grid.dataMgr._consts._notReal,c=0,g,e=this._options.sumColKeys,h=this._options.prefix,o=e.length;for(g=function(a,c,g,e,k){g[b]===d&&k.push(h)};c<o;c++)a["onRenderCell_"+e[c]+"_prepend"]=g;a.onCollapserTreeChange=this._onCollapserTreeChange}this.grid.event.bind(a,this)};b._destroy=function(){h._destroy(this,{name:"ColGroup",path:"colGroup",property:"collapser",map:"parentMap _options"})};
b._processData=function(a){for(var d=a.length,b=this._options.key,e=this._options.padColKeys,g=this.grid.dataMgr,h=g._consts._notReal,i=g.idKey,o=this.collapser,l=o._tree._options.nodeKey,n=o._tree._options.parentKey,m=[],q=0;q<d;q++)this._addData(a[q],b,i,h,l,n,e,m);m.length!==0&&(g.all.pushList(m),g.makeCompositeKeyList(m,!0),g.addListToIdMap(m),c.isNotNull(o)&&o._onAddDatalist(m));return m};b._addData=function(a,d,b,c,g,e,h,o){var l=a[d],n=this._parentMap;n.hasOwnProperty(l)||(d=this._makeParent(a,
d,b,l,c,g,h),o.push(d),n[l]=d);a[g]=a[b];a[e]=this.mid+l};b._makeParent=function(a,d,b,c,g,e,h){var o={},l=0,n=h.length;o[g]=this.mid;o[e]=this.mid+c;o[d]=c;for(o[b]=(this.grid.colDefMgr.getByKey(d).name||d)+": "+c;l<n;l++)o[h[l]]=a[h[l]];return o};b._isParent=function(a){return a[this.grid.dataMgr._consts._notReal]===this.mid};b._removeAll=function(){this._parentMap={}};b._onAddDatarow=function(a){var d=[],b=this._options,c=this.grid.dataMgr,g=this.collapser,e=g._tree._options;this._addData(a,b.key,
c.idKey,c._consts._notReal,e.nodeKey,e.parentKey,b.padColKeys,d);d.length!==0&&(a=d[0],c.all.push(a),c.makeCompositeKey(a,!0),c.addToIdMap(a),g._onAddDatarow(a))};b._onUpdateDatarow=function(a,d,b){if(d.hasOwnProperty(this._options.key)){var c=this._options.key,d=d[c],b=b[c],g=this.mid,c=this.collapser,e=c._tree,h=e._options.parentKey,o={},l={},n=this._parentMap;n.hasOwnProperty(d)||this._onAddDatarow(a);o[h]=g+d;l[h]=g+b;c._onUpdateDatarow(a,o,l);a=e.getNode(n[b]);a.children.length===0&&(this.grid.dataMgr.all.remove(a.data),
delete n[b],c._onRemoveDatarow(a.data))}};b._onUpdateDatalist=function(a,d,b){var c=this._options.key,g=this.mid,e=this.collapser,h=e._tree,o=h._options.parentKey,l,n={};l={};for(var m=[],q=[],p=[],r=0,t=a.length;r<t;r++)l=d[r],l.hasOwnProperty(c)&&(n={},n[o]=g+l[c],m.push(n),l={},l[o]=g+b[r][c],q.push(l),p.push(a[r]));if(p.length!==0){a=this._parentMap;d=[];this._processData(p);e._onUpdateDatalist(p,m,q);r=0;for(t=q.length;r<t;r++)m=q[r][o],a.hasOwnProperty(m)&&(p=h.getNode(a[m]),p.children.length===
0&&(delete a[m],d.push(p.data)));d.length!==0&&(e._onRemoveDatalist(d),this.grid.dataMgr.all.removeList(d))}};b._onRemoveDatarow=function(a){this._isParent(a)?delete this._parentMap[a[this._options.key]]:(a=this.collapser._tree.getNode(a).parent,a.children.length===1&&this.grid.dataMgr.remove(a.data))};b._onRemoveDatalist=function(a){for(var d=0,b=a.length;d<b;d++)this._onRemoveDatarow(a[d])};b._onCollapserTreeChange=function(){for(var a={},d=this._options.sumColKeys,b=d.length,c=0,g=this.grid.dataMgr._consts._notReal,
e=this.mid,h,o,l;c<b;c++)a[d[c]]=0;this.collapser._tree.root.traverseChildren({post:!0,fn:function(){h=this.data;c=0;if(h[g]===e)for(;c<b;c++)o=d[c],h[o]=a[o],a[o]=0;else if(!h.hasOwnProperty(g))for(;c<b;c++){if(typeof(l=h[d[c]])==="string")l=l.toFloat();a[d[c]]+=isNaN(l)?0:l}}})}})();jx.grid.ColumnHeader={};
(function(){function e(a){b.call(this,a)}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util"),b=goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("jx.grid.Grid");goog.exportSymbol("jx.grid.ColumnHeader",e);h._add("ColHeader",e);goog.inherits(e,b);e.getInstance=function(a){return new e(a)};var a=e.prototype;a._init=function(a){this.grid.header=this;this._ctnr=a.container;this._map={};this._resizeMap={};a=this._options;this._mask=$("<div class='"+a.classHeaderMask+"'>").prependTo(this._ctnr);
this._head=$("<div class='"+a.classHeader+"'>").appendTo(this._mask);e._disableSel(this._head)};a._bindEvents=function(){var a,b=this.getColumns(),c=b.length,g=0;for(a={onRenderModules:this._onRenderModules,onAfterRenderModules:this._onAfterRenderModules,mousedown:this._mousedown,mouseup:this._mouseup,dragmove:this._dragmove,onScrollViewportH:this._onScrollViewportH,onScrollViewportV:this._onScrollViewportV,onChangeSorter:this._onChangeSorter,click:this._click,onResizeCol:this._setWidthByKey};g<c;g++)if(b[g].sorter)a["clickHeader_"+
b[g].key]=this._sort;this.bindGridEvent(a,this)};a._defaultOptions=function(a){a=a._options.imageUrl;return{reorderEnabled:!1,reorderSyncEnabled:!0,background:"url("+a+"column-headers-bg.png) repeat-x scroll center",backgroundHover:"url("+a+"column-headers-over-bg.png) repeat-x scroll center",backgroundPlaceholder:"#646464",sortBackground:a+"sort.png",sortRight:4,sortWidth:7,sortBackgroundAsc:a+"sort-asc.png",sortBackgroundDesc:a+"sort-desc.png",font:"15px Arial,Helvetica,sans-serif",height:21,borderThickness:1,
border:"solid #909192",classHeaderMask:"jgrid-header-mask",classHeader:"jgrid-header",classColHeader:"jgrid-colheader",classColHeaderActive:"jgrid-colheader-active",classColHeaderPlaceholder:"jgrid-colheader-placeholder",classInteractive:"interactive",classColHeaderSorted:"jgrid-colheader-sorted",classSort:"jgrid-sort",classSortAsc:"jgrid-sort-asc",classSortDesc:"jgrid-sort-desc",classResizeHandle:"jgrid-resize-handle",resizeHandleWidth:11,style:"",headerStyle:"",scrollerLeft:1E4,scrollerWidth:1E5,
classResizeGuide:"resize-guide",resizeGuideWidth:1,resizeBackground:"black;filter:alpha(opacity=40);opacity:0.4",syncResize:!1,resizeHandleBackground:"black;filter:alpha(opacity=5);opacity:0.05"}};a._beforeDispose=function(){this._head.sortable&&this._head.sortable("destroy");this._destroyResizeHandles();h._destroy(this,{name:"ColHeader",path:"header",$:"resizeGuide _mask _head",property:"ctnr _resizeMap",map:"map _options"});this.dispose()};a._destroyResizeHandles=function(){var a=this._resizeMap,
b;for(b in a)a.hasOwnProperty(b)&&(a[b].remove(),delete a[b]);delete this._resizeKey;delete this._resizeInitX;delete this._resizeHandleInitX;delete this._resizeInitWidth;delete this._resizeInitColWidth};a._beforeCreateCss=function(a){var b="#"+this.grid.mid+" .",c=this._options,g=c.borderThickness+"px "+c.border,e=this.getColumns(),h=e.length,o=0,l="."+c.classHeaderMask,n="."+c.classColHeader,m=c.scrollerLeft,m=c.scrollerLeft,q=c.height+"px",p=c.classColHeaderActive,r={};r[l]={position:"relative",
overflow:"hidden",width:"100%",font:c.font,background:c.background,"border-bottom":g,_append:c.style};r["."+c.classHeader]={position:"relative",overflow:"hidden","white-space":"nowrap",cursor:"default",left:-m+"px",width:c.scrollerWidth+"px","line-height":q};r[n]={position:"relative",overflow:"hidden","float":"left","text-overflow":"ellipsis","text-align":"center",height:q,left:m-this.getView().getScrollLeft()+"px","border-right":g,_append:c.headerStyle};r[n+"."+c.classInteractive+":hover, "+b+p]=
{background:c.backgroundHover};r["."+p]={"border-left":g};r[n+"."+c.classColHeaderPlaceholder]={background:c.backgroundPlaceholder+"!important"};r["."+c.classSort]={position:"absolute",height:q,right:c.sortRight+"px",width:c.sortWidth+"px",background:"url("+c.sortBackground+") no-repeat center transparent"};r["."+c.classSortAsc]={background:"url("+c.sortBackgroundAsc+") no-repeat center transparent"};r["."+c.classSortDesc]={background:"url("+c.sortBackgroundDesc+") no-repeat center transparent"};
r["."+c.classResizeHandle]={"z-index":10,background:c.resizeHandleBackground,cursor:"e-resize",position:"absolute",height:q,width:c.resizeHandleWidth+"px"};for(r["."+c.classResizeGuide]={"z-index":10,position:"absolute",background:c.resizeBackground,width:c.resizeGuideWidth+"px"};o<h;o++)e[o].headerStyle&&(r[n+"#"+this.mid+"h"+e[o].key]={_append:e[o].headerStyle});this.toCssStyles(a.css,r)};a._widthPlus=function(){return this._options.borderThickness};a._onScrollViewportH=function(a){this._head[0].style.left=
-this._options.scrollerLeft-a+"px"};a._onRenderModules=function(){for(var a=this.getColumns(),b=a.length,c=0,g,e=[];c<b;c++)(g=a[c]).hidden||this._render(e,g,c);this._head[0].innerHTML=e.join("");this.triggerGridEvent("onRenderHeadersComplete")};a._onAfterRenderModules=function(){var a=this._options;a.reorderEnabled&&this._initReorder();this._initResizeHandles();this._resizeGuide=$("<div class='"+a.classResizeGuide+"'>").appendTo(this.getView()._mask);this._resizeGuide[0].style.top="0px";this._resizeGuide[0].style.height=
"0px"};a._render=function(a,b,c){var g=this._options,e=b.key,h=b.noName?"":b.name||e,o=this._widthPlus();a.push("<div id='"+this.mid+"h"+e+"' class='"+g.classColHeader+" "+(g.reorderEnabled||b.sorter?" "+g.classInteractive:"")+"' "+(b.noTitle?"":"title='"+(b.title||h)+"' ")+"style='width:"+(this.getView()._getColOuterWidth(c)-o)+"px;' colKey='"+e+"'>");this.triggerGridEvent("onRenderHeader_"+e+"_prepend",[a]);a.push(h);this.triggerGridEvent("onRenderHeader_"+e+"_append",[a]);b.sorter&&a.push("<span class='"+
g.classSort+"'></span>");a.push("</div>")};e._disableSel=function(a){Util$.safe$(a).attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})};a.get=function(a){if(this._map.hasOwnProperty(a))return this._map[a];var b=document.getElementById(this.mid+"h"+a);return!b?$([]):this._map[a]=$(b)};a._updateIndicator=function(a,b){var c=this.get(a),g=this._options,e=c.find("."+g.classSort),h=g.classColHeaderSorted,o=g.classSortAsc,g=g.classSortDesc;b===0?(c.removeClass(h),
e.removeClass(o+" "+g)):(c.addClass(h),b===1?e.addClass(o).removeClass(g):b===2&&e.addClass(g).removeClass(o))};a._closest=function(a){return Util$.safe$(a).closest("div."+this._options.classColHeader,this._head)};a._getDef=function(a){return this.getColMgr().getByKey(a.attr("colKey"))};a._sort=function(a,b,c){a=c.sorter;this.triggerGridEvent("onBeforeColSort_"+c.key+" onBeforeColSort");a.desc=a.desc===!1?!0:!1;this.getDataMgr().refresh({sorter:a});this.getView()._scroll()};a._onChangeSorter=function(a,
b){a!==b&&a&&this._updateIndicator(a.key,0);b&&this._updateIndicator(b.key,b.desc?2:1)};a._initReorder=function(){var a=this,b=this._options,c=this.getColMgr(),g=this._head,e=this.mid.length+1,h=function(a,b){for(var d=$(g).sortable("toArray"),f=d.length,h,i=0;i<f;i++)h=d[i],d[i]=h===""?b.item.attr("id").substring(e):h.substring(e);c.sortByKey(d)};g.sortable({items:"."+b.classColHeader,axis:"x",forcePlaceholderSize:!0,placeholder:b.classColHeaderPlaceholder+" "+b.classColHeader,tolerance:"pointer",
start:function(b,f){f.item.addClass(a._options.classColHeaderActive)},stop:function(b,f){f.item.removeClass(a._options.classColHeaderActive);a._syncResizeHandles()},update:h});b.reorderSyncEnabled&&g.sortable("option","change",h)};a._getDx=function(a,b){var e=a.clientX-this._resizeInitX,g=b.minW,h=c.ifNull(b.maxW,Number.MAX_VALUE),i=this._resizeInitWidth;i+e<g&&(e=g-i);i+e>h&&(e=h-i);return e};a._click=function(a){var b=this._closest(a.target);if(b.length!==0){var c=this._getDef(b),g=c.key;this.getEventMgr().triggerInvalid("clickHeaderValid_"+
g,[a,b,c])||this.triggerGridEvent("clickHeader_"+g+" clickHeader",[a,b,c])}};a._mousedown=function(a){var b=this._options;if(c.hasTagAndClass(a.target,"DIV",b.classResizeHandle)){var e=this._resizeKey=a.target.getAttribute("key");this._resizeInitWidth=this.get(e)[0].clientWidth;this._resizeInitColWidth=this.getColMgr().getByKey(e).width;this._resizeInitX=a.clientX;this._resizeHandleInitX=this._resizeMap[e][0].offsetLeft;this._resizeGuide[0].style.left=Math.floor(this._resizeHandleInitX+(b.resizeHandleWidth-
b.resizeGuideWidth)/2-b.scrollerLeft)+"px";this._resizeGuide[0].style.height=this.getView().getInnerHeight()+"px"}else if(b=this._closest(a.target),b.length){var g=this._getDef(b),e=g.key;this.triggerGridEvent("mousedownHeader",[a,b]);this.triggerGridEvent("mousedownHeader_"+e,[a,b,g])}};a._dragmove=function(a){var b=this._resizeKey;if(b!=null&&(a=this._getDx(a,this.getColMgr().getByKey(b)),!(Math.abs(a)<1))){var c=this._options;this.get(b)[0].style.width=this._resizeInitWidth+a+"px";this._moveResizeHandles(this._resizeHandleInitX+
a-this._resizeMap[b][0].offsetLeft,this.getColMgr().getIdxByKey(b));this._resizeGuide[0].style.left=Math.floor(this._resizeHandleInitX+a+(c.resizeHandleWidth-c.resizeGuideWidth)/2-c.scrollerLeft)+"px";c.syncResize&&this.getView().setWidthByKey(b,this._resizeInitColWidth+a)}};a._mouseup=function(a){var b=this._resizeKey;if(b!=null)this._resizeGuide[0].style.height="0px",a=this._getDx(a,this.getColMgr().getByKey(b)),Math.abs(a)>=1&&this.getView().setWidthByKey(b,this._resizeInitColWidth+a),delete this._resizeKey,
delete this._resizeInitX,delete this._resizeHandleInitX,delete this._resizeInitWidth,delete this._resizeInitColWidth};a._setWidthByKey=function(a,b){this.get(a)[0].style.width=b+this.getView()._colWidthPlus()-this._widthPlus()+"px";this._syncResizeHandles(this.getColMgr().getIdxByKey(a));this.getView()._scroll()};a._syncResizeHandles=function(a){for(var a=a||0,b=this.getView()._getColLefts(),c=this.getColumns(),g=c.length,e=this._resizeMap,h;a<g;a++)if(h=c[a].key,e.hasOwnProperty(h))e[h][0].style.left=
b[a+1]+this._resizeHandleOffset+"px"};a._moveResizeHandles=function(a,b){for(var b=b||0,c=this.getColumns(),g=c.length,e=this._resizeMap,h;b<g;b++)if(h=c[b].key,e.hasOwnProperty(h))h=e[h][0],h.style.left=h.offsetLeft+a+"px"};a._onScrollViewportV=function(){this._resizeGuide[0].style.top=this.getView().getScrollTop()+"px"};a._initResizeHandles=function(){for(var a=this.getColumns(),b=a.length,c=this.getView(),g=c.mid,c=c._getColLefts(),e=this._options,h=this._resizeMap,o,l=0,n=this._resizeHandleOffset=
Math.floor(e.scrollerLeft-e.resizeHandleWidth/2),m=e.classResizeHandle,q=this._head;l<b;l++)if(e=a[l],e.resizable)o=e.key,h[o]=$("<div class='"+m+"' key='"+o+"' ondblclick='JGM.m.ViewportManager."+g+'._autoColWidth("'+o+"\")' style='left:"+(n+c[l+1])+"px' title='"+e.name+" ÄÃ·³ÀÇ ÆøÀ» Á¶ÀýÇÕ´Ï´Ù.'>").appendTo(q)}})();jx.grid.ViewportManager={};
(function(){function e(a){this.mid=a.mid;this._ctnr=a.container;this.grid=a.grid;this.grid.view=this;this._options=h._extend({attrRowIdx:"r",appendThreshold:3,renderThreshold:10,bufferSize:6,rowsPerPage:10,rowH:21,borderThickness:1,border:"solid #D0D7E5",padding:1,evenOddRows:!1,oddRowsBackground:"#F4F4F4",style:"",canvasStyle:"",rowStyle:"",cellStyle:"",classRow:"jgrid-row",classCell:"jgrid-cell",classView:"jgrid-viewport",classCanvas:"jgrid-canvas",focusBackground:"#FFF",focusOutline:"2px solid #f1ca7f",
autoHeight:!1,autoWidth:!1},a.options);this._drag=!1;this._lastRowLen=this._lastScrollLeft=this._lastScrollTop=0;this._renderedRows={};this._lockedRows={};this._colLefts=[0];this.__init()}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.grid.Grid"),b=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.ViewportManager",e);h._add("ViewportManager",e);e.getInstance=function(a){return new e(a)};var a=e.prototype;a.__init=function(){this._mask=
$("<div class='"+this._options.classView+"' tabIndex='0' onscroll='JGM.m.ViewportManager."+this.mid+"._scroll()'>").appendTo(this._ctnr);this._canvas=$("<div class='"+this._options.classCanvas+"'>").appendTo(this._mask);this._mask.bind("selectstart.ui",function(a){return $(a.target).is("input, textarea")});this._setColLefts();this._lastRowLen=this.grid.dataMgr.datalist.length;this.grid.event.bind({canvasFind:this._canvasFind,onCreateCss:this._onCreateCss,onCreateDynamicCss:this._onCreateDynamicCss,
onDestroy:this._onDestroy,keydown:this._keydown,keyup:this._keyup,keypress:this._keypress,mousein:this._mousein,mouseout:this._mouseout,mouseenter:this._mouseenter,mouseleave:this._mouseleave,mousemove:this._mousemove,mouseover:this._mouseover,mousedown:this._mousedown,mouseup:this._mouseup,click:this._click,dblclick:this._dblclick,resizeWidth:this._setWidth,"resizeWidth onResizeCol onResizeCanvasHeight":this._resizeWidth,onAfterRefresh:this.onAfterRefresh,onRenderModules:this._render,onReorderCols:this._onReorderCols,
onResizeCanvasWidth:this._scroll,onUpdateDatarow:this.onUpdateDatarow,onUpdateDatalist:this.onUpdateDatalist,onRemoveDatarow:this.onRemoveDatarow,onRemoveDatalist:this.onRemoveDatalist,onIdChange:this.onIdChange,onIdListChange:this.onIdListChange,unsetDrag:this.unsetDrag},this)};a.unsetDrag=function(){this._drag=!1};a._onDestroy=function(){h._destroy(this,{name:"ViewportManager",path:"view",$:"canvas _mask",property:"ctnr",map:"vars _lockedRows _renderedRows _options"})};a._onCreateCss=function(){var a=
"#"+this.grid.mid+" .",b=this._options,c=a+b.classCell,e=a+b.classRow,h=b.borderThickness+"px "+b.border,i=e+"["+b.attrRowIdx,o=this.grid.colDefMgr.get(),l=o.length,n=0,m=[];m.push(a+b.classView+"{height:"+this._calHeight()+"px;outline:0;position:relative;white-space:nowrap;overflow:auto;line-height:"+b.rowH+"px;cursor:default;-moz-user-select:none;-webkit-user-select:none;"+b.style+"}");m.push(a+b.classView+":focus{background:"+b.focusBackground+";outline:"+b.focusOutline+"}");m.push(a+b.classCanvas+
"{height:"+this._calCanvasHeight()+"px;"+b.canvasStyle+";background:#fff}");m.push(e+"{position:absolute;"+b.rowStyle+"}");m.push(c+"{height:"+b.rowH+"px;border-bottom:"+h+";display:inline-block;white-space:nowrap;overflow:hidden;float:left;text-overflow:ellipsis;padding-left:"+b.padding+"px;border-right:"+h+";"+b.cellStyle+"}");for(b.evenOddRows&&m.push(i+"$='1'],"+i+"$='3'],"+i+"$='5'],"+i+"$='7'],"+i+"$='9']{background:"+b.oddRowsBackground+"}");n<l;n++)m.push(c+".k_"+o[n].key+"{"+o[n].style+"}");
return m.join("")};a._onCreateDynamicCss=function(){for(var a="#"+this.grid.mid+" ."+this._options.classCell,b=this._getRowSelector()+"{width:"+this._calCanvasWidth()+"px}",c=this.grid.colDefMgr.get(),e=c.length,h=0;h<e;h++)b+=a+".k_"+c[h].key+"{width:"+c[h].width+"px}";return b};a.onUpdateDatarow=function(a){this.isRendered(a)&&this.rerenderRow(a)};a.onUpdateDatalist=function(a){for(var b,c=a.length,e=0;e<c;e++)b=a[e],this.isRendered(b)&&this.rerenderRow(b)};a.onRemoveDatarow=function(a){this.destroyRow(a)};
a.onRemoveDatalist=function(a){for(var b=a.length,c=0;c<b;c++)this.destroyRow(a[c])};a.onIdChange=function(a,b,c){this.isRowLockedById(b)&&(this._lockedRows[c]=this._lockedRows[b],delete this._lockedRows[b]);this.isRenderedById(b)&&((this._renderedRows[c]=this._renderedRows[b]).setAttribute("i",c),delete this._renderedRows[b])};a.onIdListChange=function(a,b,c){for(var e=a.length,h=0,i=this._lockedRows,o=this._renderedRows,l,n;h<e;h++)l=b[h],n=a[h][c],i.hasOwnProperty(l)&&(i[n]=i[l],delete i[l]),o.hasOwnProperty(l)&&
((o[n]=o[l]).setAttribute("i",n),delete o[l])};a._getCellSelector=function(){return"#"+this.grid.mid+" ."+this._options.classCell};a._getRowSelector=function(){return"#"+this.grid.mid+" ."+this._options.classRow};a.scrollTo=function(a,b){this.scrollToRow(a);this.scrollToCol(b)};a.scrollToRowLazy=function(a){var c=this.getScrollTop();return b.isNull(a)?c:this._getLastSafeVisibleRow()<a?this.scrollToRow(this._getFirstRowForSafe(a)):this._getFirstSafeVisibleRow()>a?this.scrollToRow(a):c};a.scrollToColLazy=
function(a){var c=this.getScrollLeft();if(b.isNull(a))return c;if(this._getLastSafeVisibleCol()<a)return this.setScrollLeft(this.getScrollHForSafe(a));else if(this._getFirstSafeVisibleCol()>a)return this.scrollToCol(a);return c};a.scrollToLazy=function(a,b){this.scrollToRowLazy(a);this.scrollToColLazy(b)};a.scrollToRow=function(a){return b.isNotNull(a)?this.setScrollTop(this._getRowOuterHeight()*a):this.getScrollTop()};a.scrollToCol=function(a){return this.setScrollLeft(this.getColLeft(a))};a._getColInnerWidth=
function(a){return this.grid.colDefMgr.get(a).width};a._getColInnerWidthByKey=function(a){return this.grid.colDefMgr.getByKey(a).width};a.getColWidth=function(a){return this.grid.colDefMgr.get(a).width+this._options.padding};a.getColWidthByKey=function(a){return this.grid.colDefMgr.getByKey(a).width+this._options.padding};a._getColOuterWidth=function(a){return this.grid.colDefMgr.get(a).width+this._options.padding+this._options.borderThickness};a._getColOuterWidthByKey=function(a){return this.grid.colDefMgr.getByKey(a).width+
this._options.padding+this._options.borderThickness};a._getPadding=function(){return this._options.padding};a._colWidthPlus=function(){return this._options.padding+this._options.borderThickness};a._getRowOuterHeight=function(){return this._options.rowH+this._options.borderThickness};a._getRowInnerHeight=function(){return this._options.rowH};a._calHeight=function(){return this._options.autoHeight?this._calCanvasHeight()+(this.grid.width()<this._calCanvasWidth()?this.grid._vars.scrollbarDim.h:0):this._getRowOuterHeight()*
this._options.rowsPerPage};a.getHeight=function(){return this._mask[0].offsetHeight};a.getInnerHeight=function(){return this._mask[0].clientHeight};a._getWidth=function(){return this._mask[0].offsetWidth};a.getInnerWidth=function(){return this._mask[0].clientWidth};a._calCanvasHeight=function(){return this._getRowOuterHeight()*this.grid.dataMgr.datalist.length};a.getCanvasHeight=function(){return this._canvas[0].clientHeight};a._setCanvasHeight=function(a){a=parseInt(a);if(!(isNaN(a)||a<1)){var b=
this.getCanvasHeight();if(a!=b)this._canvas[0].style.height=a+"px",this.grid.event.trigger("onResizeCanvasHeight",[a,b])}};a._calCanvasWidth=function(){return this._colLefts[this.grid.colDefMgr.length()]};a.getCanvasWidth=function(){return this._canvas[0].clientWidth};a._setCanvasWidth=function(a){typeof a!="number"&&(a=parseInt(a));if(isFinite(a)&&!(a<1)){var b=this.getCanvasWidth();if(a!=b)this._canvas[0].style.width=a+"px",this.grid.event.trigger("onResizeCanvasWidth",[a,b])}};a.getColLeft=function(a){return this._colLefts[a]};
a._getColLefts=function(){return this._colLefts};a._setColLefts=function(a,c){b.isNull(a)&&(a=0);var e=this.grid.colDefMgr.get(),g=this._colWidthPlus();if(b.isNull(c))c=e.length;for(;a<c;a++)this._colLefts[a+1]=this._colLefts[a]+e[a].width+g;return this._colLefts};a._onReorderCols=function(){this._setColLefts();this._rerender()};a.setWidthByKey=function(a,c){var e=this.grid.colDefMgr.getByKey(a),c=b.bound(c,e.minW,e.maxW);if(c!==e.width){var g=e.width;e.width=c;this._setCanvasWidth(this._setColLefts(this.grid.colDefMgr.getIdxByKey(a))[this.grid.colDefMgr.length()]);
this.grid._recreateDynamicCss();this.grid.event.trigger("onResizeCol_"+a+" onResizeCol",[a,c,g])}};a._autoColWidth=function(a){for(var b=this._canvasFind(".k_"+a),c=Number.MIN_VALUE,e=b.length,h=0;h<e;h++)if(c<b[h].scrollWidth)c=b[h].scrollWidth;c-=this._getPadding();this.setWidthByKey(a,c)};a._setWidth=function(a){a=parseInt(a);if(!(isNaN(a)||a<1))this._mask[0].style.width=a+"px"};a.getScrollTop=function(){return this._mask[0].scrollTop};a.getScrollLeft=function(){return this._mask[0].scrollLeft};
a.setScrollTop=function(a){var c=this.getScrollTop();return b.isNotNull(a)&&c!=a?this._mask[0].scrollTop=a:c};a.setScrollLeft=function(a){var c=this.getScrollLeft();return b.isNotNull(a)&&c!=a?this._mask[0].scrollLeft=a:c};a._hasHScrollbar=function(){return this._mask[0].offsetHeight>this._mask[0].clientHeight};a._hasVScrollbar=function(){return this._mask[0].offsetWidth>this._mask[0].clientWidth};a._heightPlus=function(){return this._mask[0].offsetHeight-this._mask[0].clientHeight};a._widthPlus=
function(){return this._mask[0].offsetWidth-this._mask[0].clientWidth};a._getFirstVisibleRow=function(){return Math.floor(this.getScrollTop()/this._getRowOuterHeight())};a._getFirstSafeVisibleRow=function(){return Math.ceil(this.getScrollTop()/this._getRowOuterHeight())};a._getLastVisibleRow=function(){return Math.ceil((this.getScrollTop()+this._mask[0].clientHeight)/this._getRowOuterHeight())-1};a._getLastSafeVisibleRow=function(){return Math.floor((this.getScrollTop()+this._mask[0].clientHeight)/
this._getRowOuterHeight())-1};a._getFirstRowForSafe=function(a){return a-Math.floor(this._mask[0].clientHeight/this._getRowOuterHeight())+1};a._getFirstVisibleCol=function(){for(var a=this.getScrollLeft(),b=this._colLefts,c=0,e=b.length;c<e;c++){if(b[c]>a)return c-1;if(b[c]===a)return c}return e-2};a._getFirstSafeVisibleCol=function(){for(var a=this.getScrollLeft(),b=this._colLefts,c=0,e=b.length;c<e;c++)if(b[c]>=a)return c;return e-2};a._getLastVisibleCol=function(){for(var a=this.getScrollLeft()+
this._mask[0].clientWidth,b=this._colLefts,c=0,e=b.length;c<e;c++)if(b[c]>=a)return c-1;return e-2};a._getLastSafeVisibleCol=function(){for(var a=this.getScrollLeft()+this._mask[0].clientWidth,b=this._colLefts,c=0,e=b.length;c<e;c++)if(b[c]>a)return c-2;return e-2};a._getFirstColForSafe=function(a){var b=this._colLefts,c=b[a+1]-this._mask[0].clientWidth,e=a;if(c<=0)return 0;for(;e>=0;e--){if(e===a&&b[e]<=c||b[e]===c)return e;if(b[e]<c)return e+1}return 0};a.getScrollHForSafe=function(a){var b=this._colLefts,
c=b[a+1]-this._mask[0].clientWidth;return b[a]<=c?b[a]:c};a._getRenderRange=function(){if(this._options.autoHeight)return{start:0,end:this.grid.dataMgr.datalist.length-1};var a,b=this.grid.dataMgr.datalist.length-1;return{start:(a=this._getFirstVisibleRow()-this._options.bufferSize)<0?0:a,end:(a=this._getLastVisibleRow()+this._options.bufferSize)>b?b:a}};a._fitHeight=function(){this._mask[0].style.height=this.getCanvasHeight()+this._heightPlus()+"px"};a._resizeWidth=function(){this._options.autoHeight&&
this._fitHeight()};a.onAfterRefresh=function(a){a!==void 0&&a.noRerender===!0||this._rerender()};a._rerender=function(){var a=this.getScrollTop(),b=this.getScrollLeft();this.grid.event.trigger("onBeforeRerender");this.unlockAllRows();this._removeRows();var c=this.grid.dataMgr.datalist.length;if(this._lastRowLen!==c)this._lastRowLen=c,this._setCanvasHeight(this._calCanvasHeight());this._render();this.setScrollTop(a);this.setScrollLeft(b);this.grid.event.trigger("onAfterRerender")};a._render=function(a){this._removeAndRenderRows(a)};
a._renderShift=function(a){b.isNull(a)&&(a=this._getRenderRange());this._removeRowsExcept(a);this._appendRows(a)};a._removeRows=function(a){var c=this._canvas[0],e=this._renderedRows,g=this._lockedRows,h;if(b.isNull(a))if(this._lockExist())for(h in e)e.hasOwnProperty(h)&&g.hasOwnProperty(h)&&(c.removeChild(e[h]),delete e[h]);else this._renderedRows={},c.innerHTML="";else for(var i=a.start,a=a.end,o=this.grid.dataMgr;i<=a;i++)if(!g.hasOwnProperty(h=o.getIdByIdx(i))&&e.hasOwnProperty(h))c.removeChild(e[h]),
delete e[h]};a._removeRowsExcept=function(a){var c=this._canvas[0],e=this._renderedRows,g=this._lockedRows,h;if(b.isNull(a))if(this._lockExist())for(h in e)e.hasOwnProperty(h)&&g.hasOwnProperty(h)===!1&&(c.removeChild(e[h]),delete e[h]);else this._renderedRows={},c.innerHTML="";else{var i=a.start,a=a.end,o=this.grid.dataMgr,l;for(h in e)if(e.hasOwnProperty(h)&&!(g.hasOwnProperty(h)||i<=(l=o.getIdxById(h))&&l<=a))c.removeChild(e[h]),delete e[h]}};a.destroyRow=function(a){return this.destroyRowById(this.grid.dataMgr.getId(a))};
a.destroyRowById=function(a){b.isNotNull(a)&&(this.unlockRowById(a),this._renderedRows.hasOwnProperty(a)&&(this._canvas[0].removeChild(this._renderedRows[a]),delete this._renderedRows[a]))};a.destroyRowByIdx=function(a){return this.destroyRowById(this.grid.dataMgr.getIdByIdx(a))};a._lockExist=function(){return b.isNotEmptyObj(this._lockedRows)};a.isRowLockedById=function(a){return b.isNotNull(a)?this._lockedRows.hasOwnProperty(a):!1};a.isRowLocked=function(a){return this.isRowLockedById(this.grid.dataMgr.getId(a))};
a.isRowLockedByIdx=function(a){return this.isRowLockedById(this.grid.dataMgr.getIdByIdx(a))};a.lockRowById=function(a){b.isNotNull(a)&&this.grid.dataMgr.hasById(a)&&(this._lockedRows[a]=!0)};a.lockRow=function(a){return this.lockRowById(this.grid.dataMgr.getId(a))};a.lockRowByIdx=function(a){return this.lockRowById(this.grid.dataMgr.getIdByIdx(a))};a.unlockRowById=function(a){this.isRowLockedById(a)&&delete this._lockedRows[a]};a.unlockRow=function(a){return this.unlockRowById(this.grid.dataMgr.getId(a))};
a.unlockRowByIdx=function(a){return this.unlockRowById(this.grid.dataMgr.getIdByIdx(a))};a.unlockAllRows=function(){this._lockedRows={}};a.rerenderRowById=function(a){if(this.grid.dataMgr.containsById(a)){var c=this._renderedRows,e=this._canvas[0],g=this.grid.dataMgr,h=g.getIdxById(a),g=g.getById(a),i=this.grid.colDefMgr.get(),o=this._getColCellClasses(i),l=this._getRowOuterHeight(),n=[];c.hasOwnProperty(a)&&(e.removeChild(c[a]),this.grid.event.trigger("onBeforeRenderRows",[[h]]),this._renderRow(n,
h,g,i,o,l),c[a]=b.appendHTML(e,n.join(""))[0],this.grid.event.trigger("onAppendRows",[[h]]))}};a.rerenderRow=function(a){return this.rerenderRowById(this.grid.dataMgr.getId(a))};a.rerenderRowByIdx=function(a){return this.rerenderRowById(this.grid.dataMgr.getIdByIdx(a))};a.rerenderCellByIdAndKey=function(a,b){var c=this.getCellByIdAndKey(a,b);if(c!==void 0){var e=this.grid.dataMgr,h=this.grid.colDefMgr,i=e.getById(a),o=h.getByKey(b),e=e.getIdxById(a),h=h.getIdxByKey(b);c.innerHTML=this._renderCell([],
e,h,i,o).join("")}};a.rerenderCellByIdx=function(a,b){return this.rerenderCellByIdAndKey(this.grid.dataMgr.getIdByIdx(a),this.grid.colDefMgr.getKeyByIdx(b))};a._appendRows=function(a){this.grid.event.trigger("onBeforeRenderRows",[a]);for(var c=[],e=a.start,g=a.end,h=this.grid.dataMgr.datalist,i=this.grid.dataMgr.idKey,o=this.grid.colDefMgr.get(),l=this._getColCellClasses(o),n=this._renderedRows,m=this._getRowOuterHeight(),q=this._canvas[0],p,r,t=[];e<=g;e++)if(p=h[e],!n.hasOwnProperty(r=p[i]))this._renderRow(c,
e,p,o,l,m),t.push(r);c=b.appendHTML(q,c.join(""));e=0;for(g=t.length;e<g;e++)n[t[e]]=c[e];this.grid.event.trigger("onAppendRows",[a])};a._removeAndRenderRows=function(a){b.isNull(a)&&(a=this._getRenderRange());this.grid.event.trigger("onBeforeRenderRows",[a]);for(var c=[],e=a.start,g=a.end,h=this.grid.dataMgr,i=h.datalist,o=h.idKey,l=this.grid.colDefMgr.get(),n=this._getColCellClasses(l),h=this._canvas[0],m=this._getRowOuterHeight(),q,p=[],r={};e<=g;e++)q=i[e],this._renderRow(c,e,q,l,n,m),p.push(q[o]);
h.innerHTML=c.join("");e=0;for(c=p.length;e<c;e++)r[p[e]]=h.childNodes[e];this._renderedRows=r;this.grid.event.trigger("onAppendRows",[a])};a._getColCellClass=function(a){var c=this._options.classCell+" k_"+a.key;b.isNotNull(a.colClass)&&(c+=" "+a.colClass);c+=" "+this.grid.event.trigger("onGetColCellClass",[a]).join(" ");return c};a._getColCellClasses=function(a){var c=[],e=0,g=a.length;for(b.isNull(a)&&(a=this.grid.colDefMgr.get());e<g;e++)c.push(this._getColCellClass(a[e]));return c};a._renderRow=
function(a,b,c,e,h,i){a.push("<div class='"+this._options.classRow+"' i='"+c[this.grid.dataMgr.idKey]+"' "+this._options.attrRowIdx+"='"+b+"' style='top:"+i*b+"px'>");for(var i=0,o=e.length;i<o;i++)a.push("<div class='"+h[i]+" "+this.grid.event.trigger("onGetCellClass",[b,i,c,e[i]]).join(" ")+"'>"),this._renderCell(a,b,i,c,e[i]),a.push("</div>");a.push("</div>");return a};a._renderCell=function(a,b,c,e,j){this.grid.event.trigger("onRenderCell_"+j.key+"_prepend",[b,c,e,j,a]);var i=e[j.key];if(typeof i!==
"string"||i.substring(0,3)!=="J@H")j.rendererInput?a.push(j.renderer(h.create("Cell",{grid:this.grid,row:b,col:c,datarow:e,colDef:j}))):a.push(j.renderer(i,b,c,e,j,this));this.grid.event.trigger("onRenderCell_"+j.key+"_append",[b,c,e,j,a]);return a};h.Cell.prototype.rerender=function(){return this.grid.view.rerenderCellByIdAndKey(this.getId(),this.getKey())};h.Cell.prototype.scrollTo=function(){this.grid.view.scrollTo(this.getRowIdx(),this.getColIdx())};a._keydown=function(a){b.contains(this._mask[0],
document.activeElement,this._ctnr[0])&&this.grid.event.trigger("keydownCanvas_"+a.which+" keydownCanvas",[a])};a._keyup=function(a){b.contains(this._mask[0],document.activeElement,this._ctnr[0])&&this.grid.event.trigger("keyupCanvas_"+a.which+" keyupCanvas",[a])};a._keypress=function(a){b.contains(this._mask[0],document.activeElement,this._ctnr[0])&&this.grid.event.trigger("keypressCanvas_"+a.which+" keypressCanvas",[a])};a._mousein=function(a){this._drag?this._triggerMouseEvent(a,{event:"draginCanvas mouseinCanvas"},
c.V_MOUSEIN):this._triggerMouseEvent(a,{event:"mouseinCanvas"},c.V_MOUSEIN)};a._mouseout=function(a){this._drag?this._triggerMouseEvent(a,{event:"dragoutCanvas mouseoutCanvas"},c.V_MOUSEOUT):this._triggerMouseEvent(a,{event:"mouseoutCanvas"},c.V_MOUSEOUT)};a._mouseenter=function(a){this._drag?this._triggerMouseEvent(a,{event:"dragenterCanvas mouseenterCanvas"},c.V_MOUSEENTER):this._triggerMouseEvent(a,{event:"mouseenterCanvas"},c.V_MOUSEENTER)};a._mouseleave=function(a){this._drag?this._triggerMouseEvent(a,
{event:"dragleaveCanvas mouseleaveCanvas"},c.V_MOUSELEAVE):this._triggerMouseEvent(a,{event:"mouseleaveCanvas"},c.V_MOUSELEAVE)};a._mousemove=function(a){this._drag?this._triggerMouseEvent(a,{event:"dragmoveCanvas mousemoveCanvas"},c.V_MOUSEMOVE):this._triggerMouseEvent(a,{event:"mousemoveCanvas"},c.V_MOUSEMOVE)};a._mouseover=function(a){this._drag?this._triggerMouseEvent(a,{event:"dragoverCanvas mouseoverCanvas"},c.V_MOUSEOVER):this._triggerMouseEvent(a,{event:"mouseoverCanvas"},c.V_MOUSEOVER)};
a._mousedown=function(a){if(this._triggerMouseEvent(a,{event:"mousedownCanvas"},c.V_MOUSEDOWN))this._drag=!0};a._mouseup=function(a){this._drag=!1;this._triggerMouseEvent(a,{event:"mouseupCanvas"},c.V_MOUSEUP)};a._click=function(a){this._triggerMouseEvent(a,{event:"clickCanvas"},c.V_CLICK)&&this.focus(a)};a._dblclick=function(a){this._triggerMouseEvent(a,{event:"dblclickCanvas"},c.V_DBLCLICK)};a._triggerMouseEvent=function(a,c){var e=this._getClosestCell(a.target),g,j,i;if(e===void 0)return!1;c.cell=
h.create("Cell",{grid:this.grid,node:e});e=b.split(c.event);i=e.length;g=[];for(j=0;j<i;j++)g.push(e[j]+"_"+c.cell.getKey()),g.push(e[j]);this.grid.event.trigger(g.join(" "),[a,c.cell]);return!0};a._scroll=function(){var a=this.getScrollTop(),b=a-this._lastScrollTop,c=this.getScrollLeft(),e=c-this._lastScrollLeft;if(!(b===0&&e===0)){this.grid.event.trigger("onScrollViewport");if(e)this._lastScrollLeft=c,this.grid.event.trigger("onScrollViewportH",[c]);if(!(Math.abs(b/this._getRowOuterHeight())<this._options.appendThreshold))this._lastScrollTop=
a,this._render(),this.grid.event.trigger("onScrollViewportV")}};a.focus=function(a){if(!b.isNotNull(a)||!this.grid.event.triggerInvalid("onBeforeFocusCanvas",[a]))if(a=this._mask[0],document.activeElement!==a){if(b.isFunction(a.setActive))try{a.setActive()}catch(c){}a.focus();document.activeElement!==a&&this._mask.focus()}};a.isRenderedById=function(a){return b.isNotNull(a)?this._renderedRows.hasOwnProperty(a):!1};a.isRendered=function(a){return this.isRenderedById(this.grid.dataMgr.getId(a))};a.isRenderedByIdx=
function(a){return this.isRenderedById(this.grid.dataMgr.getIdByIdx(a))};a.getRowById=function(a){if(this.isRenderedById(a))return this._renderedRows[a]};a.getRow=function(a){return this.getRowById(this.grid.dataMgr.getId(a))};a.getRowByIdx=function(a){return this.getRowById(this.grid.dataMgr.getIdByIdx(a))};a.getRenderedRowById=function(a){if(this.isRenderedById(a))return this._renderedRows[a]};a.getRenderedRow=function(a){return this.getRenderedRowById(this.grid.dataMgr.getId(a))};a.getRenderedRowByIdx=
function(a){return this.getRenderedRowById(this.grid.dataMgr.getIdByIdx(a))};a.getRenderedRows=function(){return b.toArray(this._renderedRows)};a.getCell=function(a,c){var e=this.getRowByIdx(a);if(b.isNotNull(e,c))return e.childNodes[c]};a.getCellByIdAndKey=function(a,c){var e=this.getRowById(a),g=this.grid.colDefMgr.getIdxByKey(c);if(b.isNotNullAnd(e,g))return e.childNodes[g]};a.getRenderedCell=function(a,c){var e=this.getRenderedRowByIdx(a);if(b.isNotNull(e))return e.childNodes[c]};a.getRenderedCellByIdAndKey=
function(a,c){var e=this.getRenderedRowById(a),g=this.grid.colDefMgr.getIdxByKey(c);if(b.isNotNullAnd(e,g))return e.childNodes[g]};a._getClosestCell=function(a){return b.closestWithTag(a,"DIV",this._options.classCell,this._canvas[0])};a._getClosestRow=function(a){return b.closestWithTag(a,"DIV",this._options.classRow,this._canvas[0])};a._getClosestRowIdx=function(a){return this.grid.dataMgr.getIdxByNode(this._getClosestRow(a))};a._canvasFind=function(a){return this._canvas.find(a)};e._renderer=function(a){return b.ifNull(a,
"")}})();jx.grid.Footer={};
(function(){function e(a){this.mid=a.mid;this._ctnr=a.container;this.grid=a.grid;this.grid.footer=this;this._options=h._extend({classCell:"footer-cell",background:"#F1F5FB",border:"0px solid #CCD9EA",color:"#000",fontSize:"13px",fontWeight:"normal",cellHeight:25,cellPadding:40,countTemplate:"ÇöÀç <span name='shownCount'></span> °Ç / ÃÑ <span name='totalCount'></span> °Ç",titleColor:"#5A6779",titleFontSize:"12px",titleFontWeight:"normal",contentColor:"#1E395B",contentFontSize:"12px",contentFontWeight:"normal",classFooter:"jgrid-footer",
classTitle:"footer-title",classContent:"footer-content",style:"",cellStyle:"",titleStyle:"",contentStyle:""},a.options);this._sumMap={};this.__init()}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.Footer",e);h._add("Footer",e);e.getInstance=function(a){return new e(a)};var b=e.prototype;b.__init=function(){this._foot=$("<div class='"+this._options.classFooter+"'>").appendTo(this._ctnr);this.getNextCell().html(this._options.countTemplate);
this._updateTotalCount();this._updateShownCount();this._initSumCells();this.bindEvents()};b.bindEvents=function(){this.grid.event.bind({onCreateCss:this._onCreateCss,onDestroy:this._destroy,onDataChange:[this._updateTotalCount,this._updateSums],onAfterRefresh:this._updateShownCount},this)};b._destroy=function(){var a,b=this._sumMap;for(a in b)b.hasOwnProperty(a)&&b[a].remove();h._destroy(this,{name:"Footer",path:"footer",$:"foot",property:"ctnr",map:"sumMap _options"})};b._onCreateCss=function(){var a=
this._options,b="#"+this.grid.mid+" ."+a.classFooter,c=[];c.push(b+"{float:left;cursor:default;width:100%;"+h._CONST._cssUnselectable+"background:"+a.background+";border-top:"+a.border+";border-collapse:collapse;color:"+a.color+";font-size:"+a.fontSize+";font-weight:"+a.fontWeight+";padding-left:8px;"+a.style+"}");c.push(b+" ."+a.classCell+"{float:left;white-space:nowrap;line-height:"+a.cellHeight+"px;padding-right:"+a.cellPadding+"px;"+a.cellStyle+"}");c.push(b+" ."+a.classTitle+"{text-align:right;color:"+
a.titleColor+";font-size:"+a.titleFontSize+";font-weight:"+a.titleFontWeight+";"+a.titleStyle+"}");c.push(b+" ."+a.classContent+"{color:"+a.contentColor+";font-size:"+a.contentFontSize+";font-weight:"+a.contentFontWeight+";"+a.contentStyle+"}");return c.join("")};b._updateTotalCount=function(){this._foot.find("[name=totalCount]")[0].innerHTML=this.grid.dataMgr.getReal().length};b._updateShownCount=function(){this._foot.find("[name=shownCount]")[0].innerHTML=this.grid.dataMgr.filterReal(this.grid.dataMgr.datalist).length};
b._initSumCells=function(){for(var a=this.grid.dataMgr.getReal(),b=this.grid.colDefMgr.get(),f=b.length,h,g,j,i,o=e._calSum,l=this._sumMap,n,m=0;m<f;m++)if(h=b[m],g=h.sumRenderer,c.isNotNull(g))if(j=h.key,h=h.name,i=o(a,j),j=l[j]=this.getNextCell(),n=j[0],c.isFunction(g))n.innerHTML=g(h,i);else if(c.isString(g))if(j=g.toLowerCase(),j==="krw"||g==="\\")n.innerHTML=this._sumRenderer(h,c.formatNumber(i));else{if(j==="usd"||g==="$")n.innerHTML=this._sumRenderer(h,c.formatNumber(i,2,"$ "))}else n.innerHTML=
this._sumRenderer(h,i)};b._updateSums=function(){var a=this.grid.dataMgr.getReal(),b,f=this._sumMap,h=this.grid.colDefMgr,g,j,i,o=e._calSum,l,n,m=this._options.classContent;for(b in f)if(f.hasOwnProperty(b))if(g=h.getByKey(b),j=g.sumRenderer,i=o(a,b),l=f[b],n=l[0],c.isFunction(j))n.innerHTML=j(g.name,i);else if(c.isString(j))if(g=j.toLowerCase(),g==="krw"||j==="\\")l.find("span."+m)[0].innerHTML=c.formatNumber(i);else{if(g==="usd"||j==="$")l.find("span."+m)[0].innerHTML=c.formatNumber(i,2,"$ ")}else l.find("span."+
m)[0].innerHTML=i};b.getNextCell=function(){return $("<div class='"+this._options.classCell+"'/>").appendTo(this._foot)};b._sumRenderer=function(a,b){return"<span class='"+this._options.classTitle+"'>"+a+" ÇÕ°è: </span><span class='"+this._options.classContent+"'>"+b+"</span>"};e._calSum=function(a,b){for(var c=0,e,g=a.length,h=0;h<g;h++){if(typeof(e=a[h][b])==="string")e=e.toFloat();c+=isNaN(e)?0:e}return c}})();jx.grid.SelectionManager={};
(function(){function e(a){this.mid=a.mid;this.grid=a.grid;this.grid.selMgr=this;this._options=h._extend({rowSelKey:this.grid.dataMgr.idKey,bgColorSelection:"#DCEBFE",bgColorLast:"#f1ca7f",bgColorRange:"#D9D9D9",classSelection:"jgrid-selection",classLast:"selection-last",classRange:"selection-range",multiSelectEnabled:!1,classRowSelected:"rowSelected",highlightRowEnabled:!0,bgColorRowSelected:"#d8dfea"},a.options);this._consts={_UP:1,_DOWN:2,_LEFT:3,_RIGHT:4,_PGDN:5,_PGUP:6,_HOME:7,_END:8,_NAVKEYS:{}};
this._consts._NAVKEYS=c.which(["enter","tab","arrow","pgdn","pgup","home","end"]);this._rows={length:0};this._cols={length:0};this.__init()}var h=goog.getObjectByName("jx.grid"),c=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.SelectionManager",e);h._add("SelectionManager",e);e.getInstance=function(a){return new e(a)};var b=e.prototype;b.__init=function(){this.bindEvents()};b.bindEvents=function(){this.grid.event.bind({onGetCellClass:this._onGetCellClass,
onCreateCss:this._onCreateCss,onDestroy:this._destroy,keydownCanvas:this._keydownCanvas,dragoverCanvas:this._dragoverCanvas,mousedownCanvas:this._mousedownCanvas,onBeforeRerender:this._onBeforeRerender,onAfterRerender:this.onAfterRerender,onBeforeDataChange:this.onBeforeDataChange},this)};b._destroy=function(){h._deleteMap(this._consts,"_NAVKEYS");var a,b=this._rows,c=this._cols;for(a in b)b.hasOwnProperty(a)&&a!=="length"&&h._deleteMap(b,a);for(a in c)c.hasOwnProperty(a)&&a!=="length"&&h._deleteMap(c,
a);h._destroy(this,{name:"SelectionManager",path:"selMgr",map:"rows _cols _range _last _consts _options"})};b._onCreateCss=function(){var a=this.grid.event.trigger("onBeforeCreateSelCss"),b="#"+this.grid.mid+" .",c=this._options;c.highlightRowEnabled===!0&&a.push(b+c.classRowSelected+" > *{background:"+c.bgColorRowSelected+"}");c.multiSelectEnabled===!0&&(a.push(b+c.classSelection+"{background:"+c.bgColorSelection+"}"),a.push(b+c.classRange+"{background:"+c.bgColorRange+"}"));a.push(b+c.classLast+
"{background:"+c.bgColorLast+"}");return a.join("\n")};b._onGetCellClass=function(a,b,e,h){var g="",j=this._last,i=this._range,o=this._rows,l=this._options;c.isNotNull(j)&&j.getDatarow()===e&&j.getColDef()===h&&(g+=l.classLast);l.multiSelectEnabled===!0&&(c.isNotNull(i)&&i.getDatarow()===e&&i.getColDef()===h&&(g+=" "+l.classRange),o.hasOwnProperty(a)&&o[a].hasOwnProperty(b)&&(g+=" "+l.classSelection));return g};b._mousedownCanvas=function(a,b){if(!c.isNotNull(this._last)||!this._last.equals(b))this.grid.event.trigger("onBeforeSelect",
[a,b]),this._options.multiSelectEnabled===!1?this.selectCell(b):a.shiftKey&&c.isNotNullAnd(this._last,this._range)?this.selectRange(b):a.ctrlKey?b.getKey()===this._options.rowSelKey?this.addRow(b):this.addCell(b):this.selectCell(b)};b._dragoverCanvas=function(a,b){this._options.multiSelectEnabled===!1?this.selectCell(b):c.isNotNullAnd(this._last,this._range)&&this.selectRange(b)};b._keydownCanvas=function(a){if(c.isNullOr(this._last,this._range))this._consts._NAVKEYS[a.which]&&this.selectCell(h.create("Cell",
{grid:this.grid,row:this.grid.view._getFirstSafeVisibleRow(),col:this.grid.view._getFirstSafeVisibleCol()}));else if(this._consts._NAVKEYS[a.which]){if(!this.grid.event.triggerInvalid("onBeforeNavigate",[a])){var b;a.preventDefault();switch(a.which){case c.keyMapKeydown.tab:b=a.shiftKey?this._idxToCell(this._consts._LEFT,this._last):this._idxToCell(this._consts._RIGHT,this._last);this.selectCell(b);break;case c.keyMapKeydown.enter:b=a.shiftKey?this._idxToCell(this._consts._UP,this._last):this._idxToCell(this._consts._DOWN,
this._last);this.selectCell(b);break;case c.keyMapKeydown.up:this._options.multiSelectEnabled&&a.shiftKey?(b=this._idxToCell(this._consts._UP,this._range),this.selectRange(b)):(b=this._idxToCell(this._consts._UP,this._last),this.selectCell(b));break;case c.keyMapKeydown.down:this._options.multiSelectEnabled&&a.shiftKey?(b=this._idxToCell(this._consts._DOWN,this._range),this.selectRange(b)):(b=this._idxToCell(this._consts._DOWN,this._last),this.selectCell(b));break;case c.keyMapKeydown.left:this._options.multiSelectEnabled&&
a.shiftKey?(b=this._idxToCell(this._consts._LEFT,this._range),this.selectRange(b)):(b=this._idxToCell(this._consts._LEFT,this._last),this.selectCell(b));break;case c.keyMapKeydown.right:this._options.multiSelectEnabled&&a.shiftKey?(b=this._idxToCell(this._consts._RIGHT,this._range),this.selectRange(b)):(b=this._idxToCell(this._consts._RIGHT,this._last),this.selectCell(b));break;case c.keyMapKeydown.pgup:this._options.multiSelectEnabled&&a.shiftKey?(b=this._idxToCell(this._consts._PGUP,this._range),
this.selectRange(b)):(b=this._idxToCell(this._consts._PGUP,this._last),this.selectCell(b));break;case c.keyMapKeydown.pgdn:this._options.multiSelectEnabled&&a.shiftKey?(b=this._idxToCell(this._consts._PGDN,this._range),this.selectRange(b)):(b=this._idxToCell(this._consts._PGDN,this._last),this.selectCell(b));break;case c.keyMapKeydown.space:b=a.shiftKey?this._idxToCell(this._consts._PGUP,this._last):this._idxToCell(this._consts._PGDN,this._last);this.selectCell(b);break;case c.keyMapKeydown.home:this._options.multiSelectEnabled&&
a.shiftKey?(b=this._idxToCell(this._consts._HOME,this._range),this.selectRange(b)):(b=this._idxToCell(this._consts._HOME,this._last),this.selectCell(b));break;case c.keyMapKeydown.end:this._options.multiSelectEnabled&&a.shiftKey?(b=this._idxToCell(this._consts._END,this._range),this.selectRange(b)):(b=this._idxToCell(this._consts._END,this._last),this.selectCell(b))}this.grid.event.trigger("onAfterNavigate",[b])}}else{if(this._cols.length===1){var e=this.grid.colDefMgr,k,g=this._cols;for(k in g)if(g.hasOwnProperty(k)&&
k!=="length")b=e.get(k).key,this.grid.event.trigger("keydownColSel_"+b+"_"+a.which+" keydownColSel_"+b,[a,g[k],this._last])}if(this._rows.length===1){var j;k=this._rows;for(j in k)k.hasOwnProperty(j)&&j!=="length"&&this.grid.event.trigger("keydownRowSel_"+a.which+" keydownRowSel",[a,k[j],this._last])}this.grid.event.trigger("keydownSel_"+a.which+" keydownSel",[a,this._rows,this._cols])}};b.getCell=function(){if(c.isNotNull(this._last))return this._last};b._isSelected=function(a){return c.isNotNull(this._last)&&
this._last.equals(a)};h.Cell.prototype.isSelected=function(){return this.grid.selMgr._isSelected(this)};b._getCellIdxToNavigate=function(a,b,c){switch(a){case this._consts._RIGHT:c<this.grid.colDefMgr.length()-1&&c++;break;case this._consts._LEFT:c>0&&c--;break;case this._consts._DOWN:b<this.grid.dataMgr.datalist.length-1&&b++;break;case this._consts._UP:b>0&&b--;break;case this._consts._PGDN:b+=this.grid.view._options.rowsPerPage;b>this.grid.dataMgr.datalist.length-1&&(b=this.grid.dataMgr.datalist.length-
1);break;case this._consts._PGUP:b-=this.grid.view._options.rowsPerPage;b<0&&(b=0);break;case this._consts._HOME:b=0;break;case this._consts._END:b=this.grid.dataMgr.datalist.length-1}return[b,c]};b._idxToCell=function(a,b){var c=this._getCellIdxToNavigate(a,b.getRowIdx(),b.getColIdx());return h.create("Cell",{grid:this.grid,row:c[0],col:c[1]})};b.selectRow=function(a){var b=a.getRowIdx(),c=a.getColIdx();this._setRange(b,c,a);this._setLast(b,c,a);this._setSelMap(this._getRowMap(b,c,a))};b.selectCell=
function(a,b){this.grid.event.trigger("onBeforeSelectCell",[a]);if(this._options.multiSelectEnabled&&a.getKey()===this._options.rowSelKey)this.selectRow(a);else{var c=a.getRowIdx(),e=a.getColIdx();this._setRange(c,e,a,b);this._setLast(c,e,a);this._setSelMap(this._getCellMap(c,e,a))}this.grid.event.trigger("onAfterSelectCell",[a])};b.onBeforeDataChange=function(){};b._onBeforeRerender=function(){if(c.isNotNull(this._last))this.toSelect=this._last;this.empty()};b.onAfterRerender=function(){c.isNotNull(this.toSelect)&&
(this.selectCell(this.toSelect,!0),this.grid.view.scrollToRowLazy(this.toSelect.getRowIdx()))};b.addRow=function(a){var b=a.getRowIdx(),c=a.getColIdx();this._setRange(b,c,a);this._setLast(b,c,a);this._addSelMap(this._getRowMap(b,c,a))};b.addCell=function(a){var b=a.getRowIdx(),c=a.getColIdx();this._setRange(b,c,a);this._setLast(b,c,a);this._addSelMap(this._getCellMap(b,c,a))};b.selectRange=function(a){var b=a.getRowIdx(),c=a.getColIdx(),e=this._last.getRowIdx(),g=this._last.getColIdx(),h=e<b?e:b,
e=e<b?b:e,i;this._setRange(b,c,a);a.getKey()===this._options.rowSelKey?(i=0,g=this.grid.colDefMgr.length()-1):(i=g<c?g:c,g=g<c?c:g);this._setSelMap(this._getRangeMap(h,i,e,g,b,c,a));return{minRow:h,minCol:i,maxRow:e,maxCol:g}};b._setLast=function(a,b,e){var b=this._last,h;c.isNotNull(b)&&(h=b.getRowIdx(),a!==h&&c.isNotNull(this._range)&&h!==this._range.getRowIdx()&&this.grid.view.unlockRowById(b.getId()),b.get$().removeClass(this._options.classLast),this._options.highlightRowEnabled===!0&&$(b.getRowNode()).removeClass(this._options.classRowSelected),
c.isNull(e)&&delete this._last);if(!c.isNull(e))(this._last=e).get$().addClass(this._options.classLast),this._options.highlightRowEnabled===!0&&$(e.getRowNode()).addClass(this._options.classRowSelected),this.grid.view.lockRowByIdx(a)};b._setRange=function(a,b,e,h){var g=this._range;if(c.isNotNull(g)){var j=g.getRowIdx();if(a===j&&b===g.getColIdx())return;a!==j&&c.isNotNull(this._last)&&j!==this._last.getRowIdx()&&this.grid.view.unlockRowById(g.getId());g.get$().removeClass(this._options.classRange);
c.isNull(e)&&delete this._range}if(!c.isNull(e))(this._range=e).get$().addClass(this._options.classRange),e=this.grid.view,e.lockRowByIdx(a),h||e.scrollToLazy(a,b)};b._addSelMap=function(a){var b=this._rows,c,e,g,j;for(g in a)if(a.hasOwnProperty(g)&&(e=a[g],b.hasOwnProperty(g)))for(j in c=b[g],e)e.hasOwnProperty(j)&&c.hasOwnProperty(j)&&(e[j]instanceof h.Cell&&(c[j]=e[j]),delete e[j]);this.addOrRemoveCss({},!0);this._addToMaps(a)};b._setSelMap=function(a){var b=this._rows,c,e,g,j,i={};for(g in b)if(b.hasOwnProperty(g)&&
g!=="length")if(c=b[g],a.hasOwnProperty(g))for(j in e=a[g],c)c.hasOwnProperty(j)&&j!=="length"&&(e.hasOwnProperty(j)?(e[j]instanceof h.Cell&&(c[j]=e[j]),delete e[j]):(i.hasOwnProperty(g)||(i[g]={}),i[g][j]=!0));else for(j in e=i[g]={},c)c.hasOwnProperty(j)&&j!=="length"&&(e[j]=!0);this._removeFromMaps(i);this.addOrRemoveCss({},!1);this._addSelMap(a)};b.addOrRemoveCss=function(a,b){var e=[],k,g,j,i=this.grid.view;for(k in a)if(a.hasOwnProperty(k))for(g in j=a[k],j)j.hasOwnProperty(g)&&(j[g]instanceof
h.Cell?e.push(j[g].getNode()):e.push(i.getCell(k,g)));e=e.filter(function(a){return c.isNotNull(a)});b?$(e).addClass(this._options.classSelection):$(e).removeClass(this._options.classSelection)};b._addToMaps=function(a){var b,e,h,g=this._rows,j=this._cols,i;for(b in a)if(a.hasOwnProperty(b))for(e in i=a[b],i)i.hasOwnProperty(e)&&(h=c.isNull(h=i[e])?!0:h,g.hasOwnProperty(b)?g[b].length++:(g[b]={length:1},g.length++),g[b][e]=h,j.hasOwnProperty(e)?j[e].length++:(j[e]={length:1},j.length++),j[e][b]=h)};
b._removeFromMaps=function(a){var b,c,e=this._rows,g=this._cols,h;for(b in a)if(a.hasOwnProperty(b))for(c in h=a[b],h)h.hasOwnProperty(c)&&(--e[b].length===0?(delete e[b],e.length--):delete e[b][c],--g[c].length===0?(delete g[c],g.length--):delete g[c][b])};b._getCellMap=function(a,b,c){var e={};e[a]={};e[a][b]=c;return e};b._getRowMap=function(a,b,c){var e={},g=this.grid.colDefMgr.length(),h=0;for(e[a]={};h<g;h++)e[a][h]=!0;e[a][b]=c;return e};b._getRangeMap=function(a,b,c,e,g,h,i){for(var o={},
l;a<=c;a++){o[a]={};for(l=b;l<=e;l++)o[a][l]=!0}o[g][h]=i;return o};b.empty=function(){this._setLast();this._setRange();this._setSelMap({})}})();})();
