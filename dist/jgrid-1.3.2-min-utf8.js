/*
 * JexGrid JavaScript Library v1.3.2
 * Date: Jul-21-2011 15:34:27
 *
 * AUTHOR
 * 
 * 	The JexGrid was written and is maintained by:
 * 		Joon Ho Cho <joonho1101@gmail.com>
 * 
 * COPYRIGHT
 * 
 * 	Copyright (c) 2010-2011, WebCash Inc. All rights reserved.
 * 
 * LICENSE
 * 
 * 	- JexGrid License Policy -
 * 
 * 	JexGrid 는 상업적 용도로 사용될 경우와 개인 용도로 사용될 경우의 두가지 다른 라이센스 정책을 가집니다.
 * 	상업적 용도로 사용될 경우 라이센스를 구매하여야 하고, 개인 용도로 사용될 경우에는 GNU GPL License Version 3 정책을 따릅니다.
 * 
 * 	1. 상업용: Commercial Software License
 * 		- 도메인 당 1억원의 라이센스 가격이 청구됩니다. (List Price 기준)
 * 		- 웹케시 내부 개발 프로젝트에 사용될 경우는 다음의 정책을 따릅니다.
 * 			- 개발 기간 기술지원 비용: 프로젝트 개발 인력 * 100만원 / 1년
 * 			- 상품에 포함되어 외부로 판매되는 경우: 프로젝트 도메인 당 1000만원의 솔루션 가격이 청구됩니다.
 * 
 * 	2. 개인용: Open Source License
 * 
 * 		- GNU GPL License Version 3 라이센스의 원칙을 따릅니다.
 * 
 * 		JexGrid - A Fast, Comprehensive, and Flexible JavaScript Grid Library
 * 		Copyright (C) 2011  Joon Ho Cho
 * 
 * 		This program is free software: you can redistribute it and/or modify
 * 		it under the terms of the GNU General Public License as published by
 * 		the Free Software Foundation, either version 3 of the License, or
 * 		(at your option) any later version.
 * 
 * 		This program is distributed in the hope that it will be useful,
 * 		but WITHOUT ANY WARRANTY; without even the implied warranty of
 * 		MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * 		GNU General Public License for more details.
 * 
 * 		You should have received a copy of the GNU General Public License
 * 		along with this program.  If not, see <http://www.gnu.org/licenses/>.
 * 
 * 		- 중요 내용 요약:
 * 			- 상용 이용 가능
 * 			- 결합 소스 공개의 의무
 * 			- 특허 허용 제한
 * 			- 라이센스 전파의 의무
 * 			- JexGrid 작성자는 사용자 요청에 의한 버그 패치의 의무가 없습니다.
 * 
 * 	어떠한 경우에도 사용자는 위의 라이센스 정책을 수정하거나 삭제할 수 없습니다.
 * 
 * 
 * // Copyright 2006 The Closure Library Authors. All Rights Reserved.
 * //
 * // Licensed under the Apache License, Version 2.0 (the "License");
 * // you may not use this file except in compliance with the License.
 * // You may obtain a copy of the License at
 * //
 * //      http://www.apache.org/licenses/LICENSE-2.0
 * //
 * // Unless required by applicable law or agreed to in writing, software
 * // distributed under the License is distributed on an "AS-IS" BASIS,
 * // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * // See the License for the specific language governing permissions and
 * // limitations under the License.
 *
 */
(function(){if(!Number.prototype.toFixedFloat){Number.prototype.toFixedFloat=function(n){return parseFloat(this.toFixed(n))
}}if(!String.prototype.toInt){String.prototype.toInt=function(){var a;if((a=this.replace(/[^\d\.\-]/g,"")).length===0){return NaN}var c,dot=0,sign=0,len=a.length,i=0,r=false;for(;i<len;i++){c=a.charAt(i);if(c==="."){if(++dot===2){r=true;break}}else{if(c==="-"){if(++sign===2){r=true;
break}}}}if(r===true&&(a=a.replace(/[\.\-]/g,"")).length===0){return NaN}if(/^-*0*\./.test(a)||(a=a.replace(/^-0+/,"-")).length===0||(a=a.replace(/^0+/,"")).length===0){return 0}return parseInt(a,10)}}if(!String.prototype.toFloat){String.prototype.toFloat=function(){var a;
if((a=this.replace(/[^-\d\.]/g,"")).length===0){return NaN}var i=0,len=a.length,ch,c=0,d=0;for(;i<len;i++){ch=a.charAt(i);if(ch==="."){if(c!==0){return NaN}else{c++}}else{if(ch==="-"){if(d!==0){return NaN}else{d++}}}}return parseFloat(a)}}if(!Array.prototype.remove){Array.prototype.remove=function(el){if(this.length===0){return -1
}var index=this.indexOf(el);if(index!==-1){this.splice(index,1)}return index}}if(!Array.prototype.removeAll){Array.prototype.removeAll=function(el){if(this.length===0){return this}var index=this.length;while((index=this.lastIndexOf(el,index-1))!==-1){this.splice(index,1);
if(index===0){return this}}return this}}if(!Array.prototype.removeList){Array.prototype.removeList=function(array){if(this.length===0||array.length===0){return this}var arrlen=array.length,i=0,index;for(;i<arrlen;i++){if((index=this.indexOf(array[i]))!==-1){this.splice(index,1)
}}return this}}if(!Array.prototype.removeAt){Array.prototype.removeAt=function(i){if(this.length===0){return}if(i<0){i=this.length+i}if(i<0){i=0}if(this.hasOwnProperty(i)&&i<this.length){return this.splice(i,1)[0]}}}if(!Array.prototype.addAt){Array.prototype.addAt=function(index,el){this.splice(index,0,el);
return el}}if(!Array.prototype.pushList){Array.prototype.pushList=function(array){if(array.length===0){return this.length}return Array.prototype.push.apply(this,array)}}if(!Array.prototype.pushListAt){Array.prototype.pushListAt=function(index,array){if(array.length===0){return this.length
}var param=[index,0];Array.prototype.push.apply(param,array);Array.prototype.splice.apply(this,param);return this.length}}(function(){var proto=Array.prototype;if(!proto.indexOf){proto.indexOf=function(searchElement){if(this===void 0||this===null){throw new TypeError()
}var t=Object(this);var len=t.length>>>0;if(len===0){return -1}var n=0;if(arguments.length>0){n=Number(arguments[1]);if(n!==n){n=0}else{if(n!==0&&n!==(1/0)&&n!==-(1/0)){n=(n>0||-1)*Math.floor(Math.abs(n))}}}if(n>=len){return -1}var k=n>=0?n:Math.max(len-Math.abs(n),0);
for(;k<len;k++){if(k in t&&t[k]===searchElement){return k}}return -1}}if(!proto.lastIndexOf){proto.lastIndexOf=function(searchElement){if(this===void 0||this===null){throw new TypeError()}var t=Object(this);var len=t.length>>>0;if(len===0){return -1}var n=len;
if(arguments.length>1){n=Number(arguments[1]);if(n!==n){n=0}else{if(n!==0&&n!==(1/0)&&n!==-(1/0)){n=(n>0||-1)*Math.floor(Math.abs(n))}}}var k=n>=0?Math.min(n,len-1):len-Math.abs(n);for(;k>=0;k--){if(k in t&&t[k]===searchElement){return k}}return -1}}if(!proto.filter){proto.filter=function(fun){if(this===void 0||this===null){throw new TypeError()
}var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function"){throw new TypeError()}var res=[];var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisp,val,i,t)){res.push(val)}}}return res}}if(!proto.forEach){proto.forEach=function(callbackfn,thisArg){var T,O=Object(this),len=O.length>>>0,k=0;
if(!callbackfn||!callbackfn.call){throw new TypeError()}if(thisArg){T=thisArg}while(k<len){var Pk=String(k),kPresent=O.hasOwnProperty(Pk),kValue;if(kPresent){kValue=O[Pk];callbackfn.call(T,kValue,k,O)}k++}}}if(!proto.every){proto.every=function(fun){if(this===void 0||this===null){throw new TypeError()
}var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function"){throw new TypeError()}var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t&&!fun.call(thisp,t[i],i,t)){return false}}return true}}if(!proto.map){proto.map=function(fun){if(this===void 0||this===null){throw new TypeError()
}var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function"){throw new TypeError()}var res=new Array(len);var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t){res[i]=fun.call(thisp,t[i],i,t)}}return res}}if(!proto.some){proto.some=function(fun){if(this===void 0||this===null){throw new TypeError()
}var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function"){throw new TypeError()}var thisp=arguments[1];for(var i=0;i<len;i++){if(i in t&&fun.call(thisp,t[i],i,t)){return true}}return false}}if(!proto.reduce){proto.reduce=function reduce(accumlator){var i,l=this.length,curr;
if(typeof accumlator!=="function"){throw new TypeError("First argument is not callable")}if((l==0||l===null)&&(arguments.length<=1)){throw new TypeError("Array length is 0 and no second argument")}if(arguments.length<=1){curr=this[0];i=1}else{curr=arguments[1]
}for(i=i||0;i<l;++i){if(i in this){curr=accumlator.call(undefined,curr,this[i],i,this)}}return curr}}if(!proto.reduceRight){proto.reduceRight=function(callbackfn){if(this===void 0||this===null){throw new TypeError()}var t=Object(this);var len=t.length>>>0;if(typeof callbackfn!=="function"){throw new TypeError()
}if(len===0&&arguments.length===1){throw new TypeError()}var k=len-1;var accumulator;if(arguments.length>=2){accumulator=arguments[1]}else{do{if(k in this){accumulator=this[k--];break}if(--k<0){throw new TypeError()}}while(true)}while(k>=0){if(k in t){accumulator=callbackfn.call(undefined,accumulator,t[k],k,t)
}k--}return accumulator}}})();var Util=window.Util={},undefined=(function(){})(),console=window.console,CONSOLE_LOGS=[],echo=(console&&console.log&&function(){console.log.apply(console,arguments)})||function(){CONSOLE_LOGS.push.apply(CONSOLE_LOGS,arguments)
};Util.isNull=function(val){return val==null};Util.isNotNull=function(val){return val!=null};Util.isNullAnd=function(){var i=0,len=arguments.length;for(;i<len;i++){if(arguments[i]!=null){return false}}return true};Util.isNullOr=function(){var i=0,len=arguments.length;
for(;i<len;i++){if(arguments[i]==null){return true}}return false};Util.isNotNullAnd=function(){var i=0,len=arguments.length;for(;i<len;i++){if(arguments[i]==null){return false}}return true};Util.isNotNullOr=function(){var i=0,len=arguments.length;for(;i<len;
i++){if(arguments[i]!=null){return true}}return false};Util.ifNull=function(toCheck,ifNull,ifNotNull){if(toCheck==null){return ifNull}return ifNotNull===undefined?toCheck:ifNotNull};Util.ifTrue=function(toCheck,ifTrue,ifNotTrue){if(toCheck===true){return ifTrue
}return ifNotTrue===undefined?toCheck:ifNotTrue};Util.isFunction=function(val){return typeof val=="function"};Util.isString=function(val){return typeof val=="string"};Util.isNumber=function(val){return typeof val=="number"};Util.isObject=function(val){return typeof val=="object"
};Util.isArray=function(val){var isArray=Array.isArray;return val&&typeof val=="object"&&((isArray&&isArray(val))||(typeof val.length=="number"&&val.hasOwnProperty("length")&&!val.propertyIsEnumerable("length")))};Util.split=function(str,regex,filter,map){if(typeof str!=="string"){return[]
}regex=regex===undefined?/\s+/:regex;filter=filter===undefined?function(s){return !!s}:filter;map=map===undefined?function(s){return $.trim(s)}:map;var res=str.split(regex);if(map){res=res.map(map)}if(filter){res=res.filter(filter)}return res};Util.isEmpty=function(obj){if(!obj){return true
}if(typeof obj!="object"){return false}var i;for(i in obj){if(obj.hasOwnProperty(i)){return false}}return true};Util.isEmptyObj=function(obj){if(obj==null){return true}if(typeof obj!="object"){return false}var i;for(i in obj){if(obj.hasOwnProperty(i)){return false
}}return true};Util.isNotEmptyObj=function(obj){if(obj==null||typeof obj!="object"){return false}var i;for(i in obj){if(obj.hasOwnProperty(i)){return true}}return false};Util.isEmptyString=function(obj){return obj==null||obj===""};Util.isEmptyArray=function(obj){if(obj==null){return true
}if(!Util.isArray(obj)){return false}var i=0,len=obj.length;for(;i<len;i++){if(obj.hasOwnProperty(i)){return false}}return true};Util.emptyObject=function(map){if(!map||typeof map!="object"){return map}if(Util.isArray(map)){map.length=0;return map}var i;for(i in map){if(map.hasOwnProperty(i)){delete map[i]
}}return map};Util.deleteUndefined=function(map){if(!map||typeof map!="object"){return map}var i;if(Util.isArray(map)){var len=map.length;for(i=len-1;i>-1;i--){if(map.hasOwnProperty(i)&&map[i]===undefined){map.splice(i,1)}}return map}for(i in map){if(map.hasOwnProperty(i)&&map[i]===undefined){delete map[i]
}}return map};Util.clone=function(obj,attr,deep){if(!obj){return obj}if(Util.isArray(obj)){if(deep===1){Array.prototype.slice.call(obj)}var clone=[],len=obj.length,i=0,nd=deep!==undefined?deep-1:undefined;for(;i<len;i++){if(i in obj){clone[i]=Util.clone(obj[i],attr,nd)
}}return clone}var clone={},i,noattr=Util.isEmptyObj(attr);if(deep===1){if(noattr){for(i in obj){if(obj.hasOwnProperty(i)){clone[i]=obj[i]}}}else{for(i in attr){if(attr.hasOwnProperty(i)&&obj.hasOwnProperty(i)){clone[i]=obj[i]}}}}else{var nd=deep!==undefined?deep-1:undefined;
if(noattr){for(i in obj){if(obj.hasOwnProperty(i)){clone[i]=Util.clone(obj[i],undefined,nd)}}}else{for(i in attr){if(attr.hasOwnProperty(i)&&obj.hasOwnProperty(i)){clone[i]=Util.clone(obj[i],undefined,nd)}}}}return clone};Util.toArray=function(obj){var arr=[],i;
for(i in obj){if(obj.hasOwnProperty(i)){arr.push(obj[i])}}return arr};Util.toArrayWithKey=function(obj){var arr=[],i;for(i in obj){if(obj.hasOwnProperty(i)){arr.push({key:i,val:obj[i]})}}return arr};Util.random=function(num){return Math.floor(num*Math.random())
};Util.bound=function(x,min,max){if(!isNaN(max)){x=Math.min(x,max)}if(!isNaN(min)){x=Math.max(x,min)}return x};Util.callFn=function(){if(arguments.length<=3){return arguments[1].call(arguments[0],arguments[2])}return arguments[1].apply(arguments[0],Array.prototype.slice.call(arguments,2))
};Util.formatNumber=function(num,precision,currency,decimal,comma){currency=currency===undefined?"&#8361; ":currency;precision=isNaN(precision)?0:precision;decimal=decimal===undefined?".":decimal;comma=comma===undefined?",":comma;var s=num<0?"-":"",i=parseInt(num=Math.abs(+num||0).toFixed(precision),10)+"",j=(j=i.length)>3?j%3:0;
return currency+s+(j?i.substr(0,j)+comma:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+comma)+(precision?decimal+Math.abs(num-i).toFixed(precision).slice(2):"")};Util.getBodyScroll=function(){var left=0,top=0;if(typeof(window.pageYOffset)==="number"){top=window.pageYOffset;
left=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){top=document.body.scrollTop;left=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){top=document.documentElement.scrollTop;
left=document.documentElement.scrollLeft}}}return[left,top]};Util.hasClass=function(node,className){if(node==null||className==null){return false}if(node.className===className){return true}if(node.className!==undefined){var cl=node.classList===undefined?Util.split(node.className):node.classList,i=0,len=cl.length;
for(;i<len;i++){if(cl[i]===className){return true}}}return false};Util.hasTagAndClass=function(node,tag,className){if(node==null||tag==null||className==null){return false}if(node.tagName===tag){if(node.className===className){return true}if(node.className!==undefined&&node.className.length>=className.length){var cl=node.classList===undefined?Util.split(node.className):node.classList,i=0,len=cl.length;
for(;i<len;i++){if(cl[i]===className){return true}}}}return false};Util.closest=function(node,className,end){if(Util.hasClass(node,className)){return node}var found;for(node=node.parentNode;Util.isNotNull(node)&&node!==end;node=node.parentNode){if(Util.hasClass(node,className)){return node
}}};Util.closestWithTag=function(node,tag,className,end){if(Util.hasTagAndClass(node,tag,className)){return node}var found;for(node=node.parentNode;Util.isNotNull(node)&&node!==end;node=node.parentNode){if(Util.hasTagAndClass(node,tag,className)){return node
}}};Util.findFirstByClass=function(node,className){if(node==null){return}if(Util.hasClass(node,className)){return node}var i=0,c=node.childNodes,clen=c.length,found;for(;i<clen;i++){if(Util.isNotNull(c[i])&&(found=Util.findFirstByClass(c[i],className))!==undefined){return found
}}};Util.findFirstByTagAndClass=function(node,tag,className){if(node==null){return}if(Util.hasTagAndClass(node,tag,className)){return node}var i=0,c=node.childNodes,clen=c.length,found;for(;i<clen;i++){if(Util.isNotNull(c[i])&&(found=Util.findFirstByTagAndClass(c[i],tag,className))!==undefined){return found
}}};Util.findByClass=function(node,className,list){if(list===undefined){list=[]}if(node==null){return list}if(Util.hasClass(node,className)){list.push(node)}var i=0,c=node.childNodes,clen=c.length;for(;i<clen;i++){if(Util.isNotNull(c[i])){Util.findByClass(c[i],className,list)
}}return list};Util.findByTagAndClass=function(node,tag,className,list){if(list===undefined){list=[]}if(node==null){return list}if(Util.hasTagAndClass(node,tag,className)){list.push(node)}var i=0,c=node.childNodes,clen=c.length;for(;i<clen;i++){if(Util.isNotNull(c[i])){Util.findByTagAndClass(c[i],tag,className,list)
}}return list};Util.getHead=function(){if(document.head!==undefined){return document.head}return document.getElementsByTagName("head")[0]};Util.appendTag=function(node,tag){return node.appendChild(document.createElement(tag))};Util.appendHTML=function(node,html){var temp=document.createElement("div"),len,i=0,res=[];
temp.innerHTML=html;len=temp.childNodes.length;for(;i<len;i++){res.push(node.appendChild(temp.firstChild))}return res};Util.createStyle=function(code){if(code==null){code=""}var css=document.createElement("style");css.type="text/css";css.rel="stylesheet";if(css.styleSheet!==undefined){css.styleSheet.cssText=code
}else{css.appendChild(document.createTextNode(code))}Util.getHead().appendChild(css);return css};Util.removeStyle=function(css){if(css!=null&&css.parentNode!=null){Util.getHead().removeChild(css)}};Util.setStyle=function(css,code){if(css==null){return""}if(css.styleSheet!==undefined){return(css.styleSheet.cssText=code)
}return(css.childNodes[0].nodeValue=code)};Util.appendStyle=function(css,code){if(css==null){return""}if(css.styleSheet!==undefined){return(css.styleSheet.cssText+=code)}return(css.childNodes[0].nodeValue+=code)};Util.getStyle=function(css){if(css==null){return""
}if(css.styleSheet!==undefined){return css.styleSheet.cssText}return css.childNodes[0].nodeValue};Util.appendScript=function(code){var script=document.createElement("script");script.type="text/javascript";if(script.text!==undefined){script.text=code}else{script.innerHTML=code
}Util.getHead().appendChild(script);return script};Util.appendScriptFile=function(filename){document.write('<script type="text/javascript" src="'+filename+'"><\/script>')};Util.outerHTML=function(node){if(node.outerHTML===undefined){var div=document.createElement("div");
div.appendChild(node.cloneNode(true));return div.innerHTML}return node.outerHTML};Util.index=function(node){var i=0,el=node;while((el=el.previousSibling)!=null){++i}return i};Util.contains=function(node,target,scope){var el=target;while(el!=null){if(el===node){return true
}if(el===scope){return false}el=el.parentNode}return false};Util.areEqualArrays=function(ar,br){if(ar==null||br==null){return false}if(ar===br){return true}if(ar.length!==br.length){return false}var i=0,len=ar.length;for(;i<len;i++){if((ar.hasOwnProperty(i)&&!br.hasOwnProperty(i))||(br.hasOwnProperty(i)&&!ar.hasOwnProperty(i))||ar[i]!==br[i]){return false
}}return true};Util.areEqualObjects=function(ar,br){if(ar==null||br==null){return false}if(ar===br){return true}if(typeof ar!=="object"||typeof br!=="object"){return false}var i;for(i in ar){if(ar.hasOwnProperty(i)){if(!br.hasOwnProperty(i)||ar[i]!==br[i]){return false
}}}for(i in br){if(br.hasOwnProperty(i)){if(!ar.hasOwnProperty(i)||ar[i]!==br[i]){return false}}}return true};Util.areEqualComplex=function(ar,br,arch){if(ar==null||br==null){return false}if(ar===br){return true}var len=arch.length,type=arch[0];if(len===1){if(type==="array"){return Util.areEqualArrays(ar,br)
}return Util.areEqualObjects(ar,br)}if(len>1){var subArch=arch.slice(1),i=0;if(type==="array"){if(ar.length!==br.length){return false}var alen=ar.length;for(;i<alen;i++){if(!br.hasOwnProperty(i)||!Util.areEqualComplex(ar[i],br[i],subArch)){return false}}return true
}else{for(i in ar){if(ar.hasOwnProperty(i)){if(!br.hasOwnProperty(i)||!Util.areEqualComplex(ar[i],br[i],subArch)){return false}}}for(i in br){if(br.hasOwnProperty(i)){if(!ar.hasOwnProperty(i)||!Util.areEqualComplex(ar[i],br[i],subArch)){return false}}}return true
}}};Util.typeCheck=function(type,obj,allowUndefined,allowNull,noThrow){if((allowUndefined&&obj===undefined)||(allowNull&&obj===null)){return true}switch(typeof type){case"string":if(typeof obj===type){return true}break;case"function":if(obj instanceof type){return true
}break}if(noThrow){return false}throw new TypeError("object is not a "+type+", but is a "+typeof obj)};Util.sprint=function(str,obj,prefix,suffix){Util.typeCheck("string",str);Util.typeCheck("object",obj);Util.typeCheck("string",prefix,true);Util.typeCheck("string",suffix,true);
var prefixLength,suffixLength,i;if(prefix===undefined){prefix="%"}if(suffix===undefined){suffix="%"}for(i in obj){if(obj.hasOwnProperty(i)){str=str.replace(new RegExp(prefix+i+suffix,"gm"),obj[i])}}return str};Util.tagReplaces={"&":"&amp;","<":"&lt;",">":"&gt;"};
Util.replaceTag=function(tag){return Util.tagReplaces[tag]||tag};Util.escapeHtmlTags=function(str){return str.replace(/[&<>]/g,Util.replaceTag)};Util.escapeRegExp=function(str){return str.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};Util.strReplace=function(str,replaceMap){var i,search=[];
for(i in replaceMap){if(replaceMap.hasOwnProperty(i)){search.push(escapeRegExp(i))}}return str.replace(new RegExp("("+search.join("|")+")","gm"),function(match){return replaceMap[match]})};Util.calCheckSize=function(){var res={},div=document.createElement("div");
document.body.appendChild(div);div.innerHTML="<input type='checkbox' style='margin:0;padding:0;overflow:hidden'/>";res.checkboxW=div.childNodes[0].offsetWidth;res.checkboxH=div.childNodes[0].offsetHeight;div.innerHTML="<input type='radio' style='margin:0;padding:0;overflow:hidden'/>";
res.radioW=div.childNodes[0].offsetWidth;res.radioH=div.childNodes[0].offsetHeight;document.body.removeChild(div);return res};Util.which=function(keys){var keyMap={},i=0,str,j;for(;i<keys.length;i++){str=keys[i].toLowerCase();if(str==="number"){for(j=48;j<=57;
j++){keyMap[j]=true}for(j=96;j<=105;j++){keyMap[j]=true}continue}else{if(str==="alphabet"){for(j=65;j<=90;j++){keyMap[j]=true}continue}else{if(str==="arrow"){for(j=37;j<=40;j++){keyMap[j]=true}continue}}}if(str.length>1){str=str.replace(/\s/g,"")}if(str.length>=3){str=str.replace(/numpad|num/g,"n").replace(/korean|kor/g,"kr")
}keyMap[Util.keyMapKeydown[str]]=true}return keyMap};Util.keyMapKeydown={backspace:8,tab:9,enter:13,shift:16,control:17,ctrl:17,alt:18,pause:19,"break":19,capslock:20,escape:27,esc:27,space:32," ":32,pageup:33,pgup:33,pagedown:34,pgdown:34,pgdn:34,end:35,home:36,leftarrow:37,left:37,uparrow:38,up:38,rightarrow:39,right:39,downarrow:40,down:40,insert:45,ins:45,"delete":46,del:46,"0":48,")":48,"1":49,"!":49,"2":50,"@":50,"3":51,"#":51,"4":52,"$":52,"5":53,"%":53,"6":54,"^":54,"7":55,"&":55,"8":56,"*":56,"9":57,"(":57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,n0:96,n1:97,n2:98,n3:99,n4:100,n5:101,n6:102,n7:103,n8:104,n9:105,"n*":106,"n+":107,"n-":109,"n.":110,"n/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,mute:173,volumedown:174,volumeup:175,":":186,";":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,kr:229};
Util.printEventPos=function(e){Util.print("client: ("+e.clientX+", "+e.clientY+"), layer: ("+e.layerX+", "+e.layerY+"), offset: ("+e.offsetX+", "+e.offsetY+"), page: ("+e.pageX+", "+e.pageY+"), screen: ("+e.screenX+", "+e.screenY+"), xy: ("+e.x+", "+e.y+")")
};Util.print=function(){if(!echo){return}if(arguments.length===1){echo(arguments[0])}else{Util.printGroup("Group");var i=0,len=arguments.length;for(;i<len;i++){echo(arguments[i])}Util.printGroupEnd()}};Util.printGroup=function(){if(console&&console.group){console.group(Array.prototype.slice.call(arguments).join(", "))
}};Util.printGroupEnd=function(){if(console&&console.groupEnd){console.groupEnd()}};Util.open=function(options){var ops={url:"about:blank",name:"_blank",channelmode:"no",directories:"yes",fullscreen:"no",height:undefined,left:undefined,location:"yes",menubar:"yes",resizable:"yes",scrollbars:"yes",status:"yes",titlebar:"yes",toolbar:"yes",top:undefined,width:undefined,replace:undefined},opt,specs;
if(Util.isNotNull(options)){for(opt in ops){if(ops.hasOwnProperty(opt)){ops[opt]=options[opt]}}}specs=Util.ifNull(ops.height,"","height="+ops.height+", ")+Util.ifNull(ops.left,"","left="+ops.left+", ")+Util.ifNull(ops.top,"","top="+ops.top+", ")+Util.ifNull(ops.width,"","width="+ops.width+", ")+"channelmode="+ops.channelmode+", directories="+ops.directories+", fullscreen="+ops.fullscreen+", location="+ops.location+", menubar="+ops.menubar+", resizable="+ops.resizable+", scrollbars="+ops.scrollbars+", status="+ops.status+", titlebar="+ops.titlebar+", toolbar="+ops.toolbar;
if(Util.isNull(ops.replace)){return window.open(ops.url,ops.name,specs)}return window.open(ops.url,ops.name,specs,ops.replace)};var Util$=window.Util$={};Util$.is$=function(val){return(val instanceof jQuery)?true:false};Util$.safe$=function(val){return(val instanceof jQuery)?val:$(val)
};Util$.unbindRemove=function(obj){obj.unbind().remove()};jQuery.fn.getBoundingRect=function(){var off=this.offset();return{left:off.left,top:off.top,width:this.outerWidth(),height:this.outerHeight()}};jQuery.fn.containsEvent=function(e){if(this.length===0){return false
}var box,contains,x,y;if(this.length<=1){box=this.getBoundingRect();x=e.pageX;y=e.pageY;return(x>=box.left&&x<=box.left+box.width&&y>=box.top&&y<=box.top+box.height)}contains=false;this.each(function(i,v){box=$(this).getBoundingRect();x=e.pageX;y=e.pageY;if(x>=box.left&&x<=box.left+box.width&&y>=box.top&&y<=box.top+box.height){contains=true;
return false}});return contains};Util$.baseurlOfHeadScript=function(filename){var url=$(document.getElementsByTagName("head")[0]).find("script[src$='"+filename+"']").attr("src");return url.substring(0,url.indexOf(filename))};Util$.calScrollbarDims=function(container){if(Util.isNotNull(window.__SCROLLBAR_DIM__)){return window.__SCROLLBAR_DIM__
}if(Util.isNotNull(window.opener)&&Util.isNotNull(window.opener.__SCROLLBAR_DIM__)){return window.opener.__SCROLLBAR_DIM__}var cont=Util$.safe$(container),dim,tmp;cont[0].innerHTML="<div id='scrollbardim' style='position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;overflow:scroll;'></div>";
tmp=$(document.getElementById("scrollbardim"));dim={w:tmp.width()-tmp[0].clientWidth,h:tmp.height()-tmp[0].clientHeight};cont[0].innerHTML="";window.__SCROLLBAR_DIM__=dim;return dim};var Tracer=window.Tracer=function(){this.stack="";this.timers={}};var prototype=Tracer.prototype;
prototype.print=function(str,timer,update){if(str===undefined){str=""}if(timer===undefined){timer="timer"}if(update===undefined){update=true}var old=this.timers[timer],now=(new Date()).getTime(),diff=Util.isNull(old)?0:now-old;Util.print((this.stack.length>0?this.stack+" :: ":"")+str+", Time elapsed since last update: "+diff+"ms");
if(update){this.timers[timer]=now}};prototype.addStack=function(str){this.stack=this.stack+" > "+str};prototype.removeStack=function(){this.stack=this.stack.substring(0,this.stack.lastIndexOf(" > "))};prototype.clearStack=function(){this.stack=""};JGM={version:"1.2.3"};
JGM.a={ArrayExtIE:{filename:"array_ext_ie.js",readyState:"notloaded",required:false,cacheModule:false},Cache:{filename:"jgrid_cache.js",readyState:"notloaded",required:true,cacheModule:true},Cell:{filename:"jgrid_cell.js",readyState:"notloaded",required:true,cacheModule:false},CheckManager:{filename:"jgrid_checkmanager.js",readyState:"notloaded",required:false,cacheModule:true},ColDefManager:{filename:"jgrid_coldefmanager.js",readyState:"notloaded",required:true,cacheModule:true},ColGroup:{filename:"jgrid_colgroup.js",readyState:"notloaded",required:false,cacheModule:true},ColHeader:{filename:"jgrid_colheader.js",readyState:"notloaded",required:true,cacheModule:true},Collapser:{filename:"jgrid_collapser.js",readyState:"notloaded",required:false,cacheModule:true},DataManager:{filename:"jgrid_datamanager.js",readyState:"notloaded",required:true,cacheModule:true},DataCreator:{filename:"jgrid_datacreator.js",readyState:"notloaded",required:false,cacheModule:true},EditManager:{filename:"jgrid_editmanager.js",readyState:"notloaded",required:true,cacheModule:true},Editor:{filename:"jgrid_editmanager.js",readyState:"notloaded",required:true,cacheModule:true},EngineExt:{filename:"engine_ext.js",readyState:"notloaded",required:true,cacheModule:false},EventManager:{filename:"jgrid_eventmanager.js",readyState:"notloaded",required:true,cacheModule:true},Footer:{filename:"jgrid_footer.js",readyState:"notloaded",required:false,cacheModule:true},HeaderTree:{filename:"jgrid_headertree.js",readyState:"notloaded",required:false,cacheModule:true},Grid:{filename:"jgrid_grid.js",readyState:"notloaded",required:true,cacheModule:true},GridManager:{filename:"jgrid_manager.js",readyState:"loaded",required:true,cacheModule:false},MenuBar:{filename:"jgrid_menubar.js",readyState:"notloaded",required:true,cacheModule:true},ViewportManager:{filename:"jgrid_viewportmanager.js",readyState:"notloaded",required:true,cacheModule:true},SelectionManager:{filename:"jgrid_selectionmanager.js",readyState:"notloaded",required:false,cacheModule:true},SearchManager:{filename:"jgrid_searchmanager.js",readyState:"notloaded",required:false,cacheModule:true},TooltipManager:{filename:"jgrid_tooltipmanager.js",readyState:"notloaded",required:false,cacheModule:true},Tracer:{filename:"tracer.js",readyState:"notloaded",required:false,cacheModule:false},Tree:{filename:"tree.js",readyState:"notloaded",required:false,cacheModule:true},TreeNode:{filename:"tree.js",readyState:"notloaded",required:false,cacheModule:false},Util:{filename:"util.js",readyState:"notloaded",required:true,cacheModule:false},"Util$":{filename:"util_jquery.js",readyState:"notloaded",required:true,cacheModule:false}};
JGM.create=function(name,args){if(Util.isNull(args)){args={}}if(this.a[name].cacheModule){args.mid="JGM"+this.m.length++;var module=this[name].X(args);if(!this.m.hasOwnProperty(name)){this.m[name]={}}this.m[name][module.mid]=module;if(name==="Grid"&&Util.isNotNull(module.name)){this.gridMap[module.name]=module
}return module}else{return this[name].X(args)}};JGM.q=function(obj,args){var cur,arr,i,j,len;for(i in args){if(args.hasOwnProperty(i)){switch(i){case"map":cur=args[i];if(Util.isString(cur)){arr=Util.split(cur);len=arr.length;for(j=0;j<len;j++){JGM.l(obj,arr[j])
}}else{if(cur instanceof Array){len=cur.length;for(j=0;j<len;j++){Util.emptyObject(cur[j])}}else{Util.emptyObject(cur)}}break;case"array":cur=args[i];if(Util.isString(cur)){arr=Util.split(cur);len=arr.length;for(j=0;j<len;j++){JGM.r(obj,arr[j])}}else{cur.length=0
}break;case"$":cur=args[i];if(Util.isString(cur)){arr=Util.split(cur);len=arr.length;for(j=0;j<len;j++){JGM.n(obj,arr[j])}}else{if(cur instanceof Array){len=cur.length;for(j=0;j<len;j++){Util$.unbindRemove(cur[j])}}else{Util$.unbindRemove(cur)}}break;case"style":cur=args[i];
if(Util.isString(cur)){arr=Util.split(cur);len=arr.length;for(j=0;j<len;j++){JGM.o(obj,arr[j])}}else{if(cur instanceof Array){len=cur.length;for(j=0;j<len;j++){Util.removeStyle(cur[j])}}else{Util.removeStyle(cur)}}break;case"property":cur=args[i];if(Util.isString(cur)){arr=Util.split(cur);
len=arr.length;for(j=0;j<len;j++){delete obj[arr[j]]}}else{if(cur instanceof Array){len=cur.length;for(j=0;j<len;j++){delete obj[cur[j]]}}}break;case"module":cur=args[i];if(Util.isString(cur)){arr=Util.split(cur);len=arr.length;for(j=0;j<len;j++){JGM.p(obj,arr[j])
}}else{if(cur instanceof Array){len=cur.length;for(j=0;j<len;j++){cur[j].destroy()}}else{cur.destroy()}}break;case"name":if(obj.hasOwnProperty("mid")){JGM.f(args[i],obj.mid);delete obj.mid}break;case"path":if(obj.hasOwnProperty("grid")&&obj.grid.hasOwnProperty(args[i])){delete obj.grid[args[i]];
delete obj.grid}break}}}Util.emptyObject(obj)};JGM.l=function(obj,name){if(obj.hasOwnProperty(name)){Util.emptyObject(obj[name]);delete obj[name]}};JGM.r=function(obj,name){if(obj.hasOwnProperty(name)){obj[name].length=0;delete obj[name]}};JGM.n=function(obj,name){if(obj.hasOwnProperty(name)){Util$.unbindRemove(obj[name]);
delete obj[name]}};JGM.o=function(obj,name){if(obj.hasOwnProperty(name)){Util.removeStyle(obj[name]);delete obj[name]}};JGM.p=function(obj,name){if(obj.hasOwnProperty(name)){obj[name].destroy();delete obj[name]}};JGM.f=function(name,mid){delete this.m[name][mid]
};JGM.grid=function(args){return this.create("Grid",args)};JGM.gridMap={};JGM.getGrid=function(name){if(Util.isNotNull(name)&&this.gridMap.hasOwnProperty(name)){return this.gridMap[name]}};JGM.b=function(name,module){if(Util.isNotNull(module)){this[name]=module
}this.a[name].readyState="loaded"};JGM.c=function(name){return this.a[name].readyState==="loaded"};JGM.d=function(name,callback){var url,baseurl=Util$.baseurlOfHeadScript(this.GridManager.filename),i,len,toAdd,contains,j,checker;if(name instanceof Array){url=[];
len=name.length;for(i=0;i<len;i++){toAdd=baseurl+this[name[i]].filename;contains=false;for(j=0;j<url.length;j++){if(url[j]===toAdd){contains=true;break}}if(!contains&&!this.c(name[i])){url.push(toAdd)}}if(Util.isFunction(callback)){checker=function(){var i=0;
for(;i<name.length;i++){if(!JGM.c(name[i])){return false}}return true};$("body").bind("moduleload.Grid",function(e){if(checker()){$("body").unbind("moduleload.Grid");callback()}})}if(url.length===0){callback()}for(i=0;i<url.length;i++){Util.appendScriptFile(url[i])
}}else{if(this.c(name)){if(Util.isFunction(callback)){callback()}}url=baseurl+this.a[name].filename;if(Util.isFunction(callback)){$("body").bind("moduleload.Grid",function(e){if(e.modulename===name&&e.readyState==="loaded"){$("body").unbind("moduleload.Grid");
callback()}})}Util.appendScriptFile(url)}};JGM.start=function(gridOptions,colDefs,callback){var requiredModules=[],i=3,len=arguments.length,module,map=JGM.a;for(;i<len;i++){requiredModules.push(arguments[i])}if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){requiredModules.push("ArrayExtIE")
}if(Util.isNotNull(gridOptions.CheckManager)){requiredModules.push("CheckManager")}if(Util.isNotNull(gridOptions.Collapser)){requiredModules.push("Collapser")}if(Util.isNotNull(gridOptions.EditManager)){requiredModules.push("EditManager")}len=requiredModules.length;
for(i=0;i<len;i++){map[requiredModules[i]].required=true}requiredModules=[];for(i in map){if(map.hasOwnProperty(i)){module=map[i];if(!Util.isFunction(module)&&module.readyState==="notloaded"&&module.required===true){requiredModules.push(i)}}}this.d(requiredModules,callback)
};JGM.e=function(defaults,options,map){var opt=Util.ifNull(options,{}),i;if(Util.isNotNull(map)){for(i in map){if(map.hasOwnProperty(i)){if(opt.hasOwnProperty(i)){opt[map[i]]=opt[i];delete opt[i]}}}}$.extend(true,defaults,opt);$.extend(true,opt,defaults);return opt
};JGM.m={length:0};JGM.g={a:"-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;",b:"-webkit-user-drag:none;-moz-user-drag:none;user-drag:none;",c:undefined,d:undefined,e:undefined,f:undefined};JGM.h=false;
JGM.i={a:function(e){var i,g=JGM.m.Grid;for(i in g){if(g.hasOwnProperty(i)){g[i].N(e)}}},b:function(e){var i,g=JGM.m.Grid;for(i in g){if(g.hasOwnProperty(i)){g[i].K(e)}}},c:function(e){var i,g=JGM.m.Grid;for(i in g){if(g.hasOwnProperty(i)){g[i].G(e)}}}};JGM.j=function(){if(!this.h){$(document).bind({mousemove:this.i.a,mouseup:this.i.b});
$(window).resize(this.i.c);this.h=true}};JGM.k=function(){if(this.h){$(document).unbind({mousemove:this.i.a,mouseup:this.i.b});$(window).unbind("resize",this.i.c);this.h=false}};JGM.lang={};JGM.events={};JGM.grids={};JGM.error={LENGTH_NOT_EQUAL:"Lengths are not equal",NOT_MODIFIABLE:"Cannot modify value for '%0'.",KEY_UNDEFINED:"Column '%0' is undefined.",BAD_NULL:"Column '%0' cannot be null.",DUP_KEY:"Duplicate column key '%0'.",DUP_ENTRY:"Duplicate entry '%0' for '%1'.",KEY_NOT_FOUND:"'%0' for '%1' doesn't exist in table.",PARSE_ERROR:"Cannot parse '%0' for '%1'.",INVALID_DEFAULT:"Invalid default value '%0' for '%1'.",MULTIPLE_PRI_KEY:"Multiple primary key defined.",DATA_TOO_LONG:"Data '%0' too long for column '%1'. Maximum is %2.",DATA_TOO_SHORT:"Data '%0' too short for column '%1'. Minimum is %2.",WRONG_LENGTH:"Length of data '%0' is not '%1' characters long for column '%2'.",BIGGER_THAN:"Data '%0' too big for column '%1'. Maximum is %2.",SMALLER_THAN:"Data '%0' too small for column '%1'. Minimum is %2.",WRONG_VALUE:"Incorrect value: '%0' for '%1'."};
var COMPILED=false;var goog=goog||{};goog.global=window;window.goog=goog;goog.DEBUG=true;goog.LOCALE="en";goog.provide=function(name){if(!COMPILED){if(goog.isProvided_(name)){throw Error('Namespace "'+name+'" already declared.')}delete goog.implicitNamespaces_[name];
var namespace=name;while((namespace=namespace.substring(0,namespace.lastIndexOf(".")))){if(goog.getObjectByName(namespace)){break}goog.implicitNamespaces_[namespace]=true}}goog.exportPath_(name)};goog.setTestOnly=function(opt_message){if(COMPILED&&!goog.DEBUG){opt_message=opt_message||"";
throw Error("Importing test-only code into non-debug environment"+opt_message?": "+opt_message:".")}};if(!COMPILED){goog.isProvided_=function(name){return !goog.implicitNamespaces_[name]&&!!goog.getObjectByName(name)};goog.implicitNamespaces_={}}goog.exportPath_=function(name,opt_object,opt_objectToExportTo){var parts=name.split(".");
var cur=opt_objectToExportTo||goog.global;if(!(parts[0] in cur)&&cur.execScript){cur.execScript("var "+parts[0])}for(var part;parts.length&&(part=parts.shift());){if(!parts.length&&goog.isDef(opt_object)){cur[part]=opt_object}else{if(cur[part]){cur=cur[part]
}else{cur=cur[part]={}}}}};goog.getObjectByName=function(name,opt_obj){var parts=name.split(".");var cur=opt_obj||goog.global;for(var part;part=parts.shift();){if(goog.isDefAndNotNull(cur[part])){cur=cur[part]}else{return null}}return cur};goog.globalize=function(obj,opt_global){var global=opt_global||goog.global;
for(var x in obj){global[x]=obj[x]}};goog.addDependency=function(relPath,provides,requires){if(!COMPILED){var provide,require;var path=relPath.replace(/\\/g,"/");var deps=goog.dependencies_;for(var i=0;provide=provides[i];i++){deps.nameToPath[provide]=path;
if(!(path in deps.pathToNames)){deps.pathToNames[path]={}}deps.pathToNames[path][provide]=true}for(var j=0;require=requires[j];j++){if(!(path in deps.requires)){deps.requires[path]={}}deps.requires[path][require]=true}}};goog.ENABLE_DEBUG_LOADER=true;goog.require=function(name){if(!COMPILED){if(goog.isProvided_(name)){return
}if(goog.ENABLE_DEBUG_LOADER){var path=goog.getPathFromDeps_(name);if(path){goog.included_[path]=true;goog.writeScripts_();return}}var errorMessage="goog.require could not find: "+name;if(goog.global.console){goog.global.console.error(errorMessage)}throw Error(errorMessage)
}};goog.basePath="";goog.global.CLOSURE_BASE_PATH;goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.identityFunction=function(var_args){return arguments[0]};goog.abstractMethod=function(){throw Error("unimplemented abstract method")
};goog.addSingletonGetter=function(ctor){ctor.getInstance=function(){return ctor.instance_||(ctor.instance_=new ctor())}};if(!COMPILED&&goog.ENABLE_DEBUG_LOADER){goog.included_={};goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}};
goog.inHtmlDocument_=function(){var doc=goog.global.document;return typeof doc!="undefined"&&"write" in doc};goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else{if(!goog.inHtmlDocument_()){return
}}var doc=goog.global.document;var scripts=doc.getElementsByTagName("script");for(var i=scripts.length-1;i>=0;--i){var src=scripts[i].src;var qmark=src.lastIndexOf("?");var l=qmark==-1?src.length:qmark;if(src.substr(l-7,7)=="base.js"){goog.basePath=src.substr(0,l-7);
return}}};goog.importScript_=function(src){var importScript=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(!goog.dependencies_.written[src]&&importScript(src)){goog.dependencies_.written[src]=true}};goog.writeScriptTag_=function(src){if(goog.inHtmlDocument_()){var doc=goog.global.document;
doc.write('<script type="text/javascript" src="'+src+'"><\/script>');return true}else{return false}};goog.writeScripts_=function(){var scripts=[];var seenScript={};var deps=goog.dependencies_;function visitNode(path){if(path in deps.written){return}if(path in deps.visited){if(!(path in seenScript)){seenScript[path]=true;
scripts.push(path)}return}deps.visited[path]=true;if(path in deps.requires){for(var requireName in deps.requires[path]){if(!goog.isProvided_(requireName)){if(requireName in deps.nameToPath){visitNode(deps.nameToPath[requireName])}else{throw Error("Undefined nameToPath for "+requireName)
}}}}if(!(path in seenScript)){seenScript[path]=true;scripts.push(path)}}for(var path in goog.included_){if(!deps.written[path]){visitNode(path)}}for(var i=0;i<scripts.length;i++){if(scripts[i]){goog.importScript_(goog.basePath+scripts[i])}else{throw Error("Undefined script input")
}}};goog.getPathFromDeps_=function(rule){if(rule in goog.dependencies_.nameToPath){return goog.dependencies_.nameToPath[rule]}else{return null}};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS){}}goog.typeOf=function(value){var s=typeof value;if(s=="object"){if(value){if(value instanceof Array){return"array"
}else{if(value instanceof Object){return s}}var className=Object.prototype.toString.call((value));if(className=="[object Window]"){return"object"}if((className=="[object Array]"||typeof value.length=="number"&&typeof value.splice!="undefined"&&typeof value.propertyIsEnumerable!="undefined"&&!value.propertyIsEnumerable("splice"))){return"array"
}if((className=="[object Function]"||typeof value.call!="undefined"&&typeof value.propertyIsEnumerable!="undefined"&&!value.propertyIsEnumerable("call"))){return"function"}}else{return"null"}}else{if(s=="function"&&typeof value.call=="undefined"){return"object"
}}return s};goog.propertyIsEnumerableCustom_=function(object,propName){if(propName in object){for(var key in object){if(key==propName&&Object.prototype.hasOwnProperty.call(object,propName)){return true}}}return false};goog.propertyIsEnumerable_=function(object,propName){if(object instanceof Object){return Object.prototype.propertyIsEnumerable.call(object,propName)
}else{return goog.propertyIsEnumerableCustom_(object,propName)}};goog.isDef=function(val){return val!==undefined};goog.isNull=function(val){return val===null};goog.isDefAndNotNull=function(val){return val!=null};goog.isArray=function(val){return goog.typeOf(val)=="array"
};goog.isArrayLike=function(val){var type=goog.typeOf(val);return type=="array"||type=="object"&&typeof val.length=="number"};goog.isDateLike=function(val){return goog.isObject(val)&&typeof val.getFullYear=="function"};goog.isString=function(val){return typeof val=="string"
};goog.isBoolean=function(val){return typeof val=="boolean"};goog.isNumber=function(val){return typeof val=="number"};goog.isFunction=function(val){return goog.typeOf(val)=="function"};goog.isObject=function(val){var type=goog.typeOf(val);return type=="object"||type=="array"||type=="function"
};goog.getUid=function(obj){return obj[goog.UID_PROPERTY_]||(obj[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(obj){if("removeAttribute" in obj){obj.removeAttribute(goog.UID_PROPERTY_)}try{delete obj[goog.UID_PROPERTY_]}catch(ex){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);
goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(obj){var type=goog.typeOf(obj);if(type=="object"||type=="array"){if(obj.clone){return obj.clone()}var clone=type=="array"?[]:{};for(var key in obj){clone[key]=goog.cloneObject(obj[key])
}return clone}return obj};Object.prototype.clone;goog.bindNative_=function(fn,selfObj,var_args){return(fn.call.apply(fn.bind,arguments))};goog.bindJs_=function(fn,selfObj,var_args){if(!fn){throw new Error()}if(arguments.length>2){var boundArgs=Array.prototype.slice.call(arguments,2);
return function(){var newArgs=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(newArgs,boundArgs);return fn.apply(selfObj,newArgs)}}else{return function(){return fn.apply(selfObj,arguments)}}};goog.bind=function(fn,selfObj,var_args){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1){goog.bind=goog.bindNative_
}else{goog.bind=goog.bindJs_}return goog.bind.apply(null,arguments)};goog.partial=function(fn,var_args){var args=Array.prototype.slice.call(arguments,1);return function(){var newArgs=Array.prototype.slice.call(arguments);newArgs.unshift.apply(newArgs,args);
return fn.apply(this,newArgs)}};goog.mixin=function(target,source){for(var x in source){target[x]=source[x]}};goog.now=Date.now||(function(){return +new Date()});goog.globalEval=function(script){if(goog.global.execScript){goog.global.execScript(script,"JavaScript")
}else{if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _et_ = 1;");if(typeof goog.global._et_!="undefined"){delete goog.global._et_;goog.evalWorksForGlobals_=true}else{goog.evalWorksForGlobals_=false}}if(goog.evalWorksForGlobals_){goog.global.eval(script)
}else{var doc=goog.global.document;var scriptElt=doc.createElement("script");scriptElt.type="text/javascript";scriptElt.defer=false;scriptElt.appendChild(doc.createTextNode(script));doc.body.appendChild(scriptElt);doc.body.removeChild(scriptElt)}}else{throw Error("goog.globalEval not available")
}}};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;goog.getCssName=function(className,opt_modifier){var getMapping=function(cssName){return goog.cssNameMapping_[cssName]||cssName};var renameByParts=function(cssName){var parts=cssName.split("-");
var mapped=[];for(var i=0;i<parts.length;i++){mapped.push(getMapping(parts[i]))}return mapped.join("-")};var rename;if(goog.cssNameMapping_){rename=goog.cssNameMappingStyle_=="BY_WHOLE"?getMapping:renameByParts}else{rename=function(a){return a}}if(opt_modifier){return className+"-"+rename(opt_modifier)
}else{return rename(className)}};goog.setCssNameMapping=function(mapping,style){goog.cssNameMapping_=mapping;goog.cssNameMappingStyle_=style};goog.getMsg=function(str,opt_values){var values=opt_values||{};for(var key in values){var value=(""+values[key]).replace(/\$/g,"$$$$");
str=str.replace(new RegExp("\\{\\$"+key+"\\}","gi"),value)}return str};goog.exportSymbol=function(publicPath,object,opt_objectToExportTo){goog.exportPath_(publicPath,object,opt_objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol
};goog.inherits=function(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;childCtor.superClass_=parentCtor.prototype;childCtor.prototype=new tempCtor();childCtor.prototype.constructor=childCtor};goog.base=function(me,opt_methodName,var_args){var caller=arguments.callee.caller;
if(caller.superClass_){return caller.superClass_.constructor.apply(me,Array.prototype.slice.call(arguments,1))}var args=Array.prototype.slice.call(arguments,2);var foundCaller=false;for(var ctor=me.constructor;ctor;ctor=ctor.superClass_&&ctor.superClass_.constructor){if(ctor.prototype[opt_methodName]===caller){foundCaller=true
}else{if(foundCaller){return ctor.prototype[opt_methodName].apply(me,args)}}}if(me[opt_methodName]===caller){return me.constructor.prototype[opt_methodName].apply(me,args)}else{throw Error("goog.base called from a method of one name to a method of a different name")
}};goog.scope=function(fn){fn.call(goog.global)};(function(){function Disposable(args){}var proto=Disposable.prototype,isArray=Util.isArray;proto.dispose=dispose;function dispose(level,others){level=level||0;var i,val;if(level!==0){for(i in this){if(this.hasOwnProperty(i)){val=this[i];
if(val){if(val.dispose){val.dispose(level-1,others)}else{if(others&&typeof val=="object"){if(isArray(val)){val.length=0}else{dispose.call(val,level-1,others)}}}}delete this[i]}}}else{for(i in this){if(this.hasOwnProperty(i)){delete this[i]}}}}JGM.lang.Disposable=Disposable
}());(function(){function EventDispatcher(args){this._handlers={}}goog.inherits(EventDispatcher,JGM.lang.Disposable);var proto=EventDispatcher.prototype,dispose=proto.dispose;proto.dispose=function(){dispose.call(this,-1,true)};proto.addEventListener=function(type,listener){type=type+"";
if(!type){throw new Error("Invalid event type: "+type)}if(typeof listener!="function"){throw new Error("Event listener must be a function")}var map=this._handlers,listeners;if(!map.hasOwnProperty(type)){map[type]=[]}listeners=map[type];if(listeners.indexOf(listener)===-1){listeners.push(listener)
}};proto.removeEventListener=function(type,listener){type=type+"";var map=this._handlers;if(!map.hasOwnProperty(type)){return}var listeners=map[type],index=-1;while((index=listeners.indexOf(listener,index+1))!==-1){listeners.splice(index,1)}if(listeners.length===0){delete map[type]
}};proto.dispatchEvent=function(event){if(!event||!event.type){throw new Error("Invalid event")}var map=this._handlers,type=event.type+"",listeners;if(map.hasOwnProperty(type)){listeners=map[type];var i=0,l=listeners.length;for(;i<l&&!event.stopPropagation;
i++){listeners[i].call(this,event)}}};JGM.events.EventDispatcher=EventDispatcher})();(function(){function Column(args){if(!(args.manager&&typeof args.manager=="object")){throw new Error("Column needs a valid manager!")}this.manager=args.manager;this.key=args.key+"";
if(!this.key){throw new Error("Column needs a non-empty key!")}var error="column key="+this.key;if(this.manager.hasKey(this.key)){throw new Error("Duplicate column key!"+error)}this.name=args.name?args.name+"":"";this.title=args.title?args.title+"":"";this.noName=!!args.noName;
this.noTitle=!!args.noTitle;this.type=args.type+""||null;this.defaultValue=args.defaultValue;this.inputOnCreate=!!args.inputOnCreate;this.width=Number(args.width);this.width=this.width||90;this.minW=Number(args.minW);this.minW=this.minW||30;this.maxW=Number(args.maxW)||null;
this.resizable=!!args.resizable;this.hidden=!!args.hidden;this.noSearch=!!args.noSearch;this.tooltipEnabled=!!args.tooltipEnabled;this.colClass=args.colClass+""||null;this.style=args.style+""||null;this.headerStyle=args.headerStyle+""||null;if(args.parser&&typeof args.parser!="function"){throw new Error("Invalid parser!"+error)
}this.parser=args.parser||null;if(args.validator&&typeof args.validator!="function"){throw new Error("Invalid validator!"+error)}this.validator=args.validator||null;if(args.renderer&&typeof args.renderer!="function"){throw new Error("Invalid renderer!"+error)
}this.renderer=args.renderer||null;if(args.sumRenderer&&typeof args.sumRenderer!="function"){throw new Error("Invalid sum renderer!"+error)}this.sumRenderer=args.sumRenderer||null;if(args.editor&&typeof args.editor!="object"){throw new Error("Invalid editor!"+error)
}this.editor=args.editor||null;this.sorter=args.sorter||null;this.filter=args.filter||null}goog.inherits(Column,JGM.events.EventDispatcher);var proto=Column.prototype;proto.show=function(){if(this.hidden){this.hidden=false;this.dispatchEvent("setHidden",{type:"hidden",value:false});
return true}return false};proto.hide=function(){if(!this.hidden){this.hidden=true;this.trigger("setHidden",true);return true}return false};proto.setHidden=function(hidden){return hidden?this.hide():this.show()};proto.setWidth=function(w){w=Number(w);if(w&&this.width!==w){this.width=w;
this.trigger("setWidth",w);return w}return false};proto.setRenderer=function(renderer){if(this.renderer!==renderer){if(renderer&&typeof renderer!="function"){throw new Error("Invalid renderer!"+error)}this.renderer=renderer||null;this.trigger("setRenderer",renderer)
}};JGM.grids.Column=Column}());function TreeNode(args){this.tree=args.tree;this.data=args.data;this.nodeId=args.nodeId;this.level;this.parent;this.childrenMap={};this.children=[]}TreeNode.X=function(args){return new TreeNode(args)};var prototype=TreeNode.prototype;
prototype.destroy=function(){this.detach();delete this.tree;delete this.data;delete this.nodeId;delete this.childrenMap;delete this.children};prototype.destroyCompletely=function(){this.detachCompletely();delete this.tree;delete this.data;delete this.nodeId;
delete this.childrenMap;delete this.children};prototype.destroyDown=function(){if(Util.isNotNull(this.parent)){this.parent.removeChild(this)}this.traverse({post:true,fn:function(){this.destroy()}})};prototype.detach=function(){delete this.parent;delete this.level;
this.children.length=0;this.childrenMap={}};prototype.detachCompletely=function(){if(Util.isNotNull(this.parent)){this.parent.removeChild(this)}this.removeAllChildren();delete this.parent;delete this.level};prototype.detachDown=function(){if(Util.isNotNull(this.parent)){this.parent.removeChild(this)
}this.traverse({post:true,fn:function(){this.detach()}})};prototype.isRoot=function(){return Util.isNull(this.parent)};prototype.getRoot=function(){this.tree.root};prototype.isLeaf=function(){return this.children.length===0};prototype.setParent=function(node){if(this.parent===node){return
}if(Util.isNotNull(this.parent)){this.parent.removeChild(this)}this.parent=node;delete this.level;if(Util.isNotNull(node)){node.addChild(this)}};prototype.hasChild=function(node){return this.childrenMap.hasOwnProperty(node.nodeId)};prototype.addChild=function(child){if(this.hasChild(child)){return
}this.children.push(child);this.childrenMap[child.nodeId]=this.children.length-1;child.setParent(this)};prototype.addChildAt=function(index,child){var i;if(this.hasChild(child)){i=this.childrenMap[child.nodeId];if(i===index){return}this.children.removeAt(i)
}this.children.addAt(index,child);if(Util.isNotNull(i)&&i<index){this.resetChildIdx(i)}else{this.resetChildIdx(index)}child.setParent(this)};prototype.removeChild=function(child){if(this.hasChild(child)){var i=this.childrenMap[child.nodeId];this.children.removeAt(i);
delete this.childrenMap[child.nodeId];this.resetChildIdx(i);delete child.parent;delete child.level}};prototype.removeChildAt=function(i){var child=this.children[i];this.children.removeAt(i);delete this.childrenMap[child.nodeId];this.resetChildIdx(i);delete child.parent;
delete child.level};prototype.resetChildIdx=function(from){if(Util.isNull(from)){from=0}var i=from,children=this.children,len=children.length,map=this.childrenMap;for(;i<len;i++){map[children[i].nodeId]=i}};prototype.removeAllChildren=function(){var i=0,children=this.children,len=children.length;
for(;i<len;i++){delete children[i].parent;delete children[i].level}children.length=0;this.childrenMap={}};prototype.getSiblings=function(){if(this.isRoot()){return[]}var siblings=this.parent.children.slice();siblings.removeAt(this.parent.getChildIdx(this));
return siblings};prototype.getChildIdx=function(node){return this.childrenMap[node.nodeId]};prototype.getIdx=function(){if(this.isRoot()){return -1}return this.parent.getChildIdx(this)};prototype.getPath=function(){return this.traverse({res:[],up:true,post:true,fn:function(args){if(!this.isRoot()){args.res.push(this.getIdx())
}}}).res};prototype.getAncestors=function(){var args={res:[],up:true,post:true,fn:function(args){args.res.push(this)}};this.traverse(args);args.res.pop();return args.res};prototype.getDescendents=function(){var args={res:[],fn:function(args){args.res.push(this)
}};this.traverse(args);args.res.shift();return args.res};prototype.getLevel=function(){if(this.isRoot()){return(this.level=-1)}return(this.level=this.parent.getLevel()+1)};prototype.find=function(dataToFind){return this.traverse({fn:function(args){if(this.data===dataToFind){args.res=this;
args.stop=true}}}).res};prototype.traverse=function(args,index){if(args.stop){return args}if(args.up){if(this.isRoot()){this.callFn(args)}else{if(args.post){this.parent.traverse(args);this.callFn(args)}else{this.callFn(args);this.parent.traverse(args)}}}else{var i=0,c=this.children,len=c.length;
if(args.post){for(;i<len;i++){c[i].traverse(args,i)}this.callFn(args,index)}else{this.callFn(args,index);if(args.propagate===false){delete args.propagate}else{for(;!args.stop&&i<len;i++){c[i].traverse(args,i)}}}}return args};prototype.traverseChildren=function(args){var i=0,c=this.children,len=c.length;
for(;i<len;i++){c[i].traverse(args,i)}};prototype.traverseParent=function(args){if(Util.isNotNull(this.parent)){this.parent.traverse(args)}};prototype.callFn=function(args,index){if(!args.stop){if(Util.isNull(args.target)){Util.callFn(this,args.fn,args,index)
}else{args.node=this;Util.callFn(args.target,args.fn,args,index)}}};function Tree(args){this.mid=args.mid;this.list=args.list;var options={nodeKey:"nodeId",parentKey:"parentId"};this.Z=JGM.e(options,args.options);this.map={};this.root=new TreeNode({tree:this});
this.infants={}}Tree.X=function(args){return new Tree(args)};prototype=Tree.prototype;prototype.Y=function(){this.makeTree()};prototype.destroy=function(){this.root.destroyDown();this.map={};this.emptyInfants();delete this.list;delete this.Z;delete this.map;
delete this.root;delete this.infants;JGM.f("Tree",this.mid);delete this.mid};prototype.detach=function(){this.root.detachDown();this.emptyInfants()};prototype.emptyInfants=function(){var i,inf=this.infants;for(i in inf){if(inf.hasOwnProperty(i)){inf[i].length=0
}}this.infants={}};prototype.reattach=function(list){this.detach();if(Util.isNull(list)){list=this.list}var nodeKey=this.Z.nodeKey,map=this.map,len=list.length,i=0;for(;i<len;i++){this.attachNode(map[list[i][nodeKey]])}};prototype.makeTree=function(list){if(Util.isNull(list)){list=this.list
}var i=0,len=list.length;for(;i<len;i++){this.createNode(list[i])}};prototype.hasNode=function(data){return Util.isNotNull(data)&&this.map.hasOwnProperty(data[this.Z.nodeKey])};prototype.getNode=function(data){return this.map[data[this.Z.nodeKey]]};prototype.getNodeByNodeId=function(nodeId){return this.map[nodeId]
};prototype.createNode=function(data){if(this.hasNode()){return}var nodeId=data[this.Z.nodeKey],node=new TreeNode({tree:this,data:data,nodeId:nodeId});this.map[nodeId]=node;this.attachNode(node);return node};prototype.adoptInfants=function(node,nodeId){if(this.infants.hasOwnProperty(nodeId)){var list=this.infants[nodeId],i=0,len=list.length;
for(;i<len;i++){node.addChild(list[i])}list.length=0;delete this.infants[nodeId]}};prototype.attachNode=function(node){var nodeId=node.nodeId,parentId=node.data[this.Z.parentKey];this.adoptInfants(node,nodeId);if(Util.isNull(parentId)||parentId==nodeId){this.root.addChild(node);
return true}if(this.map.hasOwnProperty(parentId)){this.map[parentId].addChild(node);return true}this.addToInfants(node,parentId);return false};prototype.changeNodeId=function(node,before,newId){if(before===newId){return}delete this.map[before];this.map[newId]=node;
this.removeChildren(node);node.nodeId=node.data[this.Z.nodeKey]=newId;if(Util.isNotNull(node.parent)){node.parent.childrenMap[newId]=node.parent.childrenMap[before];delete node.parent.childrenMap[before]}this.adoptInfants(node,newId)};prototype.changeParentId=function(node,before,newId){if(before===newId){return
}if(Util.isNull(node.parent)){this.removeFromInfants(node,before)}var parent=this.map[newId];node.setParent(parent);node.data[this.Z.parentKey]=newId;if(Util.isNull(parent)){this.addToInfants(node,newId)}};prototype.destroyNodeByData=function(data){this.destroyNode(this.getNode(data))
};prototype.destroyNode=function(node){this.removeChildren(node);this.removeFromInfants(node);this.removeFromMap(node);node.destroyCompletely()};prototype.removeFromMap=function(node){delete this.map[node.nodeId]};prototype.addToInfants=function(node,parentId){if(!this.infants.hasOwnProperty(parentId)){this.infants[parentId]=[]
}this.infants[parentId].push(node)};prototype.removeFromInfants=function(node,parentId){if(Util.isNull(parentId)){parentId=node.data[this.Z.parentKey]}if(this.infants.hasOwnProperty(parentId)){this.infants[parentId].remove(node);if(this.infants[parentId].length===0){delete this.infants[parentId]
}}};prototype.removeChildren=function(node){if(node.children.length!==0){if(!this.infants.hasOwnProperty(node.nodeId)){this.infants[node.nodeId]=[]}this.infants[node.nodeId].pushList(node.children);node.removeAllChildren()}};prototype.sortList=function(list){if(Util.isNull(list)){list=[]
}else{list.length=0}this.root.traverseChildren({fn:function(){list.push(this.data)}})};if(JGM){JGM.b("Tree",Tree);JGM.b("TreeNode",TreeNode)}(function(){function Grid(args){this.mid=args.mid;this.b=args.container;var options={a:"jgrid",b:"1px solid #868686",c:undefined,d:"15px Arial,Helvetica,sans-serif",e:"",f:true,g:"../images/",h:{data:"dataMgr.all",datalen:"dataMgr.all.length",shown:"dataMgr.datalist",set:"dataMgr.set",add:"dataMgr.add",addList:"dataMgr.addList",update:"dataMgr.update",updateByKey:"dataMgr.updateByKey",updateList:"dataMgr.updateList",remove:"dataMgr.remove",removeList:"dataMgr.removeList",select:"dataMgr.executeSelect",undo:"dataMgr.undo",redo:"dataMgr.redo",addFilter:"dataMgr.addFilter",removeFilter:"dataMgr.removeFilter",check:"collapser.checkMgr.checkList checkMgr.checkList",checked:"collapser.checkMgr.getCheckList checkMgr.getCheckList",removeChecked:"collapser.checkMgr.removeChecked checkMgr.removeChecked",register:"event.register",trigger:"event.trigger",bind:"event.bind",unregister:"event.unregister",unbind:"event.unregister",collen:"colDefMgr.length"},i:false,showMessage:false};
this.Z=JGM.e(options,args.options,{classGrid:"a",border:"b",width:"c",font:"d",style:"e",borderSide:"f",imageUrl:"g",links:"h",autoWidth:"i"});this.name=this.Z.name;this.event;this.colDefMgr;this.dataMgr;this.checkMgr;this.collapser;this.colGroup;this.view;
this.header;this.footer;this.selMgr;this.editMgr;this.tooltip;this.menubar;this.search;this.creator;this.d;this.f;this.W={a:false,b:undefined,c:undefined,d:undefined,e:undefined};this.msg;this.Y(args)}Grid.X=function(args){return new Grid(args)};var prototype=Grid.prototype;
prototype.Y=function(args){this.b=$("<div id='"+this.mid+"' class='"+this.Z.a+"' "+(Util.isNull(this.Z.c)?"":"style='width:"+this.Z.c+"px' ")+"tabIndex='0'>").appendTo(Util$.safe$(this.b));this.W.b=Util$.calScrollbarDims(this.b);this.event=JGM.create("EventManager",{grid:this,options:this.Z.EventManager});
delete this.Z.EventManager;this.colDefMgr=JGM.create("ColDefManager",{grid:this,colDefs:args.colDefs,options:this.Z.ColDefManager});delete this.Z.ColDefManager;this.dataMgr=JGM.create("DataManager",{grid:this,datalist:args.datalist,options:this.Z.DataManager});
delete this.Z.DataManager;if(this.Z.CheckManager){this.checkMgr=JGM.create("CheckManager",{grid:this,options:this.Z.CheckManager});delete this.Z.CheckManager}var i=10,colDefs=this.colDefMgr.getAll(),len=colDefs.length;for(;i<len;i++){colDef=colDefs[i];if(colDef.CheckManager){colDef.CheckManager.colDef=colDef;
colDef.checkMgr=JGM.create("CheckManager",{grid:this,options:colDef.CheckManager})}}if(this.Z.Collapser){this.collapser=JGM.create("Collapser",{grid:this,options:this.Z.Collapser});this.collapser.Y();delete this.Z.Collapser}if(this.Z.ColGroup){this.colGroup=JGM.create("ColGroup",{grid:this,options:this.Z.ColGroup});
delete this.Z.ColGroup}if(this.Z.SelectionManager){this.selMgr=JGM.create("SelectionManager",{grid:this,options:this.Z.SelectionManager});delete this.Z.SelectionManager}if(this.Z.EditManager){this.editMgr=JGM.create("EditManager",{grid:this,options:this.Z.EditManager});
delete this.Z.EditManager}if(this.Z.ColHeader){this.header=JGM.create("ColHeader",{grid:this,container:this.b,options:this.Z.ColHeader});delete this.Z.ColHeader}if(this.Z.SearchManager){this.search=JGM.create("SearchManager",{grid:this,container:this.b,options:this.Z.SearchManager});
delete this.Z.SearchManager}if(this.Z.MenuBar){this.menubar=JGM.create("MenuBar",{grid:this,container:this.b,options:this.Z.MenuBar});delete this.Z.MenuBar}this.view=JGM.create("ViewportManager",{grid:this,container:this.b,options:this.Z.ViewportManager});delete this.Z.ViewportManager;
if(this.Z.TooltipManager){this.tooltip=JGM.create("TooltipManager",{grid:this,container:this.b,options:this.Z.TooltipManager});delete this.Z.TooltipManager}if(this.Z.DataCreator){this.creator=JGM.create("DataCreator",{grid:this,container:this.b,options:this.Z.DataCreator});
delete this.Z.DataCreator}if(this.Z.Footer){this.footer=JGM.create("Footer",{grid:this,container:this.b,options:this.Z.Footer});delete this.Z.Footer}if(this.Z.i){this.event.bind("onResizeCanvasWidth",this.width,this)}this.j();this.event.trigger("onBeforeRenderModules onRenderModules onAfterRenderModules");
this.msg=$("<div id='"+this.mid+"msg' class='msg' onmousedown='$(this).hide(1000)' style='position:relative;padding-left:4px;overflow:hidden;z-index:100;font-size:12px;height:21px;line-height:21px'></div>").appendTo(this.b).hide();this.W.d=this.b[0].clientWidth;
this.W.e=this.b[0].clientHeight;this.a(this.Z.h);this.e()};prototype.e=function(){JGM.j();var thisIns=this;this.b.bind({keydown:function(e){thisIns.U(e)},keyup:function(e){thisIns.T(e)},keypress:function(e){thisIns.S(e)},mousein:function(e){thisIns.R(e)},mouseout:function(e){thisIns.Q(e)
},mouseenter:function(e){thisIns.P(e)},mouseleave:function(e){thisIns.O(e)},mouseover:function(e){thisIns.M(e)},mousedown:function(e){thisIns.L(e)},click:function(e){thisIns.J(e)},dblclick:function(e){thisIns.I(e)}})};prototype.destroy=function(){try{if(Util.isEmptyObj(JGM.m.Grid)){JGM.k()
}this.event.trigger("onDestroy");JGM.q(this,{name:"Grid",module:"event","$":"b",map:"W Z",style:"d f"})}catch(e){return e}};prototype.a=function(links){var link,arr,arrlen,j,path,pathlen,current,last,lastPath,i;link_loop:for(link in links){if(links.hasOwnProperty(link)&&!(link in this)){arr=Util.split(links[link]);
arrlen=arr.length;j=0;arr_loop:for(;j<arrlen;j++){path=arr[j].split(".");pathlen=path.length;if(pathlen<1){continue}current=this;last=this;lastPath="";i=0;for(;i<pathlen;i++){if(!(path[i] in current)){continue arr_loop}else{last=current;current=current[lastPath=path[i]]
}}this.c(link,current,last,lastPath);continue link_loop}}}};prototype.c=function(name,fn,thisp,lastPath){if(this.hasOwnProperty(name)){return false}if(Util.isFunction(fn)){this[name]=function(){return fn.apply(thisp,arguments)}}else{this[name]=function(){return thisp[lastPath]
}}return true};prototype.j=function(){var style=Util.sprint("%selector%{overflow:hidden;font:%font%;%border%%style%}%submodule%",{selector:"#"+this.mid,font:this.Z.d,border:this.Z.f?"border:"+this.Z.b+";":"border-top:"+this.Z.b+";border-bottom:"+this.Z.b+";",style:this.Z.e,submodule:this.event.trigger("onCreateCss").join("")});
this.d=Util.createStyle(style);this.f=Util.createStyle(this.event.trigger("onCreateDynamicCss").join(""))};prototype.g=function(){Util.setStyle(this.f,this.event.trigger("onCreateDynamicCss").join(""))};prototype.U=function(e){if(this.event.triggerInvalid("onBeforeKeydown",[e])){return
}this.event.trigger("keydown_"+e.which+" keydown",[e])};prototype.T=function(e){if(this.event.triggerInvalid("onBeforeKeyup",[e])){return}this.event.trigger("keyup_"+e.which+" keyup",[e])};prototype.S=function(e){if(this.event.triggerInvalid("onBeforeKeypress",[e])){return
}this.event.trigger("keypress_"+e.which+" keypress",[e])};prototype.R=function(e){if(this.event.triggerInvalid("onBeforeMousein",[e])){return}if(this.W.a){this.event.trigger("dragin mousein",[e])}else{this.event.trigger("mousein",[e])}};prototype.Q=function(e){if(this.event.triggerInvalid("onBeforeMouseout",[e])){return
}if(this.W.a){this.event.trigger("dragout mouseout",[e])}else{this.event.trigger("mouseout",[e])}};prototype.P=function(e){if(this.event.triggerInvalid("onBeforeMouseenter",[e])){return}if(this.W.a){this.event.trigger("dragenter mouseenter",[e])}else{this.event.trigger("mouseenter",[e])
}};prototype.O=function(e){if(this.event.triggerInvalid("onBeforeMouseleave",[e])){return}if(this.W.a){this.event.trigger("dragleave mouseleave",[e])}else{this.event.trigger("mouseleave",[e])}};prototype.N=function(e){if(this.event.triggerInvalid("onBeforeMousemove",[e])){return
}if(this.W.a){this.event.trigger("dragmove mousemove",[e])}else{this.event.trigger("mousemove",[e])}};prototype.M=function(e){if(this.event.triggerInvalid("onBeforeMouseover",[e])){return}if(this.W.a){this.event.trigger("dragover mouseover",[e])}else{this.event.trigger("mouseover",[e])
}};prototype.L=function(e){this.W.a=true;if(this.event.triggerInvalid("onBeforeMousedown",[e])){return}this.event.trigger("mousedown",[e])};prototype.K=function(e){this.W.a=false;this.event.trigger("unsetDrag");if(!this.containsEvent(e)){return}if(this.event.triggerInvalid("onBeforeMouseup",[e])){return
}this.event.trigger("mouseup",[e])};prototype.J=function(e){if(this.event.triggerInvalid("onBeforeClick",[e])){return}this.event.trigger("click",[e])};prototype.I=function(e){if(this.event.triggerInvalid("onBeforeDblclick",[e])){return}this.event.trigger("dblclick",[e])
};prototype.G=function(e){var change=false,width=this.b[0].clientWidth,height;if(width>=1&&this.W.d!==width){this.event.trigger("resizeWidth",[width,this.W.d]);this.W.d=width;change=true}height=this.b[0].clientHeight;if(height>=1&&this.W.e!==height){this.event.trigger("resizeHeight",[height,this.W.e]);
this.W.e=height;change=true}if(change){this.event.trigger("resize",[e])}};prototype.width=function(w){w=parseInt(w);if(Util.isNull(w)||isNaN(w)||w<1||w===this.b[0].clientWidth){return this.b[0].clientWidth}this.b[0].style.width=w+"px";this.event.trigger("resizeWidth",[w,this.W.d]);
this.W.d=w;this.event.trigger("resize");return w};prototype.height=function(h){h=parseInt(h);if(Util.isNull(h)||isNaN(h)||h<1||h===this.b[0].clientHeight){return this.b[0].clientHeight}this.b[0].style.height=h+"px";this.event.trigger("resizeHeight",[h,this.W.e]);
this.W.e=h;this.event.trigger("resize");return h};prototype.getCellByIdAndKey=function(id,key){return JGM.create("Cell",{grid:this,datarow:this.dataMgr.getById(id),colDef:this.colDefMgr.getByKey(key)})};prototype.getCellByIdx=function(rowIdx,colIdx){return JGM.create("Cell",{grid:this,row:rowIdx,col:colIdx})
};prototype.error=function(code){var str=JGM.error[code],i=1,e,len=arguments.length;for(;i<len;i++){str=str.replace(new RegExp("%"+(i-1),"g"),arguments[i])}e=new Error(str);e.code=code;this.printError(e.message);this.event.trigger("onError",[e]);return e};prototype.printError=function(str){if(this.Z.showMessage){var msg=this.msg;
msg[0].innerHTML=str;msg[0].style.width=this.b[0].clientWidth+"px";msg[0].style.background="#ffebe8";msg[0].style.color="#333";msg.show();clearTimeout(this.timeout);this.timeout=setTimeout(function(){msg.hide(1000)},5000)}};prototype.printMessage=function(str){if(this.Z.showMessage){var msg=this.msg;
msg[0].innerHTML=str;msg[0].style.width=this.b[0].clientWidth+"px";msg[0].style.background="#dfdfdf";msg[0].style.color="#6f6f6f";msg.show();clearTimeout(this.timeout);this.timeout=setTimeout(function(){msg.hide(1000)},5000)}};prototype.containsEvent=function(e){return Util.contains(this.b[0],e.target)
};JGM.b("Grid",Grid)}());(function(){function Cache(args){this.mid=args.mid;var options={a:undefined,a:300};this.Z=JGM.e(options,args.options,{size:"a",freeSize:"a"});this.a={};this.b=0}Cache.X=function(args){return new Cache(args)};var prototype=Cache.prototype;
prototype.destroy=function(){JGM.q(this,{name:"Cache",property:"b",map:"a Z"})};prototype.get=function(key){if(this.hasKey(key)){return this.a[key]}};prototype.remove=function(key){if(this.hasKey(key)){var val=this.a[key];delete this.a[key];this.b--;return val
}};prototype.hasKey=function(key){if(Util.isNotNull(key)){return this.a.hasOwnProperty(key)}return false};prototype.add=function(key,val){if(Util.isNull(key)){return false}if(this.a.hasOwnProperty(key)){this.a[key]=val;return val}if(this.b===this.Z.a){this.free(this.Z.a)
}this.a[key]=val;this.b++;return val};prototype.count=function(){return this.b};prototype.free=function(size){if(Util.isNull(size)){size=1}var i,map=this.a,count=0;for(i in map){if(map.hasOwnProperty(i)){delete map[i];this.b--;count++;if(--size<=0){return count
}}}return count};prototype.freeAll=function(){var count=this.b;this.a={};this.b=0;return count};prototype.addList=function(arr){var i=0,len=arr.length,old=this.b;for(;i<len;i++){this.add(arr[i].key,arr[i].val)}return this.b-old};prototype.toArray=function(){if(this.b===0){return[]
}var i,map=this.a,arr=new Array(this.b),j=0;for(i in map){if(map.hasOwnProperty(i)){arr[j++]=map[i]}}return arr};prototype.toArrayWithKeys=function(){if(this.b===0){return[]}var i,map=this.a,arr=new Array(this.b),j=0;for(i in map){if(map.hasOwnProperty(i)){arr[j++]={key:i,val:map[i]}
}}return arr};prototype.getKeys=function(){if(this.b===0){return[]}var i,map=this.a,arr=new Array(this.b),j=0;for(i in map){if(map.hasOwnProperty(i)){arr[j++]=i}}return arr};JGM.b("Cache",Cache)}());(function(){function Cell(args){this.grid=args.grid;this.h=args.datarow;
this.i=args.colDef;this.Y(args)}Cell.X=function(args){return new Cell(args)};var prototype=Cell.prototype;prototype.Y=function(args){if(Util.isNull(this.h)){if(Util.isNotNull(args.row)){this.h=this.grid.dataMgr.getByIdx(args.row)}else{if(Util.isNotNull(args.node)){this.h=this.grid.dataMgr.getByNode(args.node.parentNode)
}else{if(Util.isNotNull(args.$)){this.h=this.grid.dataMgr.getByNode(args.$[0].parentNode)}}}}if(Util.isNull(this.i)){if(Util.isNotNull(args.col)){this.i=this.grid.colDefMgr.get(args.col)}else{if(Util.isNotNull(args.node)){this.i=this.grid.colDefMgr.get(Util.index(args.node))
}else{if(Util.isNotNull(args.$)){this.i=this.grid.colDefMgr.get(Util.index(args.$[0]))}}}}if(Util.isNullOr(this.h,this.i)&&Util.isNotNull(args.event)){var node=this.grid.view.Az(args.event.target);if(Util.isNotNull(node)){this.h=this.grid.dataMgr.getByNode(node.parentNode);
this.i=this.grid.colDefMgr.get(Util.index(node))}}};prototype.destroy=function(){delete this.grid;delete this.h;delete this.i};prototype.getRowIdx=function(){if(Util.isNotNull(this.h)){return this.grid.dataMgr.getIdx(this.h)}};prototype.getColIdx=function(){if(Util.isNotNull(this.i)){return this.grid.colDefMgr.getIdx(this.i)
}};prototype.getNode=function(){if(Util.isNotNullAnd(this.h,this.i)){return this.grid.view.getCellByIdAndKey(this.grid.dataMgr.getId(this.h),this.i.key)}};prototype.getRowNode=function(){return this.grid.view.getRow(this.h)};prototype.get$=function(){var cellNode=this.getNode();
if(cellNode!==undefined){return $(cellNode)}return $([])};prototype.getDatarow=function(){return this.h};prototype.getColDef=function(){return this.i};prototype.getKey=function(){if(Util.isNotNull(this.i)){return this.i.key}};prototype.getId=function(){return this.grid.dataMgr.getId(this.h)
};prototype.getValue=function(){if(Util.isNotNullAnd(this.h,this.i)){return this.h[this.i.key]}};prototype.isValid=function(){return Util.isNotNull(this.getNode())};prototype.isInvalid=function(){return Util.isNull(this.getNode())};prototype.isEmpty$=function(){return this.get$().length===0
};prototype.has$=function(){return this.get$().length!==0};prototype.equals=function(cell){return Util.isNotNull(cell)&&Util.isNotNull(this.h)&&this.h===cell.getDatarow()&&Util.isNotNull(this.i)&&this.i===cell.getColDef()};JGM.b("Cell",Cell)}());(function(){function CheckManager(args){this.mid=args.mid;
this.grid=args.grid;var options={a:{key:"checkbox",width:20,name:" ",noTitle:true,resizable:false,sorter:null,filter:null,noSearch:true,editor:null,inputOnCreate:false},b:0,c:undefined,d:"checkmg",e:"checkm",f:true,g:false};this.Z=JGM.e(options,args.options,{colDef:"a",colIdx:"b",name:"c",classCheck:"d",classMasterCheck:"e",master:"f",isRadio:"g"});
if(this.Z.g){if(Util.isNull(this.Z.c)){this.Z.c="radio"+this.mid}this.Z.f=false}this.a={};this.disabledmap={};this.b=0;this.d=false;this.c;this.Y()}CheckManager.X=function(args){return new CheckManager(args)};var prototype=CheckManager.prototype;prototype.Y=function(){var opt=this.Z,size,con=JGM.g;
if(this.grid.colDefMgr.getByKey(opt.a.key)===undefined){this.grid.colDefMgr.addAt(opt.b,opt.a)}if(Util.isNull(con.c)){size=Util.calCheckSize();con.c=size.checkboxW;con.d=size.checkboxH;con.e=size.radioW;con.f=size.radioH}this.bindEvents()};prototype.bindEvents=function(){var opt=this.Z,key=opt.a.key,events;
events={onCreateCss:this.V,onDestroy:this.aA,onAfterSetDatalist:this.uncheckAll,onIdChange:this.ai,onIdListChange:this.aj,onRemoveDatarow:this.af,onRemoveDatalist:this.ag};events["onRenderCell_"+key+"_prepend"]=this.aH;events["keydownColSel_"+key+"_"+Util.keyMapKeydown.space]=this.bA;
if(opt.f){events["onRenderHeader_"+key+"_prepend"]=this.aG;events.onRenderHeadersComplete=this.h}this.grid.event.bind(events,this)};prototype.aA=function(){JGM.q(this,{name:"CheckManager",path:"checkMgr","$":"c",property:"b d",map:"a Z"})};prototype.V=function(){var w,h,checkCommon,css;
if(this.Z.g){w=JGM.g.e;h=JGM.g.f}else{w=JGM.g.c;h=JGM.g.d}checkCommon="*overflow:hidden;padding:0;width:"+w+"px;height:"+h+"px;";css=this.grid.view.AG()+" ."+this.Z.d+"[mid='"+this.mid+"']{"+checkCommon+"margin:"+((this.grid.view.AO()-h)/2)+"px 0 0 "+((this.Z.a.width-this.grid.view.AM()-w)/2)+"px}#"+this.mid+"h{"+checkCommon+"margin:"+((this.grid.header.Z.l-h)/2)+"px 0 0 0}";
return css};prototype.checkList=function(list,nomap){if(!nomap){list=this.grid.dataMgr.mapList(list).mapped}var i=0,len=list.length;for(;i<len;i++){this.check(list[i],true)}};prototype.setCheckList=function(list,nomap){this.uncheckAll();this.checkList(list,nomap)
};prototype.getCheckList=function(){return Util.toArray(this.a)};prototype.getDisableds=function(){return Util.toArray(this.disabledmap)};prototype.toggleCheckAll=function(){if(this.isCheckedAll()){this.uncheckAll()}else{this.checkAll()}};prototype.checkAll=function(){if(this.Z.f){CheckManager.a(this.c)
}CheckManager.a(this.getCheckboxes());var list=this.grid.dataMgr.all,len=list.length,idKey=this.grid.dataMgr.idKey,map=this.a,i=0;for(;i<len;i++){map[list[i][idKey]]=list[i]}this.b=len};prototype.uncheckAll=function(){if(this.Z.f){CheckManager.b(this.c)}CheckManager.b(this.getCheckboxes());
this.a={};this.b=0};prototype.toggleCheck=function(datarow,nomap){if(!nomap){datarow=this.grid.dataMgr.map(datarow)}if(this.isChecked(datarow,true)&&!this.Z.g){this.uncheck(datarow,true)}else{this.check(datarow,true)}};prototype.toggleDisable=function(datarow,nomap){if(!nomap){datarow=this.grid.dataMgr.map(datarow)
}if(this.isDisabled(datarow,true)){this.enable(datarow,true)}else{this.disable(datarow,true)}};prototype.toggleById=function(id){this.toggleCheck(this.grid.dataMgr.getById(id),true)};prototype.check=function(datarow,nomap){if(!nomap){datarow=this.grid.dataMgr.map(datarow)
}if(!this.f(datarow)){return}CheckManager.a(this.getCheckbox(datarow));this.e();this.grid.event.trigger("onCheckChange",[datarow,true])};prototype.uncheck=function(datarow,nomap){if(!nomap){datarow=this.grid.dataMgr.map(datarow)}if(!this.g(datarow)){return}CheckManager.b(this.getCheckbox(datarow));
if(this.Z.f){CheckManager.b(this.c)}this.grid.event.trigger("onCheckChange",[datarow,false])};prototype.disable=function(datarow,nomap){var datam=this.grid.dataMgr;if(!nomap){datarow=datam.map(datarow)}var id=datam.getId(datarow),map=this.disabledmap;if(map.hasOwnProperty(id)){return
}map[id]=datarow;CheckManager.disableNode(this.getCheckbox(datarow));this.grid.event.trigger("onDisableCheck",[datarow])};prototype.enable=function(datarow,nomap){var datam=this.grid.dataMgr;if(!nomap){datarow=this.grid.dataMgr.map(datarow)}var id=datam.getId(datarow),map=this.disabledmap;
if(!map.hasOwnProperty(id)){return}delete map[id];CheckManager.enableNode(this.getCheckbox(datarow));this.grid.event.trigger("onEnableCheck",[datarow])};prototype.e=function(){if(this.Z.f){CheckManager.c(this.c,this.isCheckedAll())}};prototype.f=function(datarow){var id=datarow[this.grid.dataMgr.idKey];
if(this.a.hasOwnProperty(id)){return false}if(this.Z.g===true){this.a={};this.b=0}this.a[id]=datarow;this.b++;return true};prototype.g=function(datarow){var id=datarow[this.grid.dataMgr.idKey],map=this.a;if(!map.hasOwnProperty(id)){return false}delete map[id];
this.b--;return true};prototype.isChecked=function(datarow,nomap){var datam=this.grid.dataMgr;if(!nomap){datarow=datam.map(datarow)}return this.a.hasOwnProperty(datam.getId(datarow))};prototype.isDisabled=function(datarow,nomap){var datam=this.grid.dataMgr;
if(!nomap){datarow=datam.map(datarow)}return this.disabledmap.hasOwnProperty(datam.getId(datarow))};prototype.splitChecked=function(datalist,nomap){if(!nomap){datalist=this.grid.dataMgr.mapList(datalist).mapped}var checked=[],unchecked=[],i=0,len=datalist.length,idKey=this.grid.dataMgr.idKey,data,map=this.a;
for(;i<len;i++){if(map.hasOwnProperty((data=datalist[i])[idKey])){checked.push(data)}else{unchecked.push(data)}}return{checked:checked,unchecked:unchecked}};prototype.isCheckedAll=function(){return(this.b!==0&&this.b===this.grid.dataMgr.all.length?true:false)
};prototype.removeChecked=function(){return this.grid.dataMgr.removeList(this.getCheckList())};prototype.h=function(){this.c=$(document.getElementById(this.mid+"h"))};prototype.i=function(rows){var len=rows.length,checks=[],i=0,col=this.grid.colDefMgr.getIdxByKey(this.Z.a.key);
for(;i<len;i++){checks.push(rows[i].childNodes[col].childNodes[0])}return checks};prototype.getCheckboxes=function(){return this.i(this.grid.view.getRenderedRows())};prototype.getCheckboxById=function(id){var row=this.grid.view.getRowById(id);if(Util.isNotNull(row)){return row.childNodes[this.grid.colDefMgr.getIdxByKey(this.Z.a.key)].childNodes[0]
}};prototype.getCheckbox=function(datarow){return this.getCheckboxById(this.grid.dataMgr.getId(datarow))};prototype.getCheckboxByIdx=function(i){return this.getCheckboxById(this.grid.dataMgr.getIdByIdx(i))};prototype.af=function(datarow){this.uncheck(datarow,true);
this.enable(datarow,true)};prototype.ag=function(datalist){var i=0,len=datalist.length;for(;i<len;i++){this.uncheck(datalist[i],true);this.enable(datalist[i],true)}};prototype.ai=function(datarow,before,after){var map=this.a,dmap=this.disabledmap;if(map.hasOwnProperty(before)){delete map[before];
map[after]=datarow}if(dmap.hasOwnProperty(before)){delete dmap[before];dmap[after]=datarow}};prototype.aj=function(datalist,idBefores,idKey){var i=0,len=datalist.length,map=this.a,dmap=this.disabledmap,data,before;for(;i<len;i++){data=datalist[i];before=idBefores[i];
if(map.hasOwnProperty(before)){delete map[before];map[data[idKey]]=data}if(dmap.hasOwnProperty(before)){delete dmap[before];dmap[data[idKey]]=data}}};prototype.bA=function(e,colSelections,lastSelection){e.preventDefault();if(Util.isNotNullAnd(colSelections,lastSelection)){var checked=this.isChecked(lastSelection.getDatarow(),true),row,list=this.grid.dataMgr.datalist;
if(this.Z.g){for(row in colSelections){if(colSelections.hasOwnProperty(row)){if(row==="length"){continue}this.check(list[row],true);return}}}else{for(row in colSelections){if(colSelections.hasOwnProperty(row)){if(row==="length"){continue}if(checked){this.uncheck(list[row],true)
}else{this.check(list[row],true)}}}}}};prototype.aG=function(headerHtml){headerHtml.push("<input id='"+this.mid+"h' type='checkbox' tabIndex='-1' onclick='JGM.m.CheckManager."+this.mid+".toggleCheckAll();' class='"+this.Z.d+" "+this.Z.e+"' mid='"+this.mid+"'");
if(this.isCheckedAll()){headerHtml.push(" checked='checked'")}if(this.d){headerHtml.push(" disabled='disabled'")}headerHtml.push("/>")};prototype.aH=function(rowIdx,colIdx,datarow,colDef,cellHtml){cellHtml.push("<input tabIndex='-1' onclick=\"JGM.m.CheckManager."+this.mid+".toggleById('"+datarow[this.grid.dataMgr.idKey]+"')\" type='"+(this.Z.g?"radio":"checkbox")+"' class='"+this.Z.d+"' mid='"+this.mid+"'");
if(Util.isNotNull(this.Z.c)){cellHtml.push(" name='"+this.Z.c+"'")}if(this.isChecked(datarow,true)){cellHtml.push(" checked='checked'")}if(this.d||this.isDisabled(datarow,true)){cellHtml.push(" disabled='disabled'")}cellHtml.push("/>")};prototype.disableAll=function(){if(this.d){return
}this.d=true;if(this.Z.f){this.c.attr("disabled","disabled")}$(this.getCheckboxes()).attr("disabled","disabled")};prototype.enableAll=function(){if(!this.d){return}this.d=false;if(this.Z.f){this.c.removeAttr("disabled")}$(this.getCheckboxes()).removeAttr("disabled")
};CheckManager.a=function(obj){if(Util.isNotNull(obj)){Util$.safe$(obj).attr("checked","checked")}};CheckManager.b=function(obj){if(Util.isNotNull(obj)){Util$.safe$(obj).removeAttr("checked")}};CheckManager.disableNode=function(obj){if(Util.isNotNull(obj)){Util$.safe$(obj).attr("disabled","disabled")
}};CheckManager.enableNode=function(obj){if(Util.isNotNull(obj)){Util$.safe$(obj).removeAttr("disabled")}};CheckManager.c=function(obj,check){if(check){CheckManager.a(obj)}else{CheckManager.b(obj)}};JGM.b("CheckManager",CheckManager)}());(function(){function ColDefManager(args){this.mid=args.mid;
this.grid=args.grid;this.grid.colDefMgr=this;var options={a:{key:undefined,name:"",colClass:undefined,defaultValue:undefined,inputOnCreate:undefined,style:"",headerStyle:"",width:80,minW:30,maxW:undefined,editor:undefined,sorter:undefined,hidden:false,sumRenderer:undefined,tooltipEnabled:false,resizable:false,renderer:JGM.ViewportManager.AD,rendererInput:false,noTitle:false,noName:false,title:undefined,noSearch:false,filter:undefined,parser:undefined,validator:undefined}};
this.Z=JGM.e(options,args.options,{colDef:"a"});this.a=[];this.b=[];this.c={};this.d={};this.Y(args)}ColDefManager.X=function(args){return new ColDefManager(args)};var prototype=ColDefManager.prototype;prototype.Y=function(args){this.grid.event.bind("onDestroy",this.aA,this);
this.set(args.colDefs)};prototype.aA=function(){JGM.q(this,{name:"ColDefManager",path:"colDefMgr",property:"a",map:"d c Z",array:"b"})};prototype.getAll=function(){return this.a};prototype.set=function(colDefs){if(this.a===colDefs||Util.areEqualArrays(this.a,colDefs)){return colDefs
}if(Util.isNull(colDefs)){colDefs=[]}else{var filtered=colDefs.filter(function(a){return Util.isNotNull(a)});colDefs.length=0;colDefs.pushList(filtered)}this.grid.event.trigger("onBeforeSetColDefs",[this.a,colDefs]);this.a=[];this.b.length=0;this.d={};this.c={};
this.grid.event.trigger("onEmptyColDefs");var i=0,len=colDefs.length,map=this.c,col,key;for(;i<len;i++){col=colDefs[i];if(!col.hasOwnProperty("key")){this.c={};return this.grid.error("KEY_UNDEFINED",i)}key=col.key;if(Util.isEmptyString(key)){this.c={};return this.grid.error("BAD_NULL",i)
}if(map.hasOwnProperty(key)){this.c={};return this.grid.error("DUP_KEY",key)}map[key]=col}this.a=colDefs;for(i=0;i<len;i++){this.i(colDefs[i])}this.grid.event.trigger("onAfterSetColDefs",[colDefs,this.e()]);return colDefs};prototype.push=function(colDef){return this.addAt(this.b.length,colDef)
};prototype.addAt=function(i,colDef){if(Util.isNull(colDef)){return}var key=colDef.key,map=this.c,filtered=this.b;if(Util.isNull(i)||i>filtered.length){i=filtered.length}else{if(i<0){i+=filtered.length}}this.grid.event.trigger("onBeforeAddColDef",[colDef]);
if(Util.isNull(key)){return this.grid.error("KEY_UNDEFINED")}if(map.hasOwnProperty(key)){return this.grid.error("DUP_KEY",key)}this.a.addAt(i,this.i(map[key]=colDef));if(colDef.hidden!==true){filtered.addAt(i,colDef);this.f()}this.grid.event.trigger("onAfterAddColDef",[colDef,i]);
return filtered.length};prototype.i=function(colDef){if(Util.isNull(colDef)){return}var options={},sorter;$.extend(true,options,this.Z.a);$.extend(true,options,colDef);$.extend(true,colDef,options);colDef.sorter=sorter=ColDefManager.sorter(colDef.sorter,colDef.key);
if(Util.isNotNull(sorter)){sorter.key=colDef.key}return colDef};prototype.hide=function(i){var colDef=this.b[i];if(Util.isNull(colDef)){return}colDef.hidden=true;this.b.removeAt(i);this.f();this.grid.event.trigger("onHideCol",[colDef,i]);return colDef};prototype.show=function(key){if(Util.isNull(key)){return
}if(!Util.isString(key)){if(!Util.isObject(key)){return}key=key.key}var map=this.c,colDef;if(!map.hasOwnProperty(key)){return}if(this.d.hasOwnProperty(key)){return map[key]}colDef=map[key];colDef.hidden=false;this.e();this.f();this.grid.event.trigger("onShowCol",[colDef,this.d[key]]);
return colDef};prototype.e=function(){this.b=this.a.filter(function(colDef){return colDef.hidden!==true});this.f();return this.b};prototype.f=function(){this.d={};return this.g()};prototype.g=function(from){if(Util.isNull(from)){from=0}var i=from,f=this.b,len=f.length,map=this.d;
for(;i<len;i++){map[f[i].key]=i}return map};prototype.get=function(i){if(Util.isNull(i)){return this.b}if(this.b.hasOwnProperty(i)){return this.b[i]}};prototype.getByKey=function(key){if(Util.isNotNull(key)&&this.c.hasOwnProperty(key)){return this.c[key]}};
prototype.length=function(){return this.b.length};prototype.getIdxByKey=function(key){if(this.d.hasOwnProperty(key)){return this.d[key]}return -1};prototype.getIdx=function(colDef){if(Util.isNotNull(colDef)&&this.d.hasOwnProperty(colDef.key)){return this.d[colDef.key]
}return -1};prototype.sortByKey=function(keys){this.b.length=0;this.d={};var i=0,len=keys.length,f=this.b,map=this.d,dmap=this.c;for(;i<len;i++){f.push(dmap[keys[i]]);map[keys[i]]=i}this.grid.event.trigger("onReorderCols",keys);return this.b};prototype.getKeys=function(){return this.b.map(function(def){return def.key
})};ColDefManager.sorter=function(type,key,on){on=on?true:false;if(type==="text"){return{lexi:key,on:on,key:key}}if(type==="int"){return{on:on,comparator:function(a,b){var aVal=a[key],bVal=b[key];if(Util.isNull(aVal)){aVal=Number.MAX_VALUE}else{if(typeof aVal==="string"){aVal=aVal.toInt()
}}if(Util.isNull(bVal)){bVal=Number.MAX_VALUE}else{if(typeof bVal==="string"){bVal=bVal.toInt()}}return aVal-bVal},key:key}}if(type==="float 한국 tehu"){return{on:on,comparator:function(a,b){var aVal=a[key],bVal=b[key];if(Util.isNull(aVal)){aVal=Number.MAX_VALUE
}else{if(typeof aVal==="string"){aVal=aVal.toFloat()}}if(Util.isNull(bVal)){bVal=Number.MAX_VALUE}else{if(typeof bVal==="string"){bVal=bVal.toFloat()}}return aVal-bVal},key:key}}};JGM.b("ColDefManager",ColDefManager)}());(function(){function ColHeader(args){this.mid=args.mid;
this.b=args.container;this.a;this.c;this.grid=args.grid;this.grid.header=this;var options={a:false,b:true,c:"url("+this.grid.Z.g+"column-headers-bg.png) repeat-x scroll center",d:"url("+this.grid.Z.g+"column-headers-over-bg.png) repeat-x scroll center",e:"#646464",f:this.grid.Z.g+"sort.png",g:4,h:7,i:this.grid.Z.g+"sort-asc.png",j:this.grid.Z.g+"sort-desc.png",k:"15px Arial,Helvetica,sans-serif",l:21,n:1,o:"solid #909192",p:"jgrid-header-mask",q:"jgrid-header",r:"jgrid-colheader",s:"jgrid-colheader-active",t:"jgrid-colheader-placeholder",u:"interactive",v:"jgrid-colheader-sorted",w:"jgrid-sort",x:"jgrid-sort-asc",y:"jgrid-sort-desc",z:"jgrid-resize-handle",A:11,B:"",C:"",D:10000,E:100000,F:"resize-guide",G:1,H:"black;filter:alpha(opacity=40);opacity:0.4",I:false,J:"black;filter:alpha(opacity=5);opacity:0.05"};
this.Z=JGM.e(options,args.options,{reorderEnabled:"a",reorderSyncEnabled:"b",background:"c",backgroundHover:"d",backgroundPlaceholder:"e",sortBackground:"f",sortRight:"g",sortWidth:"h",sortBackgroundAsc:"i",sortBackgroundDesc:"j",font:"k",height:"l",borderThickness:"n",border:"o",classHeaderMask:"p",classHeader:"q",classColHeader:"r",classColHeaderActive:"s",classColHeaderPlaceholder:"t",classInteractive:"u",classColHeaderSorted:"v",classSort:"w",classSortAsc:"x",classSortDesc:"y",classResizeHandle:"z",resizeHandleWidth:"A",style:"B",headerStyle:"C",scrollerLeft:"D",scrollerWidth:"E",classResizeGuide:"F",resizeGuideWidth:"G",resizeBackground:"H",syncResize:"I",resizeHandleBackground:"J"});
this.d={};this.n;this.o;this.p;this.q;this.r={};this.v;this.w;this.D;this.Y()}ColHeader.X=function(args){return new ColHeader(args)};var prototype=ColHeader.prototype;prototype.Y=function(){this.a=$("<div class='"+this.Z.p+"'>").prependTo(this.b);this.c=$("<div class='"+this.Z.q+"'>").appendTo(this.a);
ColHeader.e(this.c);this.bindEvents()};prototype.bindEvents=function(){var events,colDefs=this.grid.colDefMgr.get(),len=colDefs.length,i=0;events={onRenderModules:this.aE,onAfterRenderModules:this.aF,onCreateCss:this.V,onDestroy:this.aA,mousedown:this.L,mouseup:this.K,dragmove:this.H,onScrollViewportH:this.bo,onScrollViewportV:this.C,onChangeSorter:this.l,click:this.J,onResizeCol:this.z};
for(;i<len;i++){if(Util.isNotNull(colDefs[i].sorter)){events["clickHeader_"+colDefs[i].key]=this.i}}this.grid.event.bind(events,this)};prototype.aA=function(){if(this.c.sortable){this.c.sortable("destroy")}this.t();JGM.q(this,{name:"ColHeader",path:"header","$":"w a c",property:"b r",map:"d Z"})
};prototype.V=function(){var gridId="#"+this.grid.mid+" .",o=this.Z,border=o.n+"px "+o.o,rules=[],colDefs=this.grid.colDefMgr.get(),len=colDefs.length,i=0;rules.push(gridId+o.p+"{position:relative;overflow:hidden;width:100%;font:"+o.k+";background:"+o.c+";border-bottom:"+border+";"+o.B+"}");
rules.push(gridId+o.q+"{position:relative;overflow:hidden;white-space:nowrap;cursor:default;left:"+(-o.D)+"px;width:"+o.E+"px;line-height:"+o.l+"px}");rules.push(gridId+o.r+"{position:relative;overflow:hidden;float:left;text-overflow:ellipsis;text-align:center;height:"+o.l+"px;left:"+(o.D-this.grid.view.getScrollLeft())+"px;border-right:"+border+";"+o.C+"}");
rules.push(gridId+o.r+"."+o.u+":hover, "+gridId+o.s+"{background:"+o.d+"}");rules.push(gridId+o.s+"{border-left:"+border+"}");rules.push(gridId+o.r+"."+o.t+"{background:"+o.e+"!important}");rules.push(gridId+o.w+"{position:absolute;height:"+o.l+"px;right:"+o.g+"px;width:"+o.h+"px;background:url("+o.f+") no-repeat center transparent}");
rules.push(gridId+o.x+"{background:url("+o.i+") no-repeat center transparent}");rules.push(gridId+o.y+"{background:url("+o.j+") no-repeat center transparent}");rules.push(gridId+o.z+"{z-index:10;background:"+o.J+";cursor:e-resize;position:absolute;height:"+o.l+"px;width:"+o.A+"px}");
rules.push(gridId+o.F+"{z-index:10;position:absolute;background:"+o.H+";width:"+o.G+"px}");for(;i<len;i++){rules.push(gridId+o.r+"#"+this.mid+"h"+colDefs[i].key+"{"+colDefs[i].headerStyle+"}")}return rules.join("")};prototype.f=function(){return this.Z.n};prototype.bo=function(scrollLeft){this.c[0].style.left=(-this.Z.D-scrollLeft)+"px"
};prototype.aE=function(){var colDefs=this.grid.colDefMgr.get(),len=colDefs.length,i=0,colDef,headers=[];for(;i<len;i++){if(!(colDef=colDefs[i]).hidden){this.g(headers,colDef,i)}}this.c[0].innerHTML=headers.join("");this.grid.event.trigger("onRenderHeadersComplete")
};prototype.aF=function(){if(this.Z.a){this.k()}this.u();this.w=$("<div class='"+this.Z.F+"'>").appendTo(this.grid.view.a);this.w[0].style.top="0px";this.w[0].style.height="0px"};prototype.g=function(header,colDef,i){if(Util.isNull(colDef)){return}var name=(colDef.noName?"":colDef.name||colDef.key),widthPlus=this.f();
header.push("<div id='"+this.mid+"h"+colDef.key+"' class='"+this.Z.r+" "+(this.Z.a||Util.isNotNull(colDef.sorter)?" "+this.Z.u:"")+"' "+(colDef.noTitle?"":"title='"+(colDef.title||name)+"' ")+"style='width:"+(this.grid.view.AK(i)-widthPlus)+"px;' colKey='"+colDef.key+"'>");
this.grid.event.trigger("onRenderHeader_"+colDef.key+"_prepend",[header]);header.push(name);this.grid.event.trigger("onRenderHeader_"+colDef.key+"_append",[header]);if(Util.isNotNull(colDef.sorter)){header.push("<span class='"+this.Z.w+"'></span>")}header.push("</div>")
};ColHeader.e=function(target){Util$.safe$(target).attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})};prototype.get=function(key){if(this.d.hasOwnProperty(key)){return this.d[key]}var node=document.getElementById(this.mid+"h"+key);
if(Util.isNull(node)){return $([])}return(this.d[key]=$(node))};prototype.m=function(key,status){var colHeader=this.get(key);if(colHeader.length===0){return}var opt=this.Z,indicator=colHeader.find("."+opt.w);if(status===0){colHeader.removeClass(opt.v);indicator.removeClass(opt.x+" "+opt.y)
}else{colHeader.addClass(opt.v);if(status===1){indicator.addClass(opt.x).removeClass(opt.y)}else{if(status===2){indicator.addClass(opt.y).removeClass(opt.x)}}}};prototype.h=function(obj){return Util$.safe$(obj).closest("div."+this.Z.r,this.c)};prototype.y=function(header){return this.grid.colDefMgr.getByKey(header.attr("colKey"))
};prototype.i=function(e,colHeader,colDef){var sorter=colDef.sorter;if(Util.isNull(sorter)){return}this.grid.event.trigger("onBeforeColSort_"+colDef.key+" onBeforeColSort");sorter.desc=(sorter.desc===false)?true:false;this.grid.dataMgr.refresh({sorter:sorter});
this.grid.view.As()};prototype.l=function(oldSorter,newSorter){if(oldSorter===newSorter){if(Util.isNotNull(newSorter)){this.m(newSorter.key,(newSorter.desc?2:1))}return}if(Util.isNotNull(oldSorter)){this.m(oldSorter.key,0)}if(Util.isNotNull(newSorter)){this.m(newSorter.key,(newSorter.desc?2:1))
}};prototype.k=function(){var thisIns=this,opt=this.Z,colDefMgr=this.grid.colDefMgr,container=this.c,idSubLen=this.mid.length+1,updatefn=function(e,ui){var keys=$(container).sortable("toArray"),len=keys.length,key,i=0;for(;i<len;i++){key=keys[i];if(key===""){keys[i]=ui.item.attr("id").substring(idSubLen)
}else{keys[i]=key.substring(idSubLen)}}colDefMgr.sortByKey(keys)};container.sortable({items:"."+opt.r,axis:"x",forcePlaceholderSize:true,placeholder:opt.t+" "+opt.r,tolerance:"pointer",start:function(e,ui){ui.item.addClass(thisIns.Z.s)},stop:function(e,ui){ui.item.removeClass(thisIns.Z.s);
thisIns.A()},update:updatefn});if(opt.b){container.sortable("option","change",updatefn)}};prototype.s=function(e,colDef){var dx=e.clientX-this.o,minW=colDef.minW,maxW=Util.ifNull(colDef.maxW,Number.MAX_VALUE),initW=this.q;if(initW+dx<minW){dx=minW-initW}if(initW+dx>maxW){dx=maxW-initW
}return dx};prototype.J=function(e){var colHeader=this.h(e.target);if(colHeader.length===0){return}var colDef=this.y(colHeader);if(this.grid.event.triggerInvalid("clickHeaderValid_"+colDef.key,[e,colHeader,colDef])){return}this.grid.event.trigger("clickHeader_"+colDef.key+" clickHeader",[e,colHeader,colDef])
};prototype.L=function(e){if(Util.hasTagAndClass(e.target,"DIV",this.Z.z)){this.n=e.target.getAttribute("key");this.q=this.get(this.n)[0].clientWidth;this.v=this.grid.colDefMgr.getByKey(this.n).width;this.o=e.clientX;this.p=this.r[this.n][0].offsetLeft;this.w[0].style.left=Math.floor(this.p+(this.Z.A-this.Z.G)/2-this.Z.D)+"px";
this.w[0].style.height=this.grid.view.getInnerHeight()+"px";return}var colHeader=this.h(e.target);if(colHeader.length===0){return}this.grid.event.trigger("mousedownHeader",[e,colHeader]);var colDef=this.y(colHeader);this.grid.event.trigger("mousedownHeader_"+colDef.key,[e,colHeader,colDef])
};prototype.H=function(e){if(Util.isNull(this.n)){return}var dx=this.s(e,this.grid.colDefMgr.getByKey(this.n));if(Math.abs(dx)<1){return}this.get(this.n)[0].style.width=this.q+dx+"px";this.B(this.p+dx-this.r[this.n][0].offsetLeft,this.grid.colDefMgr.getIdxByKey(this.n));
this.w[0].style.left=Math.floor(this.p+dx+(this.Z.A-this.Z.G)/2-this.Z.D)+"px";if(this.Z.I){this.grid.view.setWidthByKey(this.n,this.v+dx)}};prototype.K=function(e){if(Util.isNull(this.n)){return}this.w[0].style.height="0px";var dx=this.s(e,this.grid.colDefMgr.getByKey(this.n));
if(Math.abs(dx)>=1){this.grid.view.setWidthByKey(this.n,this.v+dx)}delete this.n;delete this.o;delete this.p;delete this.q;delete this.v};prototype.z=function(key,w,o){this.get(key)[0].style.width=w+this.grid.view.f()-this.f()+"px";this.A(this.grid.colDefMgr.getIdxByKey(key))
};prototype.A=function(i){if(Util.isNull(i)){i=0}var lefts=this.grid.view.Bh(),colDefs=this.grid.colDefMgr.get(),len=colDefs.length,rmap=this.r,key;for(;i<len;i++){key=colDefs[i].key;if(rmap.hasOwnProperty(key)){rmap[key][0].style.left=(lefts[i+1]+this.D)+"px"
}}};prototype.B=function(dx,i){if(Util.isNull(i)){i=0}var colDefs=this.grid.colDefMgr.get(),len=colDefs.length,rmap=this.r,key,node;for(;i<len;i++){key=colDefs[i].key;if(rmap.hasOwnProperty(key)){node=rmap[key][0];node.style.left=(node.offsetLeft+dx)+"px"}}};
prototype.C=function(){this.w[0].style.top=this.grid.view.getScrollTop()+"px"};prototype.t=function(){var rmap=this.r,key;for(key in rmap){if(rmap.hasOwnProperty(key)){rmap[key].remove();delete rmap[key]}}delete this.n;delete this.o;delete this.p;delete this.q;
delete this.v};prototype.u=function(){var colDefs=this.grid.colDefMgr.get(),len=colDefs.length,lefts=this.grid.view.Bh(),opt=this.Z,rmap=this.r,colDef,key,i=0,offset=this.D=Math.floor(opt.D-opt.A/2),vmid=this.grid.view.mid,handle=opt.z,head=this.c;for(;i<len;
i++){colDef=colDefs[i];if(colDef.resizable){key=colDef.key;rmap[key]=$("<div class='"+handle+"' key='"+key+"' ondblclick='JGM.m.ViewportManager."+vmid+'.Bg("'+key+"\")' style='left:"+(offset+lefts[i+1])+"px' title='"+colDef.name+" 컬럼의 폭을 조절합니다.'>").appendTo(head)
}}};JGM.b("ColHeader",ColHeader)}());(function(){function Collapser(args){this.mid=args.mid;this.grid=args.grid;this.grid.collapser=this;var options={e:undefined,a:{key:"collapser",width:120,name:" ",noSearch:true},b:0,c:this.grid.Z.g+"collapsed.png",d:this.grid.Z.g+"collapsed-hover.png",f:this.grid.Z.g+"expanded.png",g:this.grid.Z.g+"expanded-hover.png",h:6,i:5,j:"jgrid-collapser",k:"collapsed",l:"expanded",m:"indent",n:"master",o:12,p:false,CheckManager:undefined,Tree:undefined};
this.Z=JGM.e(options,args.options,{colDef:"a",colIdx:"b",urlCollapsed:"c",urlCollapsedHover:"d",key:"e",urlExpanded:"f",urlExpandedHover:"g",width:"h",padding:"i",classCollapser:"j",classCollapsed:"k",classExpanded:"l",classIndent:"m",classMasterCollapser:"n",indentSize:"o",beginCollapsed:"p"});
if(this.Z.CheckManager){this.checkMgr=JGM.create("CheckManager",{grid:this.grid,options:this.Z.CheckManager});delete this.Z.CheckManager;if(Util.isNull(this.Z.e)){this.Z.b++}}this.a=JGM.create("Tree",{list:this.grid.dataMgr.all,options:this.Z.Tree});this.c;
this.key}Collapser.X=function(args){return new Collapser(args)};var prototype=Collapser.prototype;prototype.Y=function(){if(Util.isNull(this.Z.e)){this.grid.colDefMgr.addAt(this.Z.b,this.Z.a)}this.d();this.g();this.key=Util.isNull(this.Z.e)?this.Z.a.key:this.Z.e;
this.bindEvents()};prototype.bindEvents=function(){var key=this.key,events;events={onAfterFilter:this.as,onCreateCss:this.V,onDestroy:this.aA,onAfterSetDatalist:this.ab,onAddDatarow:this.ac,onAddDatalist:this.ad,onUpdateDatarow:this.ae,onUpdateDatalist:this.ah,onRemoveDatarow:this.A,onRemoveDatalist:this.ag,onRenderHeadersComplete:this.h};
events["onRenderHeader_"+key+"_prepend"]=this.aG;events["clickHeaderValid_"+key]=this.bO;events["onRenderCell_"+key+"_prepend"]=this.aH;events["dblclickCanvas_"+key]=this.bi;events["keydownColSel_"+key+"_"+Util.keyMapKeydown.space]=this.bA;if(Util.isNotNull(this.checkMgr)){events.onCheckChange=this.f
}this.grid.event.bind(events,this)};prototype.aA=function(){JGM.q(this,{name:"Collapser",path:"collapser",module:"a","$":"c",property:"checkMgr",map:"Z"})};prototype.V=function(){var gridId="#"+this.grid.mid+" .",o=this.Z,rowSel=gridId+this.grid.view.Z.l+" .",toggleSel=gridId+o.j,expandedSel=toggleSel+"."+o.l,collapsedSel=toggleSel+"."+o.k,rowH=this.grid.view.AO(),rules=[],header=this.grid.header;
rules.push(gridId+o.m+"{height:"+rowH+"px;float:left;}");rules.push(toggleSel+"{width:"+o.h+"px;float:left;padding:0 "+o.i+"px}");rules.push(rowSel+o.j+"{height:"+rowH+"px}");rules.push(expandedSel+"{background:url("+o.f+") no-repeat center transparent}");rules.push(expandedSel+":hover{background:url("+o.g+") no-repeat center transparent}");
rules.push(collapsedSel+"{background:url("+o.c+") no-repeat center transparent}");rules.push(collapsedSel+":hover{background:url("+o.d+") no-repeat center transparent}");if(Util.isNotNull(header)){rules.push(gridId+header.Z.r+" ."+o.j+"{height:"+header.Z.l+"px}")
}return rules.join("")};prototype.ab=function(datalist){this.a.destroy();this.a=JGM.create("Tree",{list:this.grid.dataMgr.all,options:this.Z.Tree});this.d()};prototype.ac=function(datarow){var node=this.a.createNode(datarow);node._collapsed=this.Z.p;if(Util.isNotNull(node.parent)&&(node.parent===node.tree.root||(node.parent._shown&&!node.parent._collapsed))){node._shown=true
}else{node._shown=false}if(Util.isNotNull(node.parent)&&node.parent.children.length===1){this.grid.view.rerenderCellByIdAndKey(this.grid.dataMgr.getId(node.parent.data),this.key)}if(node._collapsed===true||node._shown===false){node.traverseChildren({fn:function(args){this._shown=false
}})}else{node.traverseChildren({fn:function(args){if(Util.isNotNull(this.parent)&&(this.parent===this.tree.root||(this.parent._shown&&!this.parent._collapsed))){this._shown=true}else{args.propagate=false;this.traverse({fn:function(args){this._shown=false}})
}}})}this.grid.event.trigger("onCollapserTreeChange")};prototype.ad=function(datalist){var i=0,len=datalist.length,tree=this.a,root=tree.root,collapsed=this.Z.p,key=this.key,view=this.grid.view,datam=this.grid.dataMgr,node,toRerender=[],par;for(;i<len;i++){node=tree.createNode(datalist[i]);
node._collapsed=collapsed;if(Util.isNotNull(node.parent)&&node.parent.children.length===1){toRerender.push(node.parent.data)}}if(view!==undefined){i=0;len=toRerender.length;for(;i<len;i++){view.rerenderCellByIdAndKey(datam.getId(toRerender[i]),key)}}root.traverseChildren({fn:function(args){par=this.parent;
if(Util.isNotNull(par)&&(par===root||(par._shown&&!par._collapsed))){this._shown=true}else{args.propagate=false;this.traverse({fn:function(args){this._shown=false}})}}});this.grid.event.trigger("onCollapserTreeChange")};prototype.ae=function(datarow,change,before){var tree=this.a,nodeKey=tree.Z.nodeKey,parentKey=tree.Z.parentKey,node;
if(change.hasOwnProperty(nodeKey)){node=tree.getNodeByNodeId(before[nodeKey]);tree.changeNodeId(node,before[nodeKey],change[nodeKey]);this.grid.event.trigger("onCollapserTreeChange")}if(change.hasOwnProperty(parentKey)){if(Util.isNull(node)){node=tree.getNode(datarow)
}tree.changeParentId(node,before[parentKey],change[parentKey]);this.grid.event.trigger("onCollapserTreeChange")}};prototype.ah=function(datalist,changes,befores){var tree=this.a,nodeKey=tree.Z.nodeKey,parentKey=tree.Z.parentKey,before,datarow,treeNode,nodeIdChanged=[],parentIdChanged=[],nlen,plen,temp,i=0,len=datalist.length;
for(;i<len;i++){before=befores[i];datarow=datalist[i];treeNode=undefined;if(before.hasOwnProperty(nodeKey)){if(Util.isNull(treeNode)){treeNode=tree.getNodeByNodeId(before[nodeKey])}nodeIdChanged.push({node:treeNode,before:before[nodeKey],newId:datarow[nodeKey]})
}if(before.hasOwnProperty(parentKey)){if(Util.isNull(treeNode)){treeNode=tree.getNode(datarow)}parentIdChanged.push({node:treeNode,before:before[parentKey],newId:datarow[parentKey]})}}nlen=nodeIdChanged.length;plen=parentIdChanged.length;if(nlen+plen===0){return
}if(nlen+plen>10){tree.reattach()}else{for(i=0;i<nlen;i++){temp=nodeIdChanged[i];tree.changeNodeId(temp.node,temp.before,temp.newId)}for(i=0;i<plen;i++){temp=parentIdChanged[i];tree.changeParentId(temp.node,temp.before,temp.newId)}}this.grid.event.trigger("onCollapserTreeChange")
};prototype.A=function(datarow){this.a.destroyNodeByData(datarow);this.grid.event.trigger("onCollapserTreeChange")};prototype.ag=function(datalist){var i=0,len=datalist.length,tree=this.a;for(;i<len;i++){tree.destroyNodeByData(datalist[i])}this.grid.event.trigger("onCollapserTreeChange")
};prototype.as=function(filteredList,failedList){var tree=this.a;if(failedList.length>0){var dataMgr=this.grid.dataMgr,len=filteredList.length,indexMap=dataMgr.b,idKey=dataMgr.idKey,pdata,i=0,travfn=function(args){if(Util.isNotNull(this.parent)){pdata=this.parent.data;
if(Util.isNotNull(pdata)&&!dataMgr.has(pdata)){filteredList.push(pdata);failedList.remove(pdata);indexMap[pdata[idKey]]=-1}}else{args.stop=true}};dataMgr.g();tree.reattach();for(;i<len;i++){tree.getNode(filteredList[i]).traverse({up:true,fn:travfn})}tree.reattach(filteredList);
tree.sortList(filteredList);this.grid.event.trigger("onCollapserTreeChange")}else{tree.reattach(filteredList);this.grid.event.trigger("onCollapserTreeChange");this.b(filteredList,failedList)}};prototype.b=function(filteredList,failedList){filteredList.length=0;
this.a.root.traverseChildren({fn:function(args){if(this._shown){filteredList.push(this.data)}else{failedList.push(this.data)}}})};prototype.toggleById=function(id){if(Util.isNotNull(id)){return this.toggleCollapse(this.a.getNode(this.grid.dataMgr.getById(id)))
}};prototype.toggle=function(datarow){return this.toggleById(this.grid.dataMgr.getId(datarow))};prototype.toggleByIdx=function(i){return this.toggleById(this.grid.dataMgr.getIdByIdx(i))};prototype.bO=function(e,colheader){if(Util.hasTagAndClass(e.target,"DIV",this.Z.j)){return false
}};prototype.bi=function(e,cell){if(Util.hasTagAndClass(e.target,"DIV",this.Z.j)){return}this.toggleCollapse(this.a.getNode(cell.getDatarow()))};prototype.bA=function(e,colSelections,lastSelection){e.preventDefault();if(Util.isNotNullAnd(colSelections,lastSelection)){var tree=this.a,collapsed=tree.getNode(lastSelection.getDatarow())._collapsed,datalist=this.grid.dataMgr.datalist,node,row;
for(row in colSelections){if(colSelections.hasOwnProperty(row)){if(row==="length"){continue}node=tree.getNode(datalist[row]);if(collapsed){this.expand(node)}else{this.collapse(node)}}}this.g()}};prototype.d=function(){var tree=this.a,i,map,root;tree.Y();map=tree.map;
root=tree.root;if(this.Z.p){for(i in map){if(map.hasOwnProperty(i)){map[i]._collapsed=true;map[i]._shown=false}}var first=root.children,len=first.length;for(i=0;i<len;i++){first[i]._shown=true}root._collapsed=true}else{for(i in map){if(map.hasOwnProperty(i)){map[i]._collapsed=false;
map[i]._shown=true}}root._collapsed=false}this.grid.event.trigger("onCollapserTreeChange")};prototype.aG=function(headerHtml){headerHtml.push("<div id='"+this.mid+"h' onmousedown='JGM.m.Collapser."+this.mid+".toggleMaster();' class='"+this.Z.j+" "+this.Z.n);
if(this.a.root._collapsed){headerHtml.push(" "+this.Z.k)}else{headerHtml.push(" "+this.Z.l)}headerHtml.push("'></div>")};prototype.aH=function(rowIdx,colIdx,datarow,colDef,cellHtml){var node=this.a.getNode(datarow);if(Util.isNull(node)){return null}var id=this.grid.dataMgr.getId(datarow),opt=this.Z;
cellHtml.push("<div class='"+opt.m+"' style='width:"+(opt.o*node.getLevel())+"px;'></div><div ");if(!node.isLeaf()){cellHtml.push('onmousedown="JGM.m.Collapser.'+this.mid+".toggleById('"+id+"');\" class='"+opt.j);if(node._collapsed){cellHtml.push(" "+opt.k)
}else{cellHtml.push(" "+opt.l)}}else{cellHtml.push("class='"+opt.j)}cellHtml.push("'></div>")};prototype.getLevel=function(datarow){var node=this.a.getNode(datarow);if(Util.isNull(node)){return null}return node.getLevel()};prototype.collapse=function(node,nocheck){if(node._collapsed===true||node.isLeaf()){return
}node._collapsed=true;node.traverseChildren({fn:function(args){this._shown=false;if(this._collapsed){args.propagate=false}}});var collapser=this.i(node.data);if(collapser.length>0){this.e(collapser,true)}if(!nocheck&&node.parent===this.a.root&&this.a.root._collapsed===false){this.e(this.c,this.a.root._collapsed=true)
}};prototype.expand=function(node,nocheck){if(node._collapsed===false||node.isLeaf()){return}node._collapsed=false;node.traverseChildren({fn:function(args){this._shown=true;if(this._collapsed){args.propagate=false}}});var collapser=this.i(node.data),tree=this.a;
if(collapser.length>0){this.e(collapser,false)}if(!nocheck&&node.parent===tree.root){var first=tree.root.children,len=first.length,i=0;for(;i<len;i++){if(first[i]._collapsed){return}}this.e(this.c,tree.root._collapsed=false)}};prototype.e=function(ob,collapsed){if(Util.isNull(ob)){return
}var opt=this.Z;if(collapsed){ob.addClass(opt.k).removeClass(opt.l)}else{ob.addClass(opt.l).removeClass(opt.k)}};prototype.toggleMaster=function(){var root=this.a.root,first=root.children,len=first.length,i=0;if(root._collapsed){for(;i<len;i++){this.expand(first[i],true)
}this.e(this.c,root._collapsed=false)}else{for(;i<len;i++){this.collapse(first[i],true)}this.e(this.c,root._collapsed=true)}this.g()};prototype.toggleCollapse=function(node){var res;if(node._collapsed){res=this.expand(node)}else{res=this.collapse(node)}this.g();
return res};prototype.f=function(datarow,check){var node=this.a.getNode(datarow),checkMgr=this.checkMgr,inputs=[],input;if(check){node.traverseChildren({fn:function(args){if(checkMgr.isChecked(this.data)){args.propagate=false}else{checkMgr.f(this.data);if(Util.isNotNull(input=checkMgr.getCheckbox(this.data))){inputs.push(input)
}}}});node.traverseParent({up:true,fn:function(args){if(Util.isNull(this.data)||checkMgr.isChecked(this.data)){args.stop=true}else{checkMgr.f(this.data);if(Util.isNotNull(input=checkMgr.getCheckbox(this.data))){inputs.push(input)}}}});JGM.CheckManager.a($(inputs));
checkMgr.e()}else{node.traverseChildren({fn:function(args){if(!checkMgr.isChecked(this.data)){args.propagate=false}else{checkMgr.g(this.data);if(Util.isNotNull(input=checkMgr.getCheckbox(this.data))){inputs.push(input)}}}});node.traverseParent({up:true,fn:function(args){if(Util.isNull(this.data)||!checkMgr.isChecked(this.data)){args.stop=true
}else{var i=0,children=this.children,clen=children.length;for(;i<clen;i++){if(checkMgr.isChecked(children[i].data)){args.stop=true;return}}checkMgr.g(this.data);if(Util.isNotNull(input=checkMgr.getCheckbox(this.data))){inputs.push(input)}}}});JGM.CheckManager.b($(inputs))
}};prototype.g=function(){this.b(this.grid.dataMgr.datalist,this.grid.dataMgr.failed);this.grid.dataMgr.k()};prototype.i=function(datarow){if(Util.isNull(datarow)){return $([])}var found=Util.findFirstByTagAndClass(this.grid.view.getCell(this.grid.dataMgr.getIdx(datarow),this.grid.colDefMgr.getIdxByKey(this.key)),"DIV",this.Z.j);
if(found===undefined){return $([])}else{return $(found)}};prototype.h=function(){this.c=$(document.getElementById(this.mid+"h"))};JGM.b("Collapser",Collapser)}());(function(){function ColGroup(args){this.mid=args.mid;this.grid=args.grid;this.grid.colGroup=this;
var options={a:undefined,b:[],c:[],prefix:"합계: ",Collapser:{indentSize:0}};this.Z=JGM.e(options,args.options,{key:"a",padColKeys:"b",sumColKeys:"c"});this.Z.Collapser.key=this.Z.a;this.collapser;this.a={};this.Y()}ColGroup.X=function(args){return new ColGroup(args)
};var prototype=ColGroup.prototype;prototype.Y=function(){var grid=this.grid,datam=grid.dataMgr,collapser,opt=this.Z;this.bindEvents();collapser=this.collapser=JGM.create("Collapser",{grid:grid,options:opt.Collapser});delete opt.Collapser;this.b(datam.all);
collapser.Y();datam.refresh()};prototype.bindEvents=function(){var events;events={onBeforeSetDatalist:this.f,"onAfterSetDatalist onAddDatalist":this.b,onAddDatarow:this.ac,onUpdateDatarow:this.ae,onUpdateDatalist:this.ah,onRemoveDatarow:this.af,onRemoveDatalist:this.ag,onDestroy:this.aA};
if(this.Z.c.length!==0){var mid=this.mid,notReal=this.grid.dataMgr.n.d,i=0,sumfn,sumkeys=this.Z.c,prefix=this.Z.prefix,len=sumkeys.length;sumfn=function(rowIdx,colIdx,datarow,colDef,cellHtml){if(datarow[notReal]===mid){cellHtml.push(prefix)}};for(;i<len;i++){events["onRenderCell_"+sumkeys[i]+"_prepend"]=sumfn
}events.onCollapserTreeChange=this.g}this.grid.event.bind(events,this)};prototype.aA=function(){JGM.q(this,{name:"ColGroup",path:"colGroup",property:"collapser",map:"a Z"})};prototype.b=function(datalist){var len=datalist.length,key=this.Z.a,padColKeys=this.Z.b,datam=this.grid.dataMgr,notReal=datam.n.d,idKey=datam.idKey,collapser=this.collapser,nodeKey=collapser.a.Z.nodeKey,parentKey=collapser.a.Z.parentKey,newParents=[],i=0;
for(;i<len;i++){this.c(datalist[i],key,idKey,notReal,nodeKey,parentKey,padColKeys,newParents)}if(newParents.length!==0){datam.all.pushList(newParents);datam.makeCompositeKeyList(newParents,true);datam.addListToIdMap(newParents);if(Util.isNotNull(collapser)){collapser.ad(newParents)
}}return newParents};prototype.c=function(data,key,idKey,notReal,nodeKey,parentKey,padColKeys,newParents){var keyVal=data[key],parent,map=this.a;if(!map.hasOwnProperty(keyVal)){parent=this.d(data,key,idKey,keyVal,notReal,nodeKey,padColKeys);newParents.push(parent);
map[keyVal]=parent}else{parent=map[keyVal]}data[nodeKey]=data[idKey];data[parentKey]=this.mid+keyVal};prototype.d=function(data,key,idKey,keyVal,notReal,nodeKey,padColKeys){var parent={},j=0,len=padColKeys.length;parent[notReal]=this.mid;parent[nodeKey]=this.mid+keyVal;
parent[key]=keyVal;parent[idKey]=(this.grid.colDefMgr.getByKey(key).name||key)+": "+keyVal;for(;j<len;j++){parent[padColKeys[j]]=data[padColKeys[j]]}return parent};prototype.e=function(datarow){return datarow[this.grid.dataMgr.n.d]===this.mid};prototype.f=function(datalist){this.a={}
};prototype.ac=function(datarow){var newParents=[],opt=this.Z,datam=this.grid.dataMgr,collapser=this.collapser,ctopt=collapser.a.Z;this.c(datarow,opt.a,datam.idKey,datam.n.d,ctopt.nodeKey,ctopt.parentKey,opt.b,newParents);if(newParents.length!==0){var parent=newParents[0];
datam.all.push(parent);datam.makeCompositeKey(parent,true);datam.addToIdMap(parent);collapser.ac(parent)}};prototype.ae=function(datarow,change,before){if(change.hasOwnProperty(this.Z.a)){var key=this.Z.a,newkey=change[key],oldkey=before[key],mid=this.mid,collapser=this.collapser,tree=collapser.a,tpkey=tree.Z.parentKey,parKey={},oldParKey={},pmap=this.a,oldp;
if(!pmap.hasOwnProperty(newkey)){this.ac(datarow)}parKey[tpkey]=mid+newkey;oldParKey[tpkey]=mid+oldkey;collapser.ae(datarow,parKey,oldParKey);oldp=tree.getNode(pmap[oldkey]);if(oldp.children.length===0){this.grid.dataMgr.all.remove(oldp.data);delete pmap[oldkey];
collapser.A(oldp.data)}}};prototype.ah=function(datalist,changes,befores){var key=this.Z.a,mid=this.mid,collapser=this.collapser,tree=collapser.a,tpkey=tree.Z.parentKey,change,parKey={},oldParKey={},parKeys=[],oldParKeys=[],list=[],i=0,len=datalist.length;for(;
i<len;i++){change=changes[i];if(change.hasOwnProperty(key)){parKey={};parKey[tpkey]=mid+change[key];parKeys.push(parKey);oldParKey={};oldParKey[tpkey]=mid+befores[i][key];oldParKeys.push(oldParKey);list.push(datalist[i])}}if(list.length!==0){var oldkey,pmap=this.a,oldp,removeList=[];
this.b(list);collapser.ah(list,parKeys,oldParKeys);i=0;len=oldParKeys.length;for(;i<len;i++){oldkey=oldParKeys[i][tpkey];if(pmap.hasOwnProperty(oldkey)){oldp=tree.getNode(pmap[oldkey]);if(oldp.children.length===0){delete pmap[oldkey];removeList.push(oldp.data)
}}}if(removeList.length!==0){collapser.ag(removeList);this.grid.dataMgr.all.removeList(removeList)}}};prototype.af=function(datarow){if(this.e(datarow)){delete this.a[datarow[this.Z.a]]}else{var parentNode=this.collapser.a.getNode(datarow).parent;if(parentNode.children.length===1){this.grid.dataMgr.remove(parentNode.data)
}}};prototype.ag=function(datalist){var i=0,len=datalist.length;for(;i<len;i++){this.af(datalist[i])}};prototype.g=function(){var sums={},sumKeys=this.Z.c,len=sumKeys.length,i=0,notReal=this.grid.dataMgr.n.d,mid=this.mid,data,curKey,tmp;for(;i<len;i++){sums[sumKeys[i]]=0
}this.collapser.a.root.traverseChildren({post:true,fn:function(args,index){data=this.data;i=0;if(data[notReal]===mid){for(;i<len;i++){curKey=sumKeys[i];data[curKey]=sums[curKey];sums[curKey]=0}}else{if(!data.hasOwnProperty(notReal)){for(;i<len;i++){if(typeof(tmp=data[sumKeys[i]])==="string"){tmp=tmp.toFloat()
}sums[sumKeys[i]]+=isNaN(tmp)?0:tmp}}}}})};JGM.b("ColGroup",ColGroup)}());(function(){function DataCreator(args){this.mid=args.mid;this.b=args.container;this.a;this.grid=args.grid;this.grid.creator=this;var options={a:"#dfdfdf",b:0,c:"solid #D6D6D6",d:"solid #A7A7A7",e:1,f:18,g:8,h:2,i:"12px Arial,Helvetica,sans-serif",j:28,k:3,l:"creator-icon",m:this.grid.Z.g+"data-creator-icon.png",n:13,o:13,p:"data-creator",q:"data-creator-name",r:3};
this.Z=JGM.e(options,args.options,{background:"a",borderThickness:"b",border:"c",inputBorder:"d",inputBorderThickness:"e",inputHeight:"f",inputMargin:"g",nameMargin:"h",font:"i",height:"j",padding:"k",classCreatorIcon:"l",creatorIconUrl:"m",creatorIconWidth:"n",creatorIconHeight:"o",classCreator:"p",classColName:"q",inputBorderRadius:"r"});
this.c={};this.Y()}DataCreator.X=function(args){return new DataCreator(args)};var prototype=DataCreator.prototype;prototype.Y=function(){this.a=$("<div class='"+this.Z.p+"'>").appendTo(this.b);this.bindEvents()};prototype.bindEvents=function(){var events={onRenderModules:this.aE,onCreateCss:this.V,onDestroy:this.aA};
this.grid.event.bind(events,this)};prototype.V=function(){var gridId="#"+this.grid.mid+" .",o=this.Z,border=o.b+"px "+o.c,rules=[];rules.push(gridId+o.p+"{"+JGM.g.a+"float:left;width:100%;padding-left:8px;background:"+o.a+";border-top:"+border+";font:"+o.i+"}");
rules.push(gridId+o.p+" button{float:left;margin:"+o.k+"px "+o.k+"px 0 0;height:"+(o.j-2*o.k)+"px}");rules.push(gridId+o.p+" input{float:left;padding:0;margin-top:"+((o.j-o.f-2*o.e)/2)+"px;height:"+o.f+"px;border:"+o.e+"px "+o.d+";border-radius:"+o.r+"px;-moz-border-radius:"+o.r+"px}");
rules.push(gridId+o.classCol+"{float:left;overflow:hidden;white-space:nowrap;line-height:"+o.j+"px;margin-right:"+o.g+"px}");rules.push(gridId+o.q+"{float:left;margin-right:"+o.h+"px}");rules.push(gridId+o.l+"{background:url("+o.m+") no-repeat center;width:"+o.n+"px;height:"+o.o+"px}");
return rules.join("")};prototype.aE=function(){var html=[],colDefs=this.grid.colDefMgr.getAll(),len=colDefs.length,colDef,opt=this.Z,classCol=opt.classCol,classColName=opt.q,thisIns=this,creator=this.a,imap=this.c,i=0,keyupfn=function(e){if(e.which===Util.keyMapKeydown.enter){thisIns.d()
}};for(;i<len;i++){colDef=colDefs[i];if(colDef.inputOnCreate===true){html.push("<div key='"+colDef.key+"' class='"+classCol+"'><div class='"+classColName+"'>"+colDef.name+"</div><input type='text' value='"+Util.ifNull(colDef.defaultValue,"")+"' style='width:"+colDef.width+"px'/></div>")
}}creator[0].innerHTML=html.join("")+"<button type='button' onclick='JGM.m.DataCreator."+this.mid+".d()'>등록</button><button type='button' onclick='JGM.m.DataCreator."+this.mid+".e()'>초기화</button>";for(i=0;i<len;i++){colDef=colDefs[i];if(colDef.inputOnCreate===true){imap[colDef.key]=creator.find("div[key='"+colDef.key+"'] input").keyup(keyupfn)
}}if(Util.isNotNull(this.grid.menubar)){this.grid.menubar.addIcon(opt.l,"데이터 로우를 추가합니다.",opt.n,opt.o,function(){creator.toggle("fast")});creator.hide()}};prototype.d=function(){var key,imap=this.c,cmgr=this.grid.colDefMgr,colDef,input,newData={},colDefs=cmgr.getAll(),len=colDefs.length,i=0;
for(key in imap){if(imap.hasOwnProperty(key)){colDef=cmgr.getByKey(key);input=imap[key]}}for(;i<len;i++){colDef=colDefs[i];key=colDef.key;if(imap.hasOwnProperty(key)){newData[key]=imap[key][0].value}else{if(colDef.defaultValue!==undefined){newData[key]=colDef.defaultValue
}}}this.grid.event.trigger("onAfterDataCreate",[newData]);this.grid.dataMgr.add(newData,{isNew:true})};prototype.e=function(){var key,cmgr=this.grid.colDefMgr,colDef,imap=this.c;for(key in imap){if(imap.hasOwnProperty(key)){colDef=cmgr.getByKey(key);if(colDef.defaultValue!==undefined){imap[key][0].value=colDef.defaultValue
}}}};prototype.aA=function(){var i,imap=this.c;for(i in imap){if(imap.hasOwnProperty(i)){JGM.n(imap,i)}}JGM.q(this,{name:"DataCreator",path:"creator","$":"a",map:"c Z"})};JGM.b("DataCreator",DataCreator)}());(function(){function DataManager(args){this.mid=args.mid;
this.grid=args.grid;this.grid.dataMgr=this;this.all=[];this.datalist=[];this.failed=[];var options={a:undefined,c:[],uniqueKeys:[]};this.Z=JGM.e(options,args.options,{idKey:"a",idColKeys:"c"});this.n={a:0,b:1,c:2,d:this.mid+"@NR"+Util.random(10000),e:0,f:1,g:2,h:3,i:4,j:5,unknown:0,number:1,string:2,"boolean":3,date:4,"enum":5};
if(Util.isNotNull(this.Z.a)){this.m=this.n.b;this.idKey=this.Z.a}else{if(this.Z.c.length!==0){this.m=this.n.c;this.idKey="J@I"+this.mid+"@"+Util.random(10000)}else{this.m=this.n.a;this.idKey="J@I"+this.mid+"@"+Util.random(10000)}}this.l=0;this.keyToType={};
this.b={};this.a={};this.h;this.r=[];this.e=[];this.q=[];this.uniqueMap={};this.Y(args)}DataManager.X=function(args){return new DataManager(args)};var prototype=DataManager.prototype;prototype.Y=function(args){var i=0,ukeys=this.Z.uniqueKeys,ukey,umap=this.uniqueMap,len=ukeys.length,tmap=this.keyToType,colDefs=this.grid.colDefMgr.getAll(),colDef,key;
for(;i<len;i++){ukey=ukeys[i];if(typeof ukey==="string"){umap[ukey]={}}}len=colDefs.length;for(i=0;i<len;i++){colDef=colDefs[i];key=colDef.key;if(colDef.hasOwnProperty("unique")&&colDef.unique===true&&!umap.hasOwnProperty(key)){umap[key]={}}tmap[key]=this.mapDatatype(colDef.type)
}Util.ifNull(args.datalist,[]);this.bindEvents();this.set(args.datalist)};prototype.mapDatatype=function(type){if(typeof type==="string"){type=type.toLowerCase();switch(type){case"number":return this.n.number;case"string":return this.n.string;case"boolean":return this.n["boolean"];
case"date":return this.n.date;case"enum":return this.n["enum"];default:return this.n.unknown}}return this.n.unknown};prototype.bindEvents=function(){this.grid.event.bind({onDestroy:this.aA,keydownCanvas:this.ba},this)};prototype.aA=function(){this.cleanList(this.all);
JGM.q(this,{name:"DataManager",path:"dataMgr",property:"all m l idKey h",map:"n b a Z",array:"datalist failed e q r"})};prototype.addUniqueIndex=function(map,key,data,safe){if(safe!==true){if(Util.isNull(map)||Util.isEmptyString(key)||Util.isNull(data)){return false
}}if(data.hasOwnProperty(key)===false){return this.grid.error("KEY_UNDEFINED",key)}var val;if(Util.isEmptyString(val=data[key])){return this.grid.error("BAD_NULL",key)}if(map.hasOwnProperty(val)){if(map[val]===data){return false}return this.grid.error("DUP_ENTRY",val,key)
}map[val]=data;return true};prototype.addUniqueIndices=function(map,key,list,safe){if(safe!==true){if(Util.isNull(map)||Util.isEmptyString(key)||Util.isEmptyArray(list)){return false}}var i,len=list.length,success=[],val,data;for(i=0;i<len;i++){if(Util.isNull(data=list[i])){continue
}if(data.hasOwnProperty(key)===false){this.removeUniqueIndices(map,key,success);return this.grid.error("KEY_UNDEFINED",key)}if(Util.isEmptyString(val=data[key])){this.removeUniqueIndices(map,key,success);return this.grid.error("BAD_NULL",key)}if(map.hasOwnProperty(val)){if(map[val]===data){continue
}this.removeUniqueIndices(map,key,success);return this.grid.error("DUP_ENTRY",val,key)}success.push(map[val]=data)}return success.length>0};prototype.updateUniqueIndex=function(map,key,data,change,before,safe){if(safe!==true){if(Util.isEmptyObj(map)||Util.isEmptyString(key)||Util.isNullOr(data,before)||Util.isEmptyObj(change)){return false
}}if(change.hasOwnProperty(key)===false){return false}var oldKey,newKey;if(before.hasOwnProperty(key)===false||data.hasOwnProperty(key)===false){return this.grid.error("KEY_UNDEFINED",key)}if(map.hasOwnProperty(oldKey=before[key])===false){return this.grid.error("KEY_NOT_FOUND",oldKey,key)
}if(Util.isEmptyString(newKey=change[key])){return this.grid.error("BAD_NULL",key)}if(map.hasOwnProperty(newKey)){if(map[newKey]===data){return false}return this.grid.error("DUP_ENTRY",newKey,key)}map[newKey]=data;delete map[oldKey];return oldKey};prototype.updateUniqueIndices=function(map,key,list,changes,befores,safe){if(safe!==true){if(Util.isEmptyObj(map)||Util.isEmptyString(key)||Util.isEmptyArray(list)||Util.isEmptyArray(changes)||Util.isEmptyArray(befores)){return false
}if(list.length!==changes.length||list.length!==befores.length){return this.grid.error("LENGTH_NOT_EQUAL")}}var i=0,len=list.length,data,before,change,slist=[],schanges=[],sbefores=[],newKey,oldKey;for(;i<len;i++){if(Util.isNull(data=list[i])){continue}if((change=changes[i]).hasOwnProperty(key)===false){continue
}before=befores[i];if(before.hasOwnProperty(key)===false||data.hasOwnProperty(key)===false){this.updateUniqueIndices(map,key,slist,sbefores,schanges);return this.grid.error("KEY_UNDEFINED",key)}if(map.hasOwnProperty(oldKey=before[key])===false){this.updateUniqueIndices(map,key,slist,sbefores,schanges);
return this.grid.error("KEY_NOT_FOUND",oldKey,key)}if(Util.isEmptyString(newKey=change[key])){this.updateUniqueIndices(map,key,slist,sbefores,schanges);return this.grid.error("BAD_NULL",key)}if(map.hasOwnProperty(newKey)){if(map[newKey]===data){continue}this.updateUniqueIndices(map,key,slist,sbefores,schanges);
return this.grid.error("DUP_ENTRY",newKey,key)}map[newKey]=data;delete map[oldKey];slist.push(data);schanges.push(change);sbefores.push(before)}if(slist.length===0){return false}return{datalist:slist,changes:schanges,befores:sbefores}};prototype.removeUniqueIndex=function(map,key,data,safe){if(safe!==true){if(Util.isEmptyObj(map)||Util.isEmptyString(key)||Util.isEmptyObj(data)){return
}}var val;if(data.hasOwnProperty(key)&&map.hasOwnProperty(val=data[key])){delete map[val]}};prototype.removeUniqueIndices=function(map,key,list,safe){if(safe!==true){if(Util.isEmptyObj(map)||Util.isEmptyString(key)||Util.isEmptyArray(list)){return}}var i,len=list.length,val,data;
for(i=0;i<len;i++){data=list[i];if(data.hasOwnProperty(key)&&map.hasOwnProperty(val=data[key])){delete map[val]}}};prototype.addToUniqueMap=function(datarow){if(Util.isEmptyObj(datarow)||Util.isEmptyObj(this.uniqueMap)){return false}var added=[],key,umap=this.uniqueMap,res;
for(key in umap){if(umap.hasOwnProperty(key)){res=this.addUniqueIndex(umap[key],key,datarow);if(res===true){added.push(key)}else{if(res instanceof Error){var i=0,len=added.length;for(;i<len;i++){this.removeUniqueIndex(umap[added[i]],added[i],datarow)}return res
}}}}return added.length>0};prototype.addListToUniqueMap=function(datalist){if(Util.isEmptyArray(datalist)||Util.isEmptyObj(this.uniqueMap)){return false}var umap=this.uniqueMap,success=[],key,res;for(key in umap){if(umap.hasOwnProperty(key)){res=this.addUniqueIndices(umap[key],key,datalist);
if(res===true){success.push(key)}else{if(res instanceof Error){var i=0,len=success.length;for(;i<len;i++){this.removeUniqueIndices(umap[success[i]],success[i],datalist)}return res}}}}return success.length>0};prototype.updateUniqueMap=function(datarow,change,before){if(Util.isNullOr(datarow,change,before)||Util.isEmptyObj(this.uniqueMap)){return false
}var key,umap=this.uniqueMap,changed=[],res;for(key in umap){if(umap.hasOwnProperty(key)){res=this.updateUniqueIndex(umap[key],key,datarow,change,before);if(res instanceof Error){var i=0,len=changed.length;for(;i<len;i++){this.updateUniqueIndex(umap[changed[i]],changed[i],datarow,before,change)
}return res}if(res!==false){changed.push(key)}}}return changed.length>0};prototype.updateListUniqueMap=function(datalist,changes,befores){if(Util.isEmptyArray(datalist)||Util.isEmptyArray(changes)||Util.isEmptyArray(befores)||Util.isEmptyObj(this.uniqueMap)){return false
}if(datalist.length!==changes.length||datalist.length!==befores.length){return this.grid.error("LENGTH_NOT_EQUAL")}var key,umap=this.uniqueMap,changed=[],res;for(key in umap){if(umap.hasOwnProperty(key)){res=this.updateUniqueIndices(umap[key],key,datalist,changes,befores);
if(res instanceof Error){var i=0,len=changed.length;for(;i<len;i++){this.updateUniqueIndices(umap[changed[i]],changed[i],datalist,befores,changes)}return res}if(res!==false){changed.push(key)}}}return changed.length>0};prototype.removeFromUniqueMap=function(added){if(Util.isEmptyObj(added)||Util.isEmptyObj(this.uniqueMap)){return
}var key,umap=this.uniqueMap;for(key in umap){if(umap.hasOwnProperty(key)){this.removeUniqueIndex(umap[key],key,added)}}};prototype.removeListFromUniqueMap=function(addedList){if(Util.isEmptyArray(addedList)||Util.isEmptyObj(this.uniqueMap)){return}var key,umap=this.uniqueMap;
for(key in umap){if(umap.hasOwnProperty(key)){this.removeUniqueIndices(umap[key],key,addedList)}}};prototype.addToIdMap=function(datarow){if(Util.isNull(datarow)){return false}var idKey=this.idKey;switch(this.m){case this.n.a:if(datarow.hasOwnProperty(idKey)===false){datarow[idKey]=this.l++
}case this.n.b:case this.n.c:return this.addUniqueIndex(this.a,idKey,datarow)}return false};prototype.addListToIdMap=function(datalist){if(Util.isEmptyArray(datalist)){return false}var idKey=this.idKey;switch(this.m){case this.n.a:var i=0,datarow,len=datalist.length;
for(;i<len;i++){if((datarow=datalist[i]).hasOwnProperty(idKey)===false){datarow[idKey]=this.l++}}case this.n.b:case this.n.c:return this.addUniqueIndices(this.a,idKey,datalist)}return false};prototype.updateIdMap=function(datarow,change,before){if(Util.isNullOr(datarow,before)||Util.isEmptyObj(change)){return false
}var idKey=this.idKey;switch(this.m){case this.n.a:if(change.hasOwnProperty(idKey)){return this.grid.error("NOT_MODIFIABLE",idKey)}case this.n.b:return this.updateUniqueIndex(this.a,idKey,datarow,change,before);case this.n.c:if(change.hasOwnProperty(idKey)){return this.grid.error("NOT_MODIFIABLE",idKey)
}var idKeys=this.Z.c,keylen=idKeys.length,i=0;for(;i<keylen;i++){if(change.hasOwnProperty(idKeys[i])){var newId="",oldId,j=0,res,curIdKey,val,idChange={},idBefore={};oldId=idBefore[idKey]=datarow[idKey];for(;j<keylen;j++){curIdKey=idKeys[j];if(change.hasOwnProperty(curIdKey)){if(Util.isEmptyString(val=change[curIdKey])){return this.grid.error("BAD_NULL",curIdKey)
}newId+="&"+val}else{newId+="&"+datarow[curIdKey]}}datarow[idKey]=idChange[idKey]=newId;if(oldId===newId){return false}res=this.updateUniqueIndex(this.a,idKey,datarow,idChange,idBefore);if(res instanceof Error){datarow[idKey]=oldId}return res}}break}return false
};prototype.updateListIdMap=function(datalist,changes,befores){if(Util.isEmptyArray(datalist)||Util.isEmptyArray(changes)||Util.isEmptyArray(befores)){return false}var idKey=this.idKey,len=datalist.length,i=0;switch(this.m){case this.n.a:for(;i<len;i++){if(changes[i].hasOwnProperty(idKey)){return this.grid.error("NOT_MODIFIABLE",idKey)
}}case this.n.b:return this.updateUniqueIndices(this.a,idKey,datalist,changes,befores);case this.n.c:var idMap=this.a,datarow,change,idKeys=this.Z.c,keylen=idKeys.length,newId,oldIds=[],idChange,idBefore,list=[],idChanges=[],idBefores=[],j,k,curIdKey,val,res;
for(;i<len;i++){datarow=datalist[i];change=changes[i];if(change.hasOwnProperty(idKey)){for(j=0,len=oldIds.length;j<len;j++){list[j][idKey]=oldIds[j]}return this.grid.error("NOT_MODIFIABLE",idKey)}for(j=0;j<keylen;j++){if(change.hasOwnProperty(idKeys[j])){newId="";
for(k=0;k<keylen;k++){curIdKey=idKeys[k];if(change.hasOwnProperty(curIdKey)){if(Util.isEmptyString(val=change[curIdKey])){for(j=0,len=oldIds.length;j<len;j++){list[j][idKey]=oldIds[j]}return this.grid.error("BAD_NULL",curIdKey)}newId+="&"+val}else{newId+="&"+datarow[curIdKey]
}}if(datarow[idKey]===newId){continue}list.push(datarow);idChanges.push(idChange={});idBefores.push(idBefore={});oldIds.push(idBefore[idKey]=datarow[idKey]);datarow[idKey]=idChange[idKey]=newId}}}if(list.length===0){return false}res=this.updateUniqueIndices(idMap,idKey,list,idChanges,idBefores);
if(res instanceof Error){for(j=0,len=oldIds.length;j<len;j++){list[j][idKey]=oldIds[j]}}return res}return false};prototype.removeFromIdMap=function(datarow){var idKey=this.idKey,idMap=this.a,val;if(Util.isNotNull(datarow)&&datarow.hasOwnProperty(idKey)&&(idMap.hasOwnProperty((val=datarow[idKey])))){delete idMap[val]
}};prototype.removeListFromIdMap=function(datalist){if(Util.isEmptyArray(datalist)){return}var idKey=this.idKey,datalen=datalist.length,idMap=this.a,val,datarow,i=0;for(;i<datalen;i++){datarow=datalist[i];if(datarow.hasOwnProperty(idKey)&&(idMap.hasOwnProperty((val=datarow[idKey])))){delete idMap[val]
}}};prototype.fillTemp=function(datarow,args){if(Util.isNull(datarow)){return}var colDefs=this.grid.colDefMgr.getAll(),clen=colDefs.length,key,isNew=args!==undefined&&args.isNew,colDef,i=0;if(isNew){for(;i<clen;i++){colDef=colDefs[i];key=colDef.key;if(colDef.nullOnCreate&&Util.isNull(datarow[key])){datarow[key]="J@H"+this.l++
}}}};prototype.fillTempList=function(datalist,args){if(Util.isEmptyArray(datalist)){return}var colDefs=this.grid.colDefMgr.getAll(),clen=colDefs.length,len=datalist.length,key,isNew=args!==undefined&&args.isNew,colDef,i=0,j;if(isNew){for(;i<clen;i++){colDef=colDefs[i];
key=colDef.key;if(colDef.nullOnCreate){for(j=0;len;j++){datalist[j][key]="J@H"+this.l++}}}}};prototype.query=function(query){if(typeof query!=="string"){return}query=$.trim(query);if(query.length===0){return}var lquery,opIndex,op,stmt,whereIndex,hasWhere,where;
lquery=query.toLowerCase();opIndex=query.indexOf(" ");if(opIndex===-1){return}op=lquery.substring(0,opIndex);whereIndex=lquery.indexOf(" where ");hasWhere=whereIndex>-1;stmt=$.trim(hasWhere?query.substring(opIndex+1,whereIndex):query.substring(opIndex+1));if(stmt.length===0){return
}if(hasWhere){where=$.trim(query.substring(whereIndex+7))}switch(op){case"select":return this.executeSelect(stmt,where);case"insert":return this.executeInsert(stmt,where);case"update":return this.executeUpdate(stmt,where);case"delete":return this.executeDelete(stmt,where)
}};prototype.parseWhere=function(where){if(typeof where!=="string"){return}where=$.trim(where);if(where.length===0){return}};prototype.executeSelect=function(select,condition){var temp=Util.split(select,/[\s,]+/),len=temp.length,i=0,attr={},list=this.all,res=[],all=false;
if(len===0){return res}for(;i<len;i++){if(temp[i]==="*"){all=true;break}attr[temp[i]]=true}i=0;len=list.length;for(;i<len;i++){res.push(Util.clone(list[i],attr))}return res};prototype.parse=function(datarow,args){if(Util.isNull(datarow)){return false}var colDefs=this.grid.colDefMgr.getAll(),clen=colDefs.length,parser,key,isNew=args!==undefined&&args.isNew,colDef,i=0;
for(;i<clen;i++){colDef=colDefs[i];if(isNew&&colDef.nullOnCreate){continue}if(Util.isFunction(parser=colDef.parser)){key=colDef.key;if(datarow.hasOwnProperty(key)){try{datarow[key]=parser(datarow[key],datarow)}catch(e){if(Util.isNull(datarow)){return this.grid.error("PARSE_ERROR",datarow,key)
}else{return this.grid.error("PARSE_ERROR",datarow[key],key)}}}}}return true};prototype.parseList=function(list,args){if(Util.isNull(list)){return false}if(list.length===0){return true}var colDefs=this.grid.colDefMgr.getAll(),clen=colDefs.length,len=list.length,parser,key,i=0,j,isNew=args!==undefined&&args.isNew,colDef,datarow;
for(;i<clen;i++){colDef=colDefs[i];if(isNew&&colDef.nullOnCreate){continue}if(Util.isFunction(parser=colDef.parser)){key=colDef.key;try{for(j=0;j<len;j++){datarow=list[j];if(datarow.hasOwnProperty(key)){datarow[key]=parser(datarow[key],datarow)}}}catch(e){if(Util.isNull(datarow)){return this.grid.error("PARSE_ERROR",datarow,key)
}else{return this.grid.error("PARSE_ERROR",datarow[key],key)}}}}return true};prototype.validate=function(datarow,args){if(Util.isNull(datarow)){return false}var colDefs=this.grid.colDefMgr.getAll(),clen=colDefs.length,validator,colDef,key,isnull,emptystr,val,stringval,test,isNew=args!==undefined&&args.isNew,i=0;
for(;i<clen;i++){colDef=colDefs[i];key=colDef.key;val=undefined;isnull=false;emptystr=false;if(isNew&&colDef.nullOnCreate){continue}if(colDef.notNull===true){if(datarow.hasOwnProperty(key)===false||Util.isEmptyString(val=datarow[key])){return this.grid.error("BAD_NULL",key)
}stringval=val.toString()}else{if(datarow.hasOwnProperty(key)===false||Util.isNull(val=datarow[key])){isnull=true;emptystr=true}else{if(val===""){emptystr=true}}if(isnull===false){stringval=val.toString()}else{stringval=""}}if(isnull===false){if(Util.isNotNull(test=colDef.max)){if(emptystr===false&&val>test){return this.grid.error("BIGGER_THAN",val,key,test)
}}if(Util.isNotNull(test=colDef.min)){if(emptystr===false&&val<test){return this.grid.error("SMALLER_THAN",val,key,test)}}if(Util.isNotNull(test=colDef.length)){if(emptystr===true||stringval.length!==test){return this.grid.error("WRONG_LENGTH",stringval,test,key)
}}else{if(Util.isNotNull(test=colDef.maxlength)){if(emptystr===false&&stringval.length>test){return this.grid.error("DATA_TOO_LONG",stringval,key,test)}}if(Util.isNotNull(test=colDef.minlength)){if(emptystr===true||stringval.length<test){return this.grid.error("DATA_TOO_SHORT",stringval,key,test)
}}}}if(Util.isFunction(validator=colDef.validator)){try{if(validator(val,datarow,stringval,isnull,emptystr)!==true){return this.grid.error("WRONG_VALUE",stringval,key)}}catch(e){return this.grid.error("WRONG_VALUE",stringval,key)}}}return true};prototype.validateList=function(list,args){if(Util.isNull(list)){return false
}if(list.length===0){return true}var colDefs=this.grid.colDefMgr.getAll(),clen=colDefs.length,len=list.length,validator,colDef,key,i=0,j,nulls,emptystrs,val,test,isNew=args!==undefined&&args.isNew,vals=[],stringvals=[];for(;i<clen;i++){colDef=colDefs[i];key=colDef.key;
nulls={};emptystrs={};vals.length=0;stringvals.length=0;if(isNew&&colDef.nullOnCreate){continue}if(colDef.notNull===true){for(j=0;j<len;j++){if(list[j].hasOwnProperty(key)===false||Util.isEmptyString(val=list[j][key])){return this.grid.error("BAD_NULL",key)
}vals.push(val);stringvals.push(val.toString())}}else{for(j=0;j<len;j++){val=undefined;if(list[j].hasOwnProperty(key)===false||Util.isNull(val=list[j][key])){nulls[j]=true;emptystrs[j]=true}else{if(val===""){emptystrs[j]=true}}vals.push(val);if(nulls.hasOwnProperty(j)){stringvals.push("")
}else{stringvals.push(val.toString())}}}if(Util.isNotNull(test=colDef.max)){for(j=0;j<len;j++){if(emptystrs.hasOwnProperty(j)===false&&vals[j]>test){return this.grid.error("BIGGER_THAN",vals[j],key,test)}}}if(Util.isNotNull(test=colDef.min)){for(j=0;j<len;j++){if(emptystrs.hasOwnProperty(j)===false&&vals[j]<test){return this.grid.error("SMALLER_THAN",vals[j],key,test)
}}}if(Util.isNotNull(test=colDef.length)){for(j=0;j<len;j++){if(nulls.hasOwnProperty(j)===false&&(emptystrs.hasOwnProperty(j)||stringvals[j].length!==test)){return this.grid.error("WRONG_LENGTH",stringvals[j],test,key)}}}else{if(Util.isNotNull(test=colDef.maxlength)){for(j=0;
j<len;j++){if(emptystrs.hasOwnProperty(j)===false&&stringvals[j].length>test){return this.grid.error("DATA_TOO_LONG",stringvals[j],key,test)}}}if(Util.isNotNull(test=colDef.minlength)){for(j=0;j<len;j++){if(nulls.hasOwnProperty(j)===false&&(emptystrs.hasOwnProperty(j)||stringvals[j].length<test)){return this.grid.error("DATA_TOO_SHORT",stringvals[j],key,test)
}}}}if(Util.isFunction(validator=colDef.validator)){try{for(j=0;j<len;j++){if(validator(vals[j],list[j],stringvals[j],nulls.hasOwnProperty(j),emptystrs.hasOwnProperty(j))!==true){return this.grid.error("WRONG_VALUE",stringvals[j],key)}}}catch(e){return this.grid.error("WRONG_VALUE",stringvals[j],key)
}}}return true};prototype.makeCompositeKey=function(datarow,update){if(this.m!==this.n.c||Util.isNull(datarow)){return}if(update===true||datarow.hasOwnProperty(this.idKey)===false){var idColKeys=this.Z.c,keylen=idColKeys.length,i=0,id="";for(;i<keylen;i++){id+="&"+datarow[idColKeys[i]]
}datarow[this.idKey]=id}};prototype.makeCompositeKeyList=function(datalist,update){if(this.m!==this.n.c||datalist.length===0){return}var idKey=this.idKey,datalen=datalist.length,idColKeys=this.Z.c,keylen=idColKeys.length,data,i=0,j,id;if(update===true){for(;
i<datalen;i++){data=datalist[i];id="";j=0;for(;j<keylen;j++){id+="&"+data[idColKeys[j]]}data[idKey]=id}}else{for(;i<datalen;i++){if((data=datalist[i]).hasOwnProperty(idKey)===false){id="";j=0;for(;j<keylen;j++){id+="&"+data[idColKeys[j]]}data[idKey]=id}}}};
prototype.map=function(datarow){if(Util.isNull(datarow)){return}var idMap=this.a,idKey=this.idKey,id;this.makeCompositeKey(datarow);if(datarow.hasOwnProperty(idKey)&&idMap.hasOwnProperty(id=datarow[idKey])){return idMap[id]}};prototype.mapList=function(list){if(Util.isEmptyArray(list)){return{mapped:[],unmapped:[]}
}this.makeCompositeKeyList(list);var mapped=[],unmapped=[],idKey=this.idKey,idMap=this.a,len=list.length,i=0,datarow,id;for(;i<len;i++){if((datarow=list[i]).hasOwnProperty(idKey)&&idMap.hasOwnProperty(id=datarow[idKey])){mapped.push(idMap[id])}else{unmapped.push(datarow)
}}return{mapped:mapped,unmapped:unmapped}};prototype.getById=function(id){if(Util.isNotNull(id)&&this.a.hasOwnProperty(id)){return this.a[id]}};prototype.getByIdx=function(i){if(Util.isNotNull(i)&&this.datalist.hasOwnProperty(i)){return this.datalist[i]}};prototype.getByNode=function(node){return this.getById(this.getIdByNode(node))
};prototype.getIdx=function(datarow){return this.getIdxById(this.getId(datarow))};prototype.getIdxById=function(id){if(Util.isNotNull(id)&&this.b.hasOwnProperty(id)){return this.b[id]}return -1};prototype.getIdxByNode=function(node){return this.getIdxById(this.getIdByNode(node))
};prototype.getId=function(datarow){if(Util.isNotNull(datarow)&&datarow.hasOwnProperty(this.idKey)){return datarow[this.idKey]}};prototype.getIdByIdx=function(i){return this.getId(this.getByIdx(i))};prototype.getIdByNode=function(node){if(Util.isNotNull(node)){return node.getAttribute("i")
}};prototype.f=function(from){if(Util.isNull(from)){from=0}var datalist=this.datalist,datalen=datalist.length,idKey=this.idKey,idxMap=this.b,i=from;for(;i<datalen;i++){idxMap[datalist[i][idKey]]=i}};prototype.g=function(from){this.b={};this.f()};prototype.has=function(datarow){return this.hasById(this.getId(datarow))
};prototype.hasById=function(id){if(Util.isNotNull(id)){return this.b.hasOwnProperty(id)}return false};prototype.contains=function(datarow){return this.containsById(this.getId(datarow))};prototype.containsById=function(id){if(Util.isNotNull(id)){return this.a.hasOwnProperty(id)
}return false};prototype.set=function(datalist){if(this.all===datalist||(Util.isEmptyArray(datalist)&&this.all===0)){return false}this.grid.event.trigger("onBeforeDataChange");this.grid.event.trigger("onBeforeSetDatalist",[this.all,datalist]);this.cleanList(this.all);
var key,umap=this.uniqueMap;for(key in umap){if(umap.hasOwnProperty(key)){umap[key]={}}}this.a={};this.all=[];this.e.length=0;this.q.length=0;if(Util.isNull(datalist)){datalist=[]}var res;if((res=this.parseList(datalist)) instanceof Error){return res}if((res=this.validateList(datalist)) instanceof Error){return res
}if((res=this.addListToUniqueMap(datalist)) instanceof Error){return res}this.makeCompositeKeyList(datalist,true);if((res=this.addListToIdMap(datalist)) instanceof Error){return res}this.all=datalist;this.grid.event.trigger("onAfterSetDatalist",[datalist]);
this.grid.event.trigger("onDataChange");this.refresh();return true};prototype.add=function(datarow,args){if(Util.isNull(datarow)||Util.isNotNull(this.map(datarow))){return false}this.grid.event.trigger("onBeforeDataChange");this.fillTemp(datarow,args);var res;
if((res=this.parse(datarow,args)) instanceof Error){return res}if((res=this.validate(datarow,args)) instanceof Error){return res}if((res=this.addToUniqueMap(datarow)) instanceof Error){return res}if((res=this.addToIdMap(datarow)) instanceof Error){return res
}this.all.push(datarow);if(Util.isNull(args)||args.undo!==true){this.e.push({a:this.n.e,b:datarow});this.q.length=0}this.grid.event.trigger("onAddDatarow",[datarow,args]);this.grid.event.trigger("onDataChange");if(args===undefined||args.noRefresh!==true){this.refresh(args)
}return true};prototype.addList=function(datalist,args){if(Util.isEmptyArray(datalist)){return false}var toAdd=this.mapList(datalist).unmapped;if(toAdd.length===0){return false}this.grid.event.trigger("onBeforeDataChange");this.fillTempList(datalist,args);var res;
if((res=this.parseList(toAdd,args)) instanceof Error){return res}if((res=this.validateList(toAdd,args)) instanceof Error){return res}if((res=this.addListToUniqueMap(toAdd)) instanceof Error){return res}if((res=this.addListToIdMap(toAdd)) instanceof Error){return res
}this.all.pushList(toAdd);if(Util.isNull(args)||args.undo!==true){this.e.push({a:this.n.f,b:toAdd});this.q.length=0}this.grid.event.trigger("onAddDatalist",[toAdd,args]);this.grid.event.trigger("onDataChange");if(args===undefined||args.noRefresh!==true){this.refresh(args)
}return true};prototype.updateByKey=function(datarow,key,value,args){var change={};change[key]=value;return this.update(datarow,change,args)};prototype.update=function(datarow,change,args){if(Util.isNullOr(datarow,change)){return false}this.grid.event.trigger("onBeforeDataChange");
this.grid.event.trigger("onBeforeUpdateDatarow",[datarow,change]);var before={},i;for(i in change){if(change.hasOwnProperty(i)){if(datarow[i]===change[i]){delete change[i]}else{before[i]=datarow[i];datarow[i]=change[i]}}}if(Util.isEmptyObj(before)){return false
}var res;if((res=this.parse(datarow,args)) instanceof Error){this.o(datarow,before);return res}if((res=this.validate(datarow,args)) instanceof Error){this.o(datarow,before);return res}if((res=this.updateUniqueMap(datarow,change,before)) instanceof Error){this.o(datarow,before);
return res}if((res=this.updateIdMap(datarow,change,before)) instanceof Error){this.o(datarow,before);return res}if(res!==false){this.grid.event.trigger("onIdChange",[datarow,res,datarow[this.idKey]])}if(Util.isNull(args)||args.undo!==true){this.e.push({a:this.n.g,b:datarow,c:before,d:change});
this.q.length=0}this.grid.event.trigger("onUpdateDatarow",[datarow,change,before,args]);this.grid.event.trigger("onDataChange");if(args===undefined||args.noRefresh!==true){this.refresh(args)}return true};prototype.updateList=function(list,args){if(Util.isEmptyArray(list)){return false
}this.grid.event.trigger("onBeforeDataChange");this.grid.event.trigger("onBeforeUpdateDatalist",[list]);var datalist=[],befores=[],changes=[],datarow,before,change,listlen=list.length,i=0,key;for(;i<listlen;i++){before={};datarow=list[i].datarow;change=list[i].change;
for(key in change){if(change.hasOwnProperty(key)){if(datarow[key]===change[key]){delete change[key]}else{before[key]=datarow[key];datarow[key]=change[key]}}}if(Util.isNotEmptyObj(before)){datalist.push(datarow);befores.push(before);changes.push(change)}}if(datalist.length===0){return false
}var res;if((res=this.parseList(datalist,args)) instanceof Error){this.p(datalist,befores);return res}if((res=this.validateList(datalist,args)) instanceof Error){this.p(datalist,befores);return res}if((res=this.updateListUniqueMap(datalist,changes,befores)) instanceof Error){this.p(datalist,befores);
return res}if((res=this.updateListIdMap(datalist,changes,befores)) instanceof Error){this.p(datalist,befores);return res}if(res!==false){this.grid.event.trigger("onIdListChange",[res.list,res.befores,this.idKey])}if(Util.isNull(args)||args.undo!==true){this.e.push({a:this.n.h,b:datalist,c:befores,d:changes});
this.q.length=0}this.grid.event.trigger("onUpdateDatalist",[datalist,changes,befores,args]);this.grid.event.trigger("onDataChange");if(args===undefined||args.noRefresh!==true){this.refresh(args)}return true};prototype.o=function(datarow,before){var i;for(i in before){if(before.hasOwnProperty(i)){datarow[i]=before[i]
}}};prototype.p=function(datalist,befores){var len=datalist.length,i=0,datarow,before,j;for(;i<len;i++){datarow=datalist[i];before=befores[i];for(j in before){if(before.hasOwnProperty(j)){datarow[j]=before[j]}}}};prototype.remove=function(datarow,args){if(Util.isNull(datarow)){return false
}var mapped=this.map(datarow);if(Util.isNull(mapped)){return false}this.grid.event.trigger("onBeforeDataChange");this.removeFromIdMap(mapped);this.removeFromUniqueMap(mapped);this.all.remove(mapped);this.removeId(mapped);if(Util.isNull(args)||args.undo!==true){this.e.push({a:this.n.i,b:mapped});
this.q.length=0}this.grid.event.trigger("onRemoveDatarow",[mapped,args]);this.grid.event.trigger("onDataChange");if(args===undefined||args.noRefresh!==true){this.refresh(args)}return true};prototype.removeList=function(datalist,args){if(Util.isEmptyArray(datalist)){return false
}var map=this.mapList(datalist),mapped=map.mapped;if(mapped.length===0){return false}this.grid.event.trigger("onBeforeDataChange");this.removeListFromIdMap(mapped);this.removeListFromUniqueMap(mapped);this.all.removeList(mapped);this.cleanList(mapped);if(Util.isNull(args)||args.undo!==true){this.e.push({a:this.n.j,b:mapped});
this.q.length=0}this.grid.event.trigger("onRemoveDatalist",[mapped,args]);this.grid.event.trigger("onDataChange");if(args===undefined||args.noRefresh!==true){this.refresh(args)}return true};prototype.ba=function(e){if(e.ctrlKey){switch(e.which){case"Z".charCodeAt(0):this.undo();
break;case"Y".charCodeAt(0):this.redo();break}}};prototype.undo=function(){if(this.e.length===0){return false}var hist=this.e.pop();this.q.push(hist);var tar=hist.b,bef=hist.c;switch(hist.a){case this.n.e:return this.remove(tar,{undo:true});case this.n.f:return this.removeList(tar,{undo:true});
case this.n.g:return this.update(tar,bef,{undo:true});case this.n.h:var list=[],i=0,len=tar.length;for(;i<len;i++){list.push({datarow:tar[i],change:bef[i]})}return this.updateList(list,{undo:true});case this.n.i:return this.add(tar,{undo:true});case this.n.j:return this.addList(tar,{undo:true})
}};prototype.redo=function(){if(this.q.length===0){return false}var hist=this.q.pop();this.e.push(hist);var tar=hist.b;var cha=hist.d;switch(hist.a){case this.n.e:return this.add(tar,{undo:true});case this.n.f:return this.addList(tar,{undo:true});case this.n.g:return this.update(tar,cha,{undo:true});
case this.n.h:var list=[],i=0,len=tar.length;for(;i<len;i++){list.push({datarow:tar[i],change:cha[i]})}return this.updateList(list,{undo:true});case this.n.i:return this.remove(tar,{undo:true});case this.n.j:return this.removeList(tar,{undo:true})}};prototype.equals=function(a,b){if(Util.isNullOr(a,b)){return false
}if(a===b){return true}if(this.m===this.n.c){this.makeCompositeKey(a);this.makeCompositeKey(b)}var idKey=this.idKey;if(Util.isNull(a[idKey])||Util.isNull(b[idKey])){return false}return a[idKey]===b[idKey]};prototype.getReal=function(){var notReal=this.n.d;return this.all.filter(function(datarow){return datarow.hasOwnProperty(notReal)===false
})};prototype.filterReal=function(list){var notReal=this.n.d;return list.filter(function(datarow){return datarow.hasOwnProperty(notReal)===false})};prototype.isReal=function(datarow){return Util.isNotNull(datarow)&&datarow.hasOwnProperty(this.n.d)===false};
prototype.dropNonReal=function(datalist){if(Util.isEmptyArray(datalist)){return}var notReal=this.n.d,len=datalist.length,i=len-1;for(;i>=0;i--){if(datalist[i].hasOwnProperty(notReal)){delete datalist[i][notReal];datalist.removeAt(i)}}};prototype.removeIdCol=function(datalist){if(this.m===this.n.b||Util.isEmptyArray(datalist)){return
}var idKey=this.idKey,i=0,len=datalist.length;for(;i<len;i++){if(datalist[i].hasOwnProperty(idKey)){delete datalist[i][idKey]}}};prototype.removeId=function(datarow){if(Util.isNotNull(datarow)&&this.m!==this.n.b&&datarow.hasOwnProperty(this.idKey)){delete datarow[this.idKey]
}};prototype.cleanList=function(datalist){if(!Util.isEmptyArray(datalist)){this.removeIdCol(datalist);this.dropNonReal(datalist)}};prototype.purify=function(datalist){if(datalist!==undefined){datalist=this.all}if(Util.isEmptyArray(datalist)){return[]}var list=[],len=datalist.length,i=0,j,data,clone,notReal=this.n.d;
for(;i<len;i++){if((data=datalist[i]).hasOwnProperty(notReal)===false){list.push(clone={});for(j in data){if(data.hasOwnProperty(j)){if(data.hasOwnProperty(j)&&j.substring(0,3)!=="J@I"){clone[j]=data[j]}}}}}return list};prototype.setSorter=function(sorter){this.grid.event.trigger("onChangeSorter",[this.h,sorter]);
this.h=sorter};prototype.i=function(sorter){if(Util.isNull(sorter)){sorter=this.h}else{this.setSorter(sorter)}if(Util.isNull(sorter)){return}var datalist=this.all;this.grid.event.trigger("onBeforeSort",[datalist]);if(Util.isNotNull(sorter.comparator)){datalist.sort(sorter.comparator);
if(sorter.desc){datalist.reverse()}}else{if(Util.isNotNull(sorter.lexi)){this.constructor.a(datalist,sorter.lexi,sorter.desc)}}this.grid.event.trigger("onAfterSort",[datalist])};prototype.addFilter=function(filter){this.r.push(filter);this.refresh()};prototype.removeFilter=function(filter){var len=this.r.length;
this.r.remove(filter);if(len!==this.r.length){this.refresh()}};prototype.j=function(){var datalist=this.datalist,failed=this.failed,i=0,filters=this.r,flen=filters.length,filter,j;this.grid.event.trigger("onBeforeFilter",[datalist,failed]);datalist.length=0;
datalist.pushList(this.all);failed.length=0;for(;i<flen;i++){filter=this.r[i];for(j=datalist.length-1;j>=0;j--){if(!filter(datalist[j])){failed.push(datalist[j]);datalist.removeAt(j)}}}this.grid.event.trigger("onFilter",[datalist,failed]);this.grid.event.trigger("onAfterFilter",[datalist,failed])
};prototype.k=function(args){this.g();this.grid.event.trigger("onAfterRefresh",[args])};prototype.refresh=function(args){this.grid.event.trigger("onBeforeRefresh");if(args===undefined){this.i()}else{if(args.noSort!==true){this.i(args.sorter)}}if(args===undefined||args.noFilter!==true){this.j()
}this.k(args)};prototype.exportRowToArray=function(index,keys){if(!(index in this.datalist)){return null}if(!keys){keys=this.grid.colDefMgr.getKeys()}var datarow=this.datalist[index],array=[],key,i=0,l=keys.length;for(;i<l;i++){key=keys[i];array.push((key in datarow)?datarow[key]:null)
}return array};prototype.exportToArray=function(keys,from,to){if(!keys){keys=this.grid.colDefMgr.getKeys()}var datalist=this.datalist.slice(from,to),array,arr=[],datarow,key,j=0,jl=datalist.length,i,l=keys.length;for(;j<jl;j++){datarow=datalist[j];for(i=0,array=[];
i<l;i++){key=keys[i];array.push((key in datarow)?datarow[key]:null)}arr.push(array)}return arr};DataManager.a=function(datalist,key,desc){var oldToString=Object.prototype.toString;Object.prototype.toString=Util.isFunction(key)?key:function(){return this[key]
};datalist.sort();Object.prototype.toString=oldToString;if(desc){datalist.reverse()}};JGM.b("DataManager",DataManager)}());(function(){function EditManager(args){this.mid=args.mid;this.grid=args.grid;this.grid.editMgr=this;var options={a:"jgrid-edit",b:"jgrid-editable",c:"jgrid-notEditable",d:false,e:false,f:"#FFF",g:"#F6F6F6",h:false,i:true,j:this.grid.Z.g+"editable-small.png",k:"edit-icon",l:12,m:3,n:"#FFF9D7",classSuccess:"edit-success",successBackground:"#cdf7b6",classFailure:"edit-failure",failureBackground:"#ffcec5"};
this.Z=JGM.e(options,args.options,{classEdit:"a",classCellEditable:"b",classCellNotEditable:"c",editableBgEnabled:"d",notEditableBgEnabled:"e",editableBg:"f",notEditableBg:"g",deleteEnabled:"h",editIconEnabled:"i",urlEditIcon:"j",classEditIcon:"k",editIconWidth:"l",editIconPadding:"m",basicBackground:"n"});
this.editor;this.c=Util.which(["number","alphabet","del","backspace"]);this.beingCommitted;this.Y()}EditManager.X=function(args){return new EditManager(args)};var prototype=EditManager.prototype;prototype.Y=function(){this.bindEvents()};prototype.bindEvents=function(){var events={onGetColCellClass:this.f,keydownCanvas:this.ba,onDestroy:this.aA,dblclickCanvas:this.bi,onCreateDynamicCss:this.onCreateDynamicCss,"onBeforeNavigate onBeforeRefresh onBeforeSelect":this.commit,onBeforeFocusCanvas:this.notActive};
if(Util.isNull(this.grid.selMgr)){events.onCreateCss=this.d}else{events.onBeforeCreateSelCss=this.d}if(this.Z.h){events["keydownSel_"+Util.keyMapKeydown.del]=this.i}if(this.Z.i){var colDefs=this.grid.colDefMgr.get(),len=colDefs.length,i=0;for(;i<len;i++){if(Util.isNotNull(colDefs[i].editor)){events["onRenderHeader_"+colDefs[i].key+"_prepend"]=this.__onRenderHeader_aH__
}}}this.grid.event.bind(events,this)};prototype.aA=function(){this.g();JGM.q(this,{name:"EditManager",path:"editMgr",map:"c Z"})};prototype.d=function(){var gridId="#"+this.grid.mid+" .",o=this.Z,rules=[],height=this.grid.view.AO();rules.push(this.grid.view.AG()+"."+o.a+"{background:"+o.n+"}");
rules.push(gridId+o.a+" input{position:absolute;z-index:10;top:0;padding:0;border:0;margin:0;background:"+o.n+";height:"+height+"px;line-height:"+height+"px}");if(o.d){rules.push(gridId+o.b+"{background:"+o.f+"}")}if(o.e){rules.push(gridId+o.c+"{background:"+o.g+"}")
}if(o.i){rules.push(gridId+o.k+"{float:left;position:absolute;left:0;top:0;padding:0 "+o.m+"px;width:"+o.l+"px;height:"+height+"px;background:url("+o.j+") no-repeat center transparent}")}rules.push(gridId+o.classSuccess+"{background:"+o.successBackground+"}");
rules.push(gridId+o.classFailure+"{background:"+o.failureBackground+"}");return rules.join("")};prototype.onCreateDynamicCss=function(){var cellSel=this.grid.view.AG(),padding=this.grid.view.AM(),colDefs=this.grid.colDefMgr.get(),i=0,str="";for(;i<colDefs.length;
i++){if(Util.isNotNull(colDefs[i].editor)){str+=cellSel+".k_"+colDefs[i].key+" .basic-editor{width:"+(colDefs[i].width-2*padding)+"px}"}}return str};prototype.__onRenderHeader_aH__=function(html){html.push("<span class='"+this.Z.k+"'></span>")};prototype.aH=function(rowIdx,colIdx,datarow,colDef,cellHtml){if(this.grid.dataMgr.isReal(datarow)){cellHtml.push("<span class='"+this.Z.k+"' title='클릭하여 에디팅을 시작합니다' onclick='JGM.m.EditManager."+this.mid+'.beginEdit("'+datarow[this.grid.dataMgr.idKey]+'","'+colDef.key+"\")'></span>")
}};prototype.cancelMouseEvent=function(e){return !Util.hasTagAndClass(e.target,"DIV",this.Z.k)};prototype.beginEdit=function(id,key){this.begin(JGM.create("Cell",{grid:this.grid,datarow:this.grid.dataMgr.getById(id),colDef:this.grid.colDefMgr.getByKey(key)}))
};prototype.bi=function(e,cell){if(!cell.isEdited()){this.begin(cell)}};prototype.ba=function(e){if(this.active()){if(e.which===Util.keyMapKeydown.esc){this.cancel()}}else{if(e.ctrlKey){return}else{if(!e.altKey&&Util.isNotNull(this.grid.selMgr)){if(e.which===Util.keyMapKeydown.del&&this.Z.h){this.h(this.grid.selMgr.getCell())
}else{if(this.c[e.which]){this.begin(this.grid.selMgr.getCell())}else{if(e.which===Util.keyMapKeydown.f2){e.preventDefault();this.begin(this.grid.selMgr.getCell())}}}}}}};prototype.active=function(){return Util.isNotNull(this.editor)};prototype.notActive=function(){return Util.isNull(this.editor)
};prototype.e=function(cell){return this.active()&&this.editor.cell.equals(cell)};prototype.f=function(colDef){if(Util.isNotNull(colDef.editor)){return this.Z.b}else{return this.Z.c}};JGM.Cell.prototype.isEdited=function(){return this.grid.editMgr.e(this)};
JGM.Cell.prototype.setValue=function(value){var datarow=this.getDatarow(),key=this.getKey(),res;if(Util.isNotNullAnd(datarow,key)){res=this.grid.dataMgr.updateByKey(datarow,key,value,{noSort:true,noFilter:true,noRerender:true});if(res===true){this.grid.view.rerenderRow(datarow)
}}return res};prototype.isEditable=function(cell){return Util.isNotNull(cell)&&Util.isNotNull(cell.getColDef().editor)&&this.grid.dataMgr.isReal(cell.getDatarow())};prototype.begin=function(cell){if(this.active()){this.commit()}if(!this.isEditable(cell)){return
}this.editor=cell.getColDef().editor;this.editor.cell=cell;this.editor.grid=this.grid;var node=cell.getNode();this.editor.before=node.innerHTML;node.innerHTML=this.editor.edit(cell.getValue());cell.get$().addClass(this.Z.a);this.editor.focus()};prototype.cancel=function(){if(!this.active()){return
}var cell=this.editor.cell;cell.getNode().innerHTML=this.editor.before;this.g();cell.get$().removeClass(this.Z.a);this.grid.view.focus()};prototype.g=function(){if(Util.isNotNull(this.editor)){delete this.editor.grid;delete this.editor.cell;delete this.editor.before;
delete this.editor}};prototype.commit=function(){if(this.beingCommitted||!this.active()){return}this.beingCommitted=true;var cell=this.editor.cell,value=this.editor.value(cell.getNode()),$cell;if(value==cell.getValue()){this.cancel()}else{var res=cell.setValue(value),classRes;
$cell=cell.get$();if(res instanceof Error){this.cancel();classRes=this.Z.classFailure;$cell.addClass(classRes);setTimeout(function(){$cell.removeClass(classRes)},1000)}else{this.g();this.grid.view.focus();classRes=this.Z.classSuccess;this.grid.printMessage("Successfully Updated.");
$cell.addClass(classRes);setTimeout(function(){$cell.removeClass(classRes)},1000)}}cell.get$().removeClass(this.Z.a);this.beingCommitted=false};prototype.h=function(cell){if(this.active()||!this.isEditable(cell)){return}var colDef=cell.getColDef();if(cell.getValue()===colDef.defaultValue){return
}cell.setValue(colDef.defaultValue)};prototype.i=function(e,selectionRows,selectionCols){if(this.active()){return}var updates={},fakerows={},updatelist=[],col,colDef,defaultValue,key,cell,datarow,selCol,row;col_loop:for(col in selectionCols){if(!selectionCols.hasOwnProperty(col)||col==="length"){continue
}colDef=undefined;defaultValue=undefined;key=undefined;selCol=selectionCols[col];row_loop:for(row in selCol){if(!selCol.hasOwnProperty(row)||row==="length"||fakerows.hasOwnProperty(row)){continue}cell=selCol[row].cell;if(Util.isNull(colDef)){colDef=cell.getColDef();
defaultValue=colDef.defaultValue;key=colDef.key;if(Util.isNull(colDef.editor)){continue col_loop}}if(Util.isNotNull(updates[row])){datarow=updates[row].datarow}else{datarow=cell.getDatarow()}if(!this.grid.dataMgr.isReal(datarow)){fakerows[row]=true;continue
}if(defaultValue===datarow[key]){continue}if(Util.isNull(updates[row])){updates[row]={datarow:datarow,change:{}};updatelist.push(updates[row])}updates[row].change[key]=defaultValue}}if(updatelist.length!==0){this.grid.dataMgr.updateList(updatelist)}};function Editor(args){var i;
for(i in args){if(args.hasOwnProperty(i)){this[i]=args[i]}}}Editor.X=function(args){return new Editor(args)};prototype=Editor.prototype;prototype.edit=function(value){return"<input type='text' class='basic-editor' value='"+Util.ifNull(value,"")+"' style='position:relative'/>"
};prototype.focus=function(){var node=this.cell.getNode().childNodes[0];if(Util.isFunction(node.setActive)){try{node.setActive()}catch(e){}}node.focus();if(document.activeElement!==node){this.cell.get$().children(":eq(0)").focus()}};prototype.value=function(wrapperNode){return wrapperNode.childNodes[0].value
};prototype.path=function(){return"JGM.m.Editor."+this.mid};Editor.numberKeys=Util.which(["number","del","backspace"]);Editor.isNumberKey=function(keyCode){return this.numberKeys[keyCode]?true:false};Editor.numberEdit=function(cell){var value=cell.getValue();
return"<input type='text' class='basic-editor' onkeydown='if (!JGM.Editor.isNumberKey(event.which)) return false;' value='"+Util.ifNull(value,"")+"'/>"};Editor.floatKeys=Util.which(["number",".","del","backspace"]);Editor.isFloatKey=function(keyCode){return this.floatKeys[keyCode]?true:false
};Editor.floatEdit=function(cell){var value=cell.getValue();return"<input type='text' class='basic-editor' onkeydown='if (!JGM.Editor.isFloatKey(event.which)) return false;' value='"+Util.ifNull(value,"")+"'/>"};Editor.alphabetKeys=Util.which(["alphabet","del","backspace","space"]);
Editor.isAlphabet=function(keyCode){return this.alphabetKeys[keyCode]?true:false};Editor.alphabetEdit=function(cell){var value=cell.getValue();return"<input type='text' class='basic-editor' onkeydown='if (!JGM.Editor.isAlphabet(event.which)) return false;' value='"+Util.ifNull(value,"")+"'/>"
};JGM.b("EditManager",EditManager);JGM.b("Editor",Editor)}());(function(){function EventManager(args){this.mid=args.mid;args.grid.event=this;this.a={}}EventManager.X=function(args){return new EventManager(args)};var prototype=EventManager.prototype;prototype.destroy=function(){var i,map=this.a;
for(i in map){if(map.hasOwnProperty(i)){JGM.r(map,i)}}JGM.q(this,{name:"EventManager",path:"event",map:"a"})};prototype.register=function(events,fn,target){if(Util.isString(events)){this.b(events,fn,target)}else{if(Util.isNotNull(events.e)){this.b(events.e,events.f,events.t)
}else{var i,len=events.length,e;for(;i<len;i++){if(Util.isNotNull(e=events[i])){this.b(e.e,e.f,e.t)}}}}};prototype.bind=function(events,fn,target){if(Util.isString(events)){this.b(events,fn,target)}else{var e;for(e in events){if(events.hasOwnProperty(e)){this.b(e,events[e],fn)
}}}};prototype.b=function(events,fn,target){if(Util.isNull(target)){target=window}var arr=Util.split(events),len=arr.length,i=0;if(Util.isFunction(fn)){for(;i<len;i++){this.c(arr[i],fn,target)}}else{if(Util.isString(fn)){var fns=Util.split(fn),flen=fns.length,e,j;
for(;i<len;i++){e=arr[i];for(j=0;j<flen;j++){this.c(e,target[fns[j]],target)}}}else{var flen=fn.length,e,j;for(;i<len;i++){e=arr[i];for(j=0;j<flen;j++){this.c(e,fn[j],target)}}}}};prototype.c=function(e,fn,target){if(!this.a.hasOwnProperty(e)){this.a[e]=[]}this.a[e].push({fn:fn,target:target})
};prototype.unregister=function(event,fn){var map=this.a;if(!map.hasOwnProperty(event)){return}var hans=map[event];if(Util.isNull(fn)){hans.length=0;delete map[event];return}var i=0,len=hans.length;for(;i<len;i++){if(hans[i].fn===fn){hans.removeAt(i);if(hans.length===0){delete map[event]
}return}}};prototype.trigger=function(events,args,filter){var hans,hlen,map=this.a,rarr=[],arr=Util.split(events),len=arr.length,noarg=Util.isEmptyArray(args),filon=Util.isFunction(filter),e,i,j=0;for(;j<len;j++){e=arr[j];if(!map.hasOwnProperty(e)){continue
}hans=map[e];hlen=hans.length;if(hlen===0){continue}i=0;if(filon){var res;if(noarg){for(;i<hlen;i++){res=hans[i].fn.call(hans[i].target);if(filter(res)){rarr.push(res)}}}else{for(;i<hlen;i++){res=hans[i].fn.apply(hans[i].target,args);if(filter(res)){rarr.push(res)
}}}}else{if(noarg){for(;i<hlen;i++){rarr.push(hans[i].fn.call(hans[i].target))}}else{for(;i<hlen;i++){rarr.push(hans[i].fn.apply(hans[i].target,args))}}}}return rarr};prototype.triggerInvalid=function(events,args){return this.trigger(events,args,function(a){return a===false
}).length!==0};prototype.sendToBack=function(event,fn){var eventQueue=this.a[event],len=eventQueue.length,handler,index=-1,i=0;for(;i<len;i++){if(eventQueue[i].fn===fn){index=i;handler=eventQueue[i];break}}if(index>-1){eventQueue.removeAt(i);eventQueue.push(handler)
}};prototype.sendToFront=function(event,fn){var eventQueue=this.a[event],len=eventQueue.length,handler,index=-1,i=0;for(;i<len;i++){if(eventQueue[i].fn===fn){index=i;handler=eventQueue[i];break}}if(index>-1){eventQueue.removeAt(i);eventQueue.unshift(handler)
}};JGM.b("EventManager",EventManager)}());(function(){function Footer(args){this.mid=args.mid;this.b=args.container;this.a;this.grid=args.grid;this.grid.footer=this;var options={a:"footer-cell",b:"#F1F5FB",c:"0px solid #CCD9EA",d:"#000",e:"13px",f:"normal",g:25,h:40,i:"현재 <span name='shownCount'></span> 건 / 총 <span name='totalCount'></span> 건",j:"#5A6779",k:"12px",l:"normal",n:"#1E395B",o:"12px",p:"normal",q:"jgrid-footer",r:"footer-title",s:"footer-content",u:"",v:"",w:"",x:""};
this.Z=JGM.e(options,args.options,{classCell:"a",background:"b",border:"c",color:"d",fontSize:"e",fontWeight:"f",cellHeight:"g",cellPadding:"h",countTemplate:"i",titleColor:"j",titleFontSize:"k",titleFontWeight:"l",contentColor:"n",contentFontSize:"o",contentFontWeight:"p",classFooter:"q",classTitle:"r",classContent:"s",style:"u",cellStyle:"v",titleStyle:"w",contentStyle:"x"});
this.g={};this.Y()}Footer.X=function(args){return new Footer(args)};var prototype=Footer.prototype;prototype.Y=function(){this.a=$("<div class='"+this.Z.q+"'>").appendTo(this.b);this.getNextCell().html(this.Z.i);this.d();this.c();this.f();this.bindEvents()};
prototype.bindEvents=function(){this.grid.event.bind({onCreateCss:this.V,onDestroy:this.aA,onDataChange:[this.d,this.e],onAfterRefresh:this.c},this)};prototype.aA=function(){var i,map=this.g;for(i in map){if(map.hasOwnProperty(i)){map[i].remove()}}JGM.q(this,{name:"Footer",path:"footer","$":"a",property:"b",map:"g Z"})
};prototype.V=function(){var o=this.Z,footerSel="#"+this.grid.mid+" ."+o.q,rules=[];rules.push(footerSel+"{float:left;cursor:default;width:100%;"+JGM.g.a+"background:"+o.b+";border-top:"+o.c+";border-collapse:collapse;color:"+o.d+";font-size:"+o.e+";font-weight:"+o.f+";padding-left:8px;"+o.u+"}");
rules.push(footerSel+" ."+o.a+"{float:left;white-space:nowrap;line-height:"+o.g+"px;padding-right:"+o.h+"px;"+o.v+"}");rules.push(footerSel+" ."+o.r+"{text-align:right;color:"+o.j+";font-size:"+o.k+";font-weight:"+o.l+";"+o.w+"}");rules.push(footerSel+" ."+o.s+"{color:"+o.n+";font-size:"+o.o+";font-weight:"+o.p+";"+o.x+"}");
return rules.join("")};prototype.d=function(){this.a.find("[name=totalCount]")[0].innerHTML=this.grid.dataMgr.getReal().length};prototype.c=function(){this.a.find("[name=shownCount]")[0].innerHTML=this.grid.dataMgr.filterReal(this.grid.dataMgr.datalist).length
};prototype.f=function(){var rows=this.grid.dataMgr.getReal(),colDefs=this.grid.colDefMgr.get(),clen=colDefs.length,colDef,renderer,lower,key,name,sum,sumfn=Footer.a,map=this.g,cell,node,i=0;for(;i<clen;i++){colDef=colDefs[i];renderer=colDef.sumRenderer;if(Util.isNotNull(renderer)){key=colDef.key;
name=colDef.name;sum=sumfn(rows,key);cell=map[key]=this.getNextCell();node=cell[0];if(Util.isFunction(renderer)){node.innerHTML=renderer(name,sum)}else{if(Util.isString(renderer)){lower=renderer.toLowerCase();if(lower==="krw"||renderer==="\\"){node.innerHTML=this.h(name,Util.formatNumber(sum))
}else{if(lower==="usd"||renderer==="$"){node.innerHTML=this.h(name,Util.formatNumber(sum,2,"$ "))}}}else{node.innerHTML=this.h(name,sum)}}}}};prototype.e=function(){var rows=this.grid.dataMgr.getReal(),key,map=this.g,cmgr=this.grid.colDefMgr,colDef,renderer,lower,name,sum,sumfn=Footer.a,cell,node,content=this.Z.s;
for(key in map){if(map.hasOwnProperty(key)){colDef=cmgr.getByKey(key);name=colDef.name;renderer=colDef.sumRenderer;sum=sumfn(rows,key);cell=map[key];node=cell[0];if(Util.isFunction(renderer)){node.innerHTML=renderer(colDef.name,sum)}else{if(Util.isString(renderer)){lower=renderer.toLowerCase();
if(lower==="krw"||renderer==="\\"){cell.find("span."+content)[0].innerHTML=Util.formatNumber(sum)}else{if(lower==="usd"||renderer==="$"){cell.find("span."+content)[0].innerHTML=Util.formatNumber(sum,2,"$ ")}}}else{cell.find("span."+content)[0].innerHTML=sum
}}}}};prototype.getNextCell=function(){return $("<div class='"+this.Z.a+"'/>").appendTo(this.a)};prototype.h=function(name,sum){return"<span class='"+this.Z.r+"'>"+name+" 합계: </span><span class='"+this.Z.s+"'>"+sum+"</span>"};Footer.a=function(datalist,key){var sum=0,tmp,len=datalist.length,i=0;
for(;i<len;i++){if(typeof(tmp=datalist[i][key])==="string"){tmp=tmp.toFloat()}sum+=isNaN(tmp)?0:tmp}return sum};JGM.b("Footer",Footer)}());(function(){function MenuBar(args){this.mid=args.mid;this.b=args.container;this.a;this.grid=args.grid;this.grid.menubar=this;
var options={a:"url("+this.grid.Z.g+"menubar-bg.png) repeat-x scroll center",b:1,c:"solid #b6bac0",d:27,e:"menubar",f:"menu-icon",g:1,h:"solid transparent",i:"solid #d4d4d4",j:"solid #9a9a9a",k:2,l:"",m:"url("+this.grid.Z.g+"menu-icon-hover.png) repeat-x scroll center",n:"url("+this.grid.Z.g+"menu-icon-active.png) repeat-x scroll center",o:21,p:21,q:4,r:"solid #5f5f5f"};
this.Z=JGM.e(options,args.options,{background:"a",borderThickness:"b",border:"c",height:"d",classMenuBar:"e",classIcon:"f",iconBorderThickness:"g",iconBorder:"h",iconBorderHover:"i",iconBorderActive:"j",iconMargin:"k",iconBackground:"l",iconBackgroundHover:"m",iconBackgroundActive:"n",iconHeight:"o",iconWidth:"p",iconBorderRadius:"q",iconBorderFocus:"r"});
this.Y()}MenuBar.X=function(args){return new MenuBar(args)};var prototype=MenuBar.prototype;prototype.Y=function(){this.a=$("<div class='"+this.Z.e+"'></div>").prependTo(this.b);this.grid.event.bind({onCreateCss:this.V,onDestroy:this.aA},this)};prototype.aA=function(){JGM.q(this,{name:"MenuBar",path:"menubar","$":"a",property:"b",map:"Z"})
};prototype.V=function(){var gridId="#"+this.grid.mid+" .",o=this.Z,border=o.b+"px "+o.c,rules=[];rules.push(gridId+o.e+"{"+JGM.g.a+"overflow:hidden;width:100%;background:"+o.a+";border-bottom:"+border+";height:"+o.d+"px}");rules.push(gridId+o.f+"{float:left;height:"+o.o+"px;width:"+o.p+"px;border:"+o.g+"px "+o.h+";margin:"+o.k+"px 0 0 "+o.k+"px;background:"+o.l+";border-radius:"+o.q+"px;-moz-border-radius:"+o.q+"px}");
rules.push(gridId+o.f+":hover,"+gridId+o.f+":focus{background:"+o.m+";border:"+o.g+"px "+o.i+"}");rules.push(gridId+o.f+":active,"+gridId+o.f+".active{cursor:default;background:"+o.n+";border:"+o.g+"px "+o.j+"}");rules.push(gridId+o.f+".active:focus{border:"+o.g+"px "+o.r+"}");
return rules.join("")};prototype.addIcon=function(css,title,width,height,fn){return $("<div class='"+this.Z.f+"' tabIndex='0' title='"+title+"'><div class='"+css+"' style='margin-top:"+((this.Z.o-height)/2)+"px;margin-left:"+((this.Z.p-width)/2)+"px'></div></div>").appendTo(this.a).click(function(e){fn();
$(this).toggleClass("active");e.preventDefault()}).keydown(function(e){if(e.which===Util.keyMapKeydown.enter||e.which===Util.keyMapKeydown.space){fn();$(this).toggleClass("active");e.preventDefault()}})};JGM.b("MenuBar",MenuBar)}());(function(){if(!JGM.renderer){JGM.renderer={}
}JGM.renderer.selectBox=function(args){var mappings=args.mapping,attr=args.attr,defaultVal=args["default"],style=args.style,callback=args.callback,label,defaultIdx,val,tag,len=0,labels=[],values=[],attrStr="<select";if(attr){for(tag in attr){if(attr.hasOwnProperty(tag)){attrStr+=" "+tag+'="'+attr[tag]+'"'
}}}if(style){attrStr+=' style="';for(tag in style){if(style.hasOwnProperty(tag)){attrStr+=tag+":"+style[tag]+";"}}attrStr+='"'}attrStr+=">";for(label in mappings){if(mappings.hasOwnProperty(label)){val=mappings[label];labels.push(label);values.push(val);if(defaultVal==val){defaultIdx=len
}len++}}return function(value){var toselect,i,html=attrStr;for(i=0;i<len;i++){if(value==values[i]){toselect=i;break}}if(toselect===undefined){toselect=defaultIdx}for(i=0;i<len;i++){html+='<option value="'+values[i]+'"';if(i===toselect){html+=' selected="selected"'
}html+=">"+labels[i]+"</option>"}html+="</select>";if(callback){var args=[];args.push(html);Array.prototype.push.apply(args,arguments);html=callback.apply(this,args)}return html}}}());(function(){function SearchManager(args){this.mid=args.mid;this.b=args.container;
this.a;this.c;this.p;this.d;this.q;this.e;this.grid=args.grid;this.grid.search=this;var options={a:"#f0f0f0",b:1,c:"solid #d6d6d6",d:"1px solid #A7A7A7",e:0,f:"center",g:3,h:"99%",i:20,j:26,k:2,l:3,m:"#123272",n:"bold 12px Arial,Helvetica,sans-serif",o:5,p:"",q:"url("+this.grid.Z.g+"more-options-bg-hover.png) repeat-x scroll center",r:"url("+this.grid.Z.g+"more-options-bg-active.png) repeat-x scroll center",s:"url("+this.grid.Z.g+"more-options-bg-opened.png) repeat-x scroll center",t:1,u:"solid transparent",v:"solid #a4a4a4",w:"solid #c5c5c5",x:"solid #bfbfbf",y:9,z:2,A:this.grid.Z.g+"more-options.png",B:this.grid.Z.g+"more-options-close.png",C:2,D:"solid #93979D",E:1,F:"bold 13px Arial",G:"#282853",H:"url("+this.grid.Z.g+"tag-background.png) repeat-x scroll center",I:12,J:this.grid.Z.g+"tag-close.png",K:this.grid.Z.g+"tag-close-hover.png",L:"11px Arial",M:30,N:"search-mask",O:"search-bar",P:"more-option-name",Q:"more-options",R:"more-icon",S:"clear-tags",T:"search-tags",U:"search-tag",V:"search-tag-name",W:"search-tag-remove",X:"search-advanced",Y:"search-option-col",Z:"search-option",aa:"search-icon",ab:this.grid.Z.g+"search-icon.png",ac:15,ad:15,ae:undefined,af:this.grid.Z.g+"tag-close-active.png",ag:false};
this.Z=JGM.e(options,args.options,{background:"a",borderThickness:"b",border:"c",inputBorder:"d",inputPadding:"e",searchbarAlign:"f",searchbarMargin:"g",searchbarWidth:"h",searchbarHeight:"i",tagsHeight:"j",tagsPadding:"k",tagsBorderRadius:"l",advButtonColor:"m",advButtonFont:"n",advButtonPadding:"o",advButtonBg:"p",advButtonBgHover:"q",advButtonBgActive:"r",advButtonBgOpened:"s",advButtonBorderThickness:"t",advButtonBorder:"u",advButtonBorderHover:"v",advButtonBorderActive:"w",advButtonBorderOpened:"x",advButtonIconWidth:"y",advButtonIconMargin:"z",advButtonIconUrl:"A",advButtonIconCloseUrl:"B",tagPadding:"C",tagBorder:"D",tagBorderThickness:"E",tagFont:"F",tagColor:"G",tagBackground:"H",tagRemoveIconWidth:"I",tagRemoveIconUrl:"J",tagRemoveIconHoverUrl:"K",advFont:"L",advInputWidth:"M",classMask:"N",classSearchbar:"O",classAdvButtonName:"P",classAdvButton:"Q",classAdvButtonIcon:"R",classClearTags:"S",classTagbar:"T",classTag:"U",classTagName:"V",classRemoveTag:"W",classAdvanced:"X",classOptionCol:"Y",classOption:"Z",classSearchIcon:"aa",searchIconUrl:"ab",searchIconWidth:"ac",searchIconHeight:"ad",keyMap:"ae",tagRemoveIconActiveUrl:"af",syncMaster:"ag"});
this.f={};this.g={};this.h={};this.i={};this.r=[];this.s={};this.x;this.y={};this.Y()}var prototype=SearchManager.prototype;prototype.V=function(){var gridId="#"+this.grid.mid+" .",o=this.Z,border=o.b+"px "+o.c,tagsBorderRadius="border-radius:"+o.l+"px;-moz-border-radius:"+o.l+"px",advButtonBorder=o.t+"px "+o.u,advButtonBorderHover=o.t+"px "+o.v,advButtonBorderActive=o.t+"px "+o.w,advButtonBorderOpened=o.t+"px "+o.x,tagsInnerHeight=o.j-2*o.k,advButtonHeight=tagsInnerHeight-2*o.t,tagHeight=tagsInnerHeight-2*o.E,classMask=gridId+o.N,classSearchar=gridId+o.O,classAdvButton=gridId+o.Q,classRemoveTag=gridId+o.W,rules=[];
rules.push(classMask+"{"+JGM.g.a+"overflow:hidden;width:100%;background:"+o.a+"}");rules.push(classMask+" button{margin:0;padding:0 3px}");rules.push(classMask+" input{border:"+o.d+";padding:"+o.e+"}");rules.push(classSearchar+"{text-align:"+o.f+";border-bottom:"+border+"}");
rules.push(classSearchar+" input{width:"+o.h+";margin:"+o.g+"px 0;height:"+o.i+"px;"+tagsBorderRadius+"}");rules.push(gridId+o.T+"{cursor:default;height:"+(o.j-o.k)+"px;padding:"+o.k+"px 0 0 "+o.k+"px;border-bottom:"+border+"}");rules.push(classAdvButton+"{float:left;margin-right:"+o.k+"px;background:"+o.p+";border:"+advButtonBorder+";padding:0 "+o.o+"px;"+tagsBorderRadius+"}");
rules.push(classAdvButton+":hover{background:"+o.q+";border:"+advButtonBorderHover+"}");rules.push(classAdvButton+".opened{background:"+o.s+";border:"+advButtonBorderOpened+"}");rules.push(classAdvButton+":active{background:"+o.r+";border:"+advButtonBorderActive+"}");
rules.push(gridId+o.P+"{float:left;color:"+o.m+";font:"+o.n+";line-height:"+advButtonHeight+"px}");rules.push(gridId+o.R+"{float:left;height:"+advButtonHeight+"px;margin-left:"+o.z+"px;background:url("+o.A+") no-repeat center;width:"+o.y+"px}");rules.push(classAdvButton+".opened ."+o.R+"{background:url("+o.B+") no-repeat center}");
rules.push(gridId+o.U+"{float:left;border:"+o.E+"px "+o.D+";margin:0 "+o.k+"px "+o.k+"px 0;padding:0 "+o.C+"px;background:"+o.H+";"+tagsBorderRadius+"}");rules.push(gridId+o.V+"{float:left;color:"+o.G+";font:"+o.F+";line-height:"+tagHeight+"px}");rules.push(classRemoveTag+"{float:left;margin-left:"+o.C+"px;background:url("+o.J+") no-repeat center;width:"+o.I+"px;height:"+tagHeight+"px}");
rules.push(classRemoveTag+":hover{background:url("+o.K+") no-repeat center}");rules.push(classRemoveTag+":active{background:url("+o.af+") no-repeat center}");rules.push(gridId+o.S+"{height:"+tagsInnerHeight+"px}");rules.push(gridId+o.X+"{cursor:default;font:"+o.L+";border-bottom:"+border+"}");
rules.push(gridId+o.Y+"{display:inline-block;vertical-align:top}");rules.push(gridId+o.Y+" input{width:"+o.M+"px;margin-right:2px;"+tagsBorderRadius+"}");rules.push(gridId+o.aa+"{background:url("+o.ab+") no-repeat center;width:"+o.ac+"px;height:"+o.ad+"px}");
return rules.join("")};SearchManager.X=function(args){return new SearchManager(args)};prototype.Y=function(){var opt=this.Z,thisIns=this,mask,hasFilter,tag;mask=this.a=$("<div class='"+opt.N+"'>").prependTo(this.b);this.c=$("<div class='"+opt.O+"'><input type='text'/></div>").appendTo(mask);
this.p=this.c.children(":eq(0)").keyup(function(e){if(e.which===Util.keyMapKeydown.enter){thisIns.k($(this)[0].value)}else{if(e.which===Util.keyMapKeydown.esc){thisIns.n()}}});hasFilter=this.x=this.grid.colDefMgr.get().some(function(a){return Util.isNotNull(a.filter)
});tag=this.d=$("<div class='"+opt.T+"'>"+(hasFilter?"<div class='"+opt.Q+"'><div class='"+opt.P+"'>추가 옵션</div><div class='"+opt.R+"'></div></div>":"")+"<button type='button' class='"+opt.S+"' onclick='JGM.m.SearchManager."+this.mid+".n()'>모든 필터 제거</button></div>").appendTo(mask);
if(hasFilter){var adv=this.e=$("<div class='"+opt.X+"'>").appendTo(mask).hide().keyup(function(e){if(e.which===Util.keyMapKeydown.enter){var key=e.target.getAttribute("key");thisIns.l(key,thisIns.y[key],e.target.getAttribute("tag"),e.target.value);e.target.value=""
}});this.q=tag.children(":eq(0)").click(function(){$(this).toggleClass("opened");adv.toggle("fast")})}this.grid.event.bind({onRenderModules:this.aE,onCreateCss:this.V,onFilter:this.ar,onDestroy:this.aA,onAfterRenderModules:this.aF},this)};prototype.aE=function(){var html=[],opt=this.Z,mask=this.a;
if(this.x){var colDefs=this.grid.colDefMgr.get(),len=colDefs.length,keymap=opt.ae,nmap=this.h,kmap=this.y,colDef,nick,key,i=0;for(;i<len;i++){colDef=colDefs[i];if(Util.isNotNull(colDef.filter)){key=colDef.key;if(Util.isNull(keymap)||!keymap.hasOwnProperty(key)){nick=colDef.name||key
}else{nick=keymap[key]}nmap[nick]=key;kmap[key]=nick;html.push("<div class='"+opt.Y+"'>");this.j(key,nick,colDef.name,colDef.filter,html);html.push("</div>")}}this.e[0].innerHTML=html.join("")}if(Util.isNotNull(this.grid.menubar)){this.grid.menubar.addIcon(opt.aa,"데이터 검색을 합니다.",opt.ac,opt.ad,function(){mask.toggle("fast")
});mask.hide()}};prototype.aF=function(){var map=this.f,keymap,key,tag,item,adv=this.e;for(key in map){if(map.hasOwnProperty(key)){keymap=map[key];for(tag in keymap){if(keymap.hasOwnProperty(tag)){if(tag!=="andor"&&tag!=="parser"&&tag!=="validator"){(item=keymap[tag]).input=adv.find("#"+key+item.option.name)
}}}}}};prototype.aA=function(){var key,tag,base,gmap=this.s,fmap=this.f,ftmap,tmap=this.g,ttmap,ttbmap;for(key in gmap){if(gmap.hasOwnProperty(key)){JGM.n(gmap[key],"tag");JGM.r(gmap[key],"list")}}for(key in fmap){if(fmap.hasOwnProperty(key)){ftmap=fmap[key];
for(tag in ftmap){if(ftmap.hasOwnProperty(tag)){if(tag!=="andor"&&tag!=="parser"&&tag!=="validator"){JGM.n(ftmap[tag],"input")}JGM.l(ftmap,tag)}}JGM.l(fmap,key)}}for(key in tmap){if(tmap.hasOwnProperty(key)){ttmap=tmap[key];for(tag in ttmap){if(ttmap.hasOwnProperty(tag)){ttbmap=ttmap[tag];
for(base in ttbmap){if(ttbmap.hasOwnProperty(base)){JGM.n(ttbmap[base],"tag");JGM.l(ttbmap,base)}}JGM.l(ttmap,tag)}}JGM.l(tmap,key)}}JGM.q(this,{name:"SearchManager",path:"search","$":"p q a c d e",property:"b x",array:"r",map:"s f g i h Z y"})};prototype.ar=function(success,failed){if(this.r.length===0&&Util.isEmptyObj(this.i)){return
}var options,tagMap=this.g,key,tag,len=success.length,data,value,andor,filterMap=this.f,and=this.constructor.CONST.and,base,hasGlobal=this.r.length>0,i,keymap;if(hasGlobal){var global=this.r,globalToFind,j,k,val,cols=this.grid.colDefMgr.get().filter(function(c){return !c.noSearch
}),keylen=cols.length,keys=[];for(i=0;i<keylen;i++){keys.push(cols[i].key)}}data_loop:for(i=len-1;i>=0;i--){data=success[i];if(hasGlobal){globalToFind=global.slice();k=0;key_loop:for(;globalToFind.length!==0&&k<keylen;k++){if(Util.isNull(val=data[keys[k]])){continue
}if(!Util.isString(val)){val=val.toString()}for(j=globalToFind.length-1;j>=0;j--){if(val.indexOf(globalToFind[j])!==-1){globalToFind.removeAt(j)}}}if(globalToFind.length!==0){success.removeAt(i);failed.push(data);continue data_loop}}for(key in tagMap){if(tagMap.hasOwnProperty(key)){keymap=tagMap[key];
andor=filterMap[key].andor;value=data[key];if(andor===and){for(tag in keymap){if(keymap.hasOwnProperty(tag)){options=keymap[tag];for(base in options){if(options.hasOwnProperty(base)){if(!options[base].fn(value)){success.removeAt(i);failed.push(data);continue data_loop
}}}}}}else{for(tag in keymap){if(keymap.hasOwnProperty(tag)){options=keymap[tag];for(base in options){if(options.hasOwnProperty(base)){if(options[base].fn(value)){continue data_loop}}}}}success.removeAt(i);failed.push(data);continue data_loop}}}}};prototype.j=function(key,nick,name,filter,html){if(this.f.hasOwnProperty(key)){return
}if(filter==="number"){filter=this.constructor.d}else{if(filter==="string"){filter=this.constructor.e}}var option,len=filter.length,i=0,mid=this.mid,classOpt=this.Z.Z,fkmap,tmap,tag,oname;fkmap=this.f[key]={andor:this.constructor.CONST.and};tmap=this.g[key]={};
html.push("<table>");for(;i<len;i++){option=filter[i];oname=option.name;if(oname==="parser"){fkmap.parser=option.fn;continue}if(oname==="validator"){fkmap.validator=option.fn;continue}tag=option.tag;fkmap[tag]={option:option};tmap[tag]={};html.push("<tr title='"+option.comment(name,"입력값")+"'><td><div class='"+classOpt+"'>"+name+" "+tag+"</td><td><input id='"+key+oname+"' key='"+key+"' tag='"+tag+"' type='text'><button type='button' onclick=\"JGM.m.SearchManager."+mid+".l('"+key+"','"+nick+"','"+tag+"',this.previousSibling.value)\">등록</button></div></td></tr>")
}html.push("</table>")};prototype.k=function(str){var arg,key,name,tag,base,args=Util.split(str),len=args.length,status=2,change=false,global=[],nmap=this.h,fmap=this.f,i=0;for(;i<len;i++){arg=args[i];if(arg===""){continue}switch(status){case 0:if(fmap[key].hasOwnProperty(arg)){tag=arg;
status=1}break;case 1:base=arg;status=2;break;case 2:if(arg.charAt(0)==="@"){arg=arg.substring(1);if(nmap.hasOwnProperty(arg)){if(Util.isNotNullAnd(key,name,tag,base)){if(this.l(key,name,tag,base,true)){change=true}}key=nmap[arg];name=arg;tag=undefined;base=undefined;
status=0}else{if(Util.isNull(key)){global.push(arg)}else{base+=" "+arg}}}else{if(Util.isNull(key)){global.push(arg)}else{base+=" "+arg}}break;default:}}if(Util.isNotNullAnd(key,name,tag,base)){if(this.l(key,name,tag,base,true)){change=true}}if(this.v(global)){change=true
}this.u();if(change){this.grid.dataMgr.refresh()}};prototype.u=function(){if(this.Z.ag){var inputStr=this.r.join(" "),tagMap=this.g,keyToName=this.y,key,tag,base,keymap,basemap;for(key in tagMap){if(tagMap.hasOwnProperty(key)){keymap=tagMap[key];for(tag in keymap){if(keymap.hasOwnProperty(tag)){basemap=keymap[tag];
for(base in basemap){if(basemap.hasOwnProperty(base)){inputStr+=" @"+keyToName[key]+" "+tag+" "+base}}}}}}this.p[0].value=$.trim(inputStr)}else{this.p[0].value=""}};prototype.v=function(toAdd){var i=0,len=toAdd.length,global=this.r;for(;i<len;i++){if(global.indexOf(toAdd[i])!==-1){toAdd.removeAt(i--)
}else{global.push(toAdd[i])}}if(toAdd.length===0){return false}var opt=this.Z;this.s[toAdd[0]]={tag:$("<div class='"+opt.U+"' title='"+toAdd.join(", ")+" 를 포함하는'><div class='"+opt.V+"'>"+toAdd.join(" ")+"</div><div class='"+opt.W+"' title='필터 제거' onclick=\"JGM.m.SearchManager."+this.mid+".w('"+toAdd[0]+"')\"></div></div>").appendTo(this.d),list:toAdd};
return true};prototype.w=function(index){var gmap=this.s;if(gmap.hasOwnProperty(index)){var item=gmap[index];item.tag.remove();delete item.tag;this.r.removeList(item.list);item.list.length=0;delete item.list;delete gmap[index];this.u();this.grid.dataMgr.refresh()
}};prototype.l=function(key,nick,optionTag,base,norefresh){var fmap=this.f,fkmap,fkomap,cmap=this.i;if(fmap.hasOwnProperty(key)&&(fkmap=fmap[key]).hasOwnProperty(optionTag)){fkomap=fkmap[optionTag];if(Util.isNull(base)){var input=fkomap.input;base=$.trim(input.val());
input.val("")}else{base=$.trim(base)}if(base.length===0){return false}if(Util.isNotNull(fkmap.parser)){base=fkmap.parser(base)}if(cmap.hasOwnProperty(key+"@T"+optionTag+"@B"+base)){return false}if(Util.isNotNull(fkmap.validator)){if(!fkmap.validator(base)){return false
}}var option=fkomap.option,andor=fkmap.andor}else{return false}var tagmap=this.g[key];if(tagmap[optionTag].hasOwnProperty(base)){return false}var options,parsedOther,tag,otherbase,filtermap=this.f[key],oomap;for(tag in tagmap){if(tagmap.hasOwnProperty(tag)){options=tagmap[tag];
for(otherbase in options){if(options.hasOwnProperty(otherbase)){oomap=options[otherbase];if(Util.isNotNull(filtermap.parser)){parsedOther=filtermap.parser(otherbase)}else{parsedOther=otherbase}if(SearchManager.c(option.type,oomap.option.type,andor,base,parsedOther)){delete cmap[key+"@T"+oomap.option.tag+"@B"+parsedOther];
oomap.tag.remove();delete oomap.tag;delete oomap.option;delete oomap.fn;delete options[otherbase]}}}}}cmap[key+"@T"+optionTag+"@B"+base]=true;this.o(key,option,base,nick);if(!norefresh){this.u();this.grid.dataMgr.refresh()}return true};prototype.m=function(key,tag,base){var tmap=this.g,tkmap,tktmap;
if(tmap.hasOwnProperty(key)&&(tkmap=tmap[key]).hasOwnProperty(tag)&&(tktmap=tkmap[tag]).hasOwnProperty(base)){var option=tktmap[base];option.tag.remove();delete option.tag;delete option.option;delete option.fn;delete tktmap[base];delete this.i[key+"@T"+tag+"@B"+base];
this.u();this.grid.dataMgr.refresh()}};prototype.n=function(){var key,global=this.s,item,map=this.g,tag,base,tagmap,basemap,bb;for(key in global){if(global.hasOwnProperty(key)){item=global[key];item.tag.remove();delete item.tag;item.list.length=0;delete item.list;
delete global[key]}}this.r.length=0;for(key in map){if(map.hasOwnProperty(key)){tagmap=map[key];for(tag in tagmap){if(tagmap.hasOwnProperty(tag)){basemap=tagmap[tag];for(base in basemap){if(basemap.hasOwnProperty(base)){bb=basemap[base];bb.tag.remove();delete bb.tag;
delete bb.option;delete bb.fn;delete basemap[base]}}}}}}this.i={};this.u();this.grid.dataMgr.refresh()};prototype.o=function(key,option,base,nick){var opt=this.Z;return(this.g[key][option.tag][base]={tag:$("<div class='"+opt.U+"' title='"+option.comment(nick,base)+"'><div class='"+opt.V+"'>@"+nick+" "+option.tag+" "+base+"</div><div class='"+opt.W+"' title='필터 제거' onclick=\"JGM.m.SearchManager."+this.mid+".m('"+key+"','"+option.tag+"','"+base+"')\"></div></div>").appendTo(this.d),option:option,fn:option.fn(base)})
};var con=SearchManager.CONST={lt:0,lte:1,eq:2,neq:3,gt:4,gte:5,and:6,or:7,T:8,F:9},lt=con.lt,gt=con.gt,eq=con.eq,neq=con.neq,and=con.and,or=con.or,T=con.T,F=con.F,comp=SearchManager.a={},complt=comp[lt]=function(a,b){return a<=b},compgt=comp[gt]=function(a,b){return a>=b
},compeq=comp[eq]=function(a,b){return a===b},compT=comp[T]=function(){return true},dmap=SearchManager.b={},dmaplt=dmap[lt]={},dmapgt=dmap[gt]={},dmapeq=dmap[eq]={},dmapneq=dmap[neq]={};comp[F]=function(){return false};dmaplt[lt]={};dmaplt[lt][and]=compT;dmaplt[lt][or]=compT;
dmaplt[gt]={};dmaplt[gt][and]=complt;dmaplt[gt][or]=compgt;dmaplt[eq]={};dmaplt[eq][and]=compT;dmaplt[eq][or]=compgt;dmaplt[neq]={};dmaplt[neq][and]=complt;dmaplt[neq][or]=compT;dmapgt[lt]={};dmapgt[lt][and]=compgt;dmapgt[lt][or]=complt;dmapgt[gt]={};dmapgt[gt][and]=compT;
dmapgt[gt][or]=compT;dmapgt[eq]={};dmapgt[eq][and]=compT;dmapgt[eq][or]=complt;dmapgt[neq]={};dmapgt[neq][and]=compgt;dmapgt[neq][or]=compT;dmapeq[lt]={};dmapeq[lt][and]=compT;dmapeq[lt][or]=complt;dmapeq[gt]={};dmapeq[gt][and]=compT;dmapeq[gt][or]=compgt;dmapeq[eq]={};
dmapeq[eq][and]=compT;dmapeq[eq][or]=compeq;dmapeq[neq]={};dmapeq[neq][and]=compT;dmapeq[neq][or]=compT;dmapneq[lt]={};dmapneq[lt][and]=compgt;dmapneq[lt][or]=compT;dmapneq[gt]={};dmapneq[gt][and]=complt;dmapneq[gt][or]=compT;dmapneq[eq]={};dmapneq[eq][and]=compT;
dmapneq[eq][or]=compT;dmapneq[neq]={};dmapneq[neq][and]=compeq;dmapneq[neq][or]=compT;SearchManager.c=function(toEnable,other,andor,base,otherbase){try{return this.b[toEnable][other][andor](base,otherbase)}catch(e){return false}};SearchManager.d=[{name:"gt",tag:">",type:gt,comment:function(name,base){return name+" 이(가) "+base+"보다 큰"
},fn:function(base){if(Util.isString(base)){base=base.toFloat()}return function(value){return value>base}}},{name:"gte",tag:">=",type:gt,comment:function(name,base){return name+" 이(가) "+base+"보다 크거나 같은"},fn:function(base){if(Util.isString(base)){base=base.toFloat()
}return function(value){return value>=base}}},{name:"lt",tag:"<",type:lt,comment:function(name,base){return name+" 이(가) "+base+"보다 작은"},fn:function(base){if(Util.isString(base)){base=base.toFloat()}return function(value){return value<base}}},{name:"lte",tag:"<=",type:lt,comment:function(name,base){return name+" 이(가) "+base+"보다 작거나 같은"
},fn:function(base){if(Util.isString(base)){base=base.toFloat()}return function(value){return value<=base}}},{name:"eq",tag:"=",type:eq,comment:function(name,base){return name+" 이(가) "+base+"인"},fn:function(base){if(Util.isString(base)){base=base.toFloat()}return function(value){return value===base
}}},{name:"neq",tag:"!=",type:neq,comment:function(name,base){return name+" 이(가) "+base+"이(가) 아닌"},fn:function(base){if(Util.isString(base)){base=base.toFloat()}return function(value){return value!==base}}},{name:"contains",tag:"*=",comment:function(name,base){return name+" 이(가) 숫자 "+base+"를 포함하는"
},fn:function(base){if(Util.isNumber(base)){base=base.toString()}else{base=$.trim(base)}return function(value){return(value.toString()).indexOf(base)!==-1}}},{name:"parser",fn:function(str){return str.toFloat()}},{name:"validator",fn:function(val){return !isNaN(val)
}}];SearchManager.e=[{name:"to",tag:"<=",type:lt,comment:function(name,base){return name+" 이(가) "+base+"보다 사전에서 이전인"},fn:function(base){base=$.trim(base).toLowerCase();return function(value){return value.toLowerCase()<=base}}},{name:"from",tag:">=",type:gt,comment:function(name,base){return name+" 이(가) "+base+"보다 사전에서 이후인"
},fn:function(base){base=$.trim(base).toLowerCase();return function(value){return value.toLowerCase()>=base}}},{name:"equals",tag:"=",type:eq,comment:function(name,base){return name+" 이(가) "+base+"와(과) 같은"},fn:function(base){base=$.trim(base).toLowerCase();
return function(value){return value.toLowerCase()===base}}},{name:"notEquals",tag:"!=",type:neq,comment:function(name,base){return name+" 이(가) "+base+"이(가) 아닌"},fn:function(base){base=$.trim(base).toLowerCase();return function(value){return value.toLowerCase()!==base
}}},{name:"startsWith",tag:"^=",comment:function(name,base){return name+" 이(가) "+base+"(으)로 시작하는"},fn:function(base){base=$.trim(base).toLowerCase();var baselen=base.length;return function(value){return value.substr(0,baselen).toLowerCase()===base}}},{name:"endsWith",tag:"$=",comment:function(name,base){return name+" 이(가) "+base+"(으)로 끝나는"
},fn:function(base){base=$.trim(base).toLowerCase();var baselen=base.length;return function(value){return value.substr(value.length-baselen,value.length).toLowerCase()===base}}},{name:"contains",tag:"*=",comment:function(name,base){return name+" 이(가) "+base+"을(를) 포함하는"
},fn:function(base){base=$.trim(base).toLowerCase();return function(value){return value.toLowerCase().indexOf(base)!==-1}}},{name:"containsAny",tag:"|=",comment:function(name,base){return name+" 이(가) "+base+"들 중 하나 이상을 포함하는"},fn:function(base){base=base.toLowerCase();
var baseArr=Util.split(base),baseArrlen=baseArr.length;if(baseArrlen<=1){return function(value){return value.toLowerCase().indexOf(base)!==-1}}return function(value){value=value.toLowerCase();var i=0;for(;i<baseArrlen;i++){if(value.indexOf(baseArr[i])!==-1){return true
}}return false}}},{name:"containsAll",tag:"&=",comment:function(name,base){return name+" 이(가) "+base+"들 모두를 포함하는"},fn:function(base){base=base.toLowerCase();var baseArr=Util.split(base),baseArrlen=baseArr.length;if(baseArrlen<=1){return function(value){return value.toLowerCase().indexOf(base)!==-1
}}return function(value){value=value.toLowerCase();var i=0;for(;i<baseArrlen;i++){if(value.indexOf(baseArr[i])===-1){return false}}return true}}}];JGM.b("SearchManager",SearchManager)}());(function(){function SelectionManager(args){this.mid=args.mid;this.grid=args.grid;
this.grid.selMgr=this;var options={a:this.grid.dataMgr.idKey,b:"#DCEBFE",c:"#f1ca7f",d:"#D9D9D9",e:"jgrid-selection",f:"selection-last",g:"selection-range",h:false,classRowSelected:"rowSelected",highlightRowEnabled:true,bgColorRowSelected:"#d8dfea"};this.Z=JGM.e(options,args.options,{rowSelKey:"a",bgColorSelection:"b",bgColorLast:"c",bgColorRange:"d",classSelection:"e",classLast:"f",classRange:"g",multiSelectEnabled:"h"});
this.a={a:1,b:2,c:3,d:4,f:5,g:6,h:7,i:8,e:{}};this.a.e=Util.which(["enter","tab","arrow","pgdn","pgup","home","end"]);this.b;this.c;this.d={length:0};this.e={length:0};this.Y()}SelectionManager.X=function(args){return new SelectionManager(args)};var prototype=SelectionManager.prototype;
prototype.Y=function(){this.bindEvents()};prototype.bindEvents=function(){this.grid.event.bind({onGetCellClass:this.aI,onCreateCss:this.V,onDestroy:this.aA,keydownCanvas:this.ba,dragoverCanvas:this.be,mousedownCanvas:this.bf,onBeforeRerender:this.t,onAfterRerender:this.onAfterRerender,onBeforeDataChange:this.onBeforeDataChange},this)
};prototype.aA=function(){JGM.l(this.a,"e");var i,rows=this.d,cols=this.e;for(i in rows){if(rows.hasOwnProperty(i)&&i!=="length"){JGM.l(rows,i)}}for(i in cols){if(cols.hasOwnProperty(i)&&i!=="length"){JGM.l(cols,i)}}JGM.q(this,{name:"SelectionManager",path:"selMgr",map:"d e c b a Z"})
};prototype.V=function(){var rules=this.grid.event.trigger("onBeforeCreateSelCss"),gridId="#"+this.grid.mid+" .",opt=this.Z;if(opt.highlightRowEnabled===true){rules.push(gridId+opt.classRowSelected+" > *{background:"+opt.bgColorRowSelected+"}")}if(opt.h===true){rules.push(gridId+opt.e+"{background:"+opt.b+"}");
rules.push(gridId+opt.g+"{background:"+opt.d+"}")}rules.push(gridId+opt.f+"{background:"+opt.c+"}");return rules.join("\n")};prototype.aI=function(row,col,datarow,colDef){var css="",last=this.b,range=this.c,rows=this.d,opt=this.Z;if(Util.isNotNull(last)&&last.getDatarow()===datarow&&last.getColDef()===colDef){css+=opt.f
}if(opt.h===true){if(Util.isNotNull(range)&&range.getDatarow()===datarow&&range.getColDef()===colDef){css+=" "+opt.g}if(rows.hasOwnProperty(row)&&rows[row].hasOwnProperty(col)){css+=" "+opt.e}}return css};prototype.bf=function(e,cell){if(Util.isNotNull(this.b)&&this.b.equals(cell)){return
}this.grid.event.trigger("onBeforeSelect",[e,cell]);if(this.Z.h===false){this.selectCell(cell)}else{if(e.shiftKey&&Util.isNotNullAnd(this.b,this.c)){this.selectRange(cell)}else{if(e.ctrlKey){if(cell.getKey()===this.Z.a){this.addRow(cell)}else{this.addCell(cell)
}}else{this.selectCell(cell)}}}};prototype.be=function(e,cell){if(this.Z.h===false){this.selectCell(cell)}else{if(Util.isNotNullAnd(this.b,this.c)){this.selectRange(cell)}}};prototype.ba=function(e){if(Util.isNullOr(this.b,this.c)){if(this.a.e[e.which]){this.selectCell(JGM.create("Cell",{grid:this.grid,row:this.grid.view.l(),col:this.grid.view.q()}))
}return}if(this.a.e[e.which]){if(this.grid.event.triggerInvalid("onBeforeNavigate",[e])){return}var nextCell;e.preventDefault();switch(e.which){case Util.keyMapKeydown.tab:if(e.shiftKey){nextCell=this.j(this.a.c,this.b);this.selectCell(nextCell)}else{nextCell=this.j(this.a.d,this.b);
this.selectCell(nextCell)}break;case Util.keyMapKeydown.enter:if(e.shiftKey){nextCell=this.j(this.a.a,this.b);this.selectCell(nextCell)}else{nextCell=this.j(this.a.b,this.b);this.selectCell(nextCell)}break;case Util.keyMapKeydown.up:if(this.Z.h&&e.shiftKey){nextCell=this.j(this.a.a,this.c);
this.selectRange(nextCell)}else{nextCell=this.j(this.a.a,this.b);this.selectCell(nextCell)}break;case Util.keyMapKeydown.down:if(this.Z.h&&e.shiftKey){nextCell=this.j(this.a.b,this.c);this.selectRange(nextCell)}else{nextCell=this.j(this.a.b,this.b);this.selectCell(nextCell)
}break;case Util.keyMapKeydown.left:if(this.Z.h&&e.shiftKey){nextCell=this.j(this.a.c,this.c);this.selectRange(nextCell)}else{nextCell=this.j(this.a.c,this.b);this.selectCell(nextCell)}break;case Util.keyMapKeydown.right:if(this.Z.h&&e.shiftKey){nextCell=this.j(this.a.d,this.c);
this.selectRange(nextCell)}else{nextCell=this.j(this.a.d,this.b);this.selectCell(nextCell)}break;case Util.keyMapKeydown.pgup:if(this.Z.h&&e.shiftKey){nextCell=this.j(this.a.g,this.c);this.selectRange(nextCell)}else{nextCell=this.j(this.a.g,this.b);this.selectCell(nextCell)
}break;case Util.keyMapKeydown.pgdn:if(this.Z.h&&e.shiftKey){nextCell=this.j(this.a.f,this.c);this.selectRange(nextCell)}else{nextCell=this.j(this.a.f,this.b);this.selectCell(nextCell)}break;case Util.keyMapKeydown.space:if(e.shiftKey){nextCell=this.j(this.a.g,this.b);
this.selectCell(nextCell)}else{nextCell=this.j(this.a.f,this.b);this.selectCell(nextCell)}break;case Util.keyMapKeydown.home:if(this.Z.h&&e.shiftKey){nextCell=this.j(this.a.h,this.c);this.selectRange(nextCell)}else{nextCell=this.j(this.a.h,this.b);this.selectCell(nextCell)
}break;case Util.keyMapKeydown.end:if(this.Z.h&&e.shiftKey){nextCell=this.j(this.a.i,this.c);this.selectRange(nextCell)}else{nextCell=this.j(this.a.i,this.b);this.selectCell(nextCell)}break}this.grid.event.trigger("onAfterNavigate",[nextCell])}else{if(this.e.length===1){var key,cmgr=this.grid.colDefMgr,col,cols=this.e;
for(col in cols){if(cols.hasOwnProperty(col)&&col!=="length"){key=cmgr.get(col).key;this.grid.event.trigger("keydownColSel_"+key+"_"+e.which+" keydownColSel_"+key,[e,cols[col],this.b])}}}if(this.d.length===1){var row,rows=this.d;for(row in rows){if(rows.hasOwnProperty(row)&&row!=="length"){this.grid.event.trigger("keydownRowSel_"+e.which+" keydownRowSel",[e,rows[row],this.b])
}}}this.grid.event.trigger("keydownSel_"+e.which+" keydownSel",[e,this.d,this.e])}};prototype.getCell=function(){if(Util.isNotNull(this.b)){return this.b}};prototype.h=function(cell){return Util.isNotNull(this.b)&&this.b.equals(cell)};JGM.Cell.prototype.isSelected=function(){return this.grid.selMgr.h(this)
};prototype.i=function(dir,row,col){switch(dir){case this.a.d:if(col<this.grid.colDefMgr.length()-1){col++}break;case this.a.c:if(col>0){col--}break;case this.a.b:if(row<this.grid.dataMgr.datalist.length-1){row++}break;case this.a.a:if(row>0){row--}break;case this.a.f:row+=this.grid.view.Z.e;
if(row>this.grid.dataMgr.datalist.length-1){row=this.grid.dataMgr.datalist.length-1}break;case this.a.g:row-=this.grid.view.Z.e;if(row<0){row=0}break;case this.a.h:row=0;break;case this.a.i:row=this.grid.dataMgr.datalist.length-1;break}return[row,col]};prototype.j=function(dir,idx){var newIdx=this.i(dir,idx.getRowIdx(),idx.getColIdx());
return JGM.create("Cell",{grid:this.grid,row:newIdx[0],col:newIdx[1]})};prototype.selectRow=function(cell){var row=cell.getRowIdx(),col=cell.getColIdx();this.l(row,col,cell);this.k(row,col,cell);this.p(this.s(row,col,cell))};prototype.selectCell=function(cell,noScroll){this.grid.event.trigger("onBeforeSelectCell",[cell]);
if(this.Z.h&&cell.getKey()===this.Z.a){this.selectRow(cell)}else{var row=cell.getRowIdx(),col=cell.getColIdx();this.l(row,col,cell,noScroll);this.k(row,col,cell);this.p(this.q(row,col,cell))}this.grid.event.trigger("onAfterSelectCell",[cell])};prototype.onBeforeDataChange=function(){};
prototype.t=function(){if(Util.isNotNull(this.b)){this.toSelect=this.b}this.empty()};prototype.onAfterRerender=function(){if(Util.isNotNull(this.toSelect)){this.selectCell(this.toSelect,true);this.grid.view.scrollToRowLazy(this.toSelect.getRowIdx())}};prototype.addRow=function(cell){var row=cell.getRowIdx(),col=cell.getColIdx();
this.l(row,col,cell);this.k(row,col,cell);this.m(this.s(row,col,cell))};prototype.addCell=function(cell){var row=cell.getRowIdx(),col=cell.getColIdx();this.l(row,col,cell);this.k(row,col,cell);this.m(this.q(row,col,cell))};prototype.selectRange=function(cell){var row=cell.getRowIdx(),col=cell.getColIdx(),lastRow=this.b.getRowIdx(),lastCol=this.b.getColIdx(),minRow=(lastRow<row?lastRow:row),maxRow=(lastRow<row?row:lastRow),minCol,maxCol;
this.l(row,col,cell);if(cell.getKey()===this.Z.a){minCol=0;maxCol=this.grid.colDefMgr.length()-1}else{minCol=lastCol<col?lastCol:col;maxCol=lastCol<col?col:lastCol}this.p(this.r(minRow,minCol,maxRow,maxCol,row,col,cell));return{minRow:minRow,minCol:minCol,maxRow:maxRow,maxCol:maxCol}
};prototype.k=function(row,col,cell){var last=this.b,lastRow;if(Util.isNotNull(last)){lastRow=last.getRowIdx();if(row!==lastRow&&(Util.isNotNull(this.c)&&lastRow!==this.c.getRowIdx())){this.grid.view.unlockRowById(last.getId())}last.get$().removeClass(this.Z.f);
if(this.Z.highlightRowEnabled===true){$(last.getRowNode()).removeClass(this.Z.classRowSelected)}if(Util.isNull(cell)){delete this.b}}if(Util.isNull(cell)){return}(this.b=cell).get$().addClass(this.Z.f);if(this.Z.highlightRowEnabled===true){$(cell.getRowNode()).addClass(this.Z.classRowSelected)
}this.grid.view.lockRowByIdx(row)};prototype.l=function(row,col,cell,noScroll){var range=this.c;if(Util.isNotNull(range)){var rangeRow=range.getRowIdx();if(row===rangeRow&&col===range.getColIdx()){return}if(row!==rangeRow&&(Util.isNotNull(this.b)&&rangeRow!==this.b.getRowIdx())){this.grid.view.unlockRowById(range.getId())
}range.get$().removeClass(this.Z.g);if(Util.isNull(cell)){delete this.c}}if(Util.isNull(cell)){return}(this.c=cell).get$().addClass(this.Z.g);var view=this.grid.view;view.lockRowByIdx(row);if(!noScroll){view.scrollToLazy(row,col)}};prototype.m=function(map){var rowsmap=this.d,rowmap,addrow,r,c,view=this.grid.view,toAddClass={};
for(r in map){if(map.hasOwnProperty(r)){addrow=map[r];if(rowsmap.hasOwnProperty(r)){rowmap=rowsmap[r];for(c in addrow){if(addrow.hasOwnProperty(c)){if(rowmap.hasOwnProperty(c)){if(addrow[c] instanceof JGM.Cell){rowmap[c]=addrow[c]}delete addrow[c]}}}}}}this.addOrRemoveCss(toAddClass,true);
this.n(map)};prototype.p=function(map){var rowsmap=this.d,rowmap,colmap,addrow,r,c,view=this.grid.view,toRemoveClass={},toRemoveRow,removeMap={};for(r in rowsmap){if(rowsmap.hasOwnProperty(r)&&r!=="length"){rowmap=rowsmap[r];if(map.hasOwnProperty(r)){addrow=map[r];
for(c in rowmap){if(rowmap.hasOwnProperty(c)&&c!=="length"){if(addrow.hasOwnProperty(c)){if(addrow[c] instanceof JGM.Cell){rowmap[c]=addrow[c]}delete addrow[c]}else{if(!removeMap.hasOwnProperty(r)){removeMap[r]={}}removeMap[r][c]=true}}}}else{colmap=removeMap[r]={};
for(c in rowmap){if(rowmap.hasOwnProperty(c)&&c!=="length"){colmap[c]=true}}}}}this.o(removeMap);this.addOrRemoveCss(toRemoveClass,false);this.m(map)};prototype.addOrRemoveCss=function(map,add){var list=[],r,c,row,view=this.grid.view;for(r in map){if(map.hasOwnProperty(r)){row=map[r];
for(c in row){if(row.hasOwnProperty(c)){if(row[c] instanceof JGM.Cell){list.push(row[c].getNode())}else{list.push(view.getCell(r,c))}}}}}list=list.filter(function(n){return Util.isNotNull(n)});if(add){$(list).addClass(this.Z.e)}else{$(list).removeClass(this.Z.e)
}};prototype.n=function(map){var r,c,cell,rowmap=this.d,colmap=this.e,row;for(r in map){if(map.hasOwnProperty(r)){row=map[r];for(c in row){if(row.hasOwnProperty(c)){cell=Util.isNull(cell=row[c])?true:cell;if(rowmap.hasOwnProperty(r)){rowmap[r].length++}else{rowmap[r]={length:1};
rowmap.length++}rowmap[r][c]=cell;if(colmap.hasOwnProperty(c)){colmap[c].length++}else{colmap[c]={length:1};colmap.length++}colmap[c][r]=cell}}}}};prototype.o=function(map){var r,c,rowmap=this.d,colmap=this.e,row;for(r in map){if(map.hasOwnProperty(r)){row=map[r];
for(c in row){if(row.hasOwnProperty(c)){if(--rowmap[r].length===0){delete rowmap[r];rowmap.length--}else{delete rowmap[r][c]}if(--colmap[c].length===0){delete colmap[c];colmap.length--}else{delete colmap[c][r]}}}}}};prototype.q=function(row,col,cell){var map={};
map[row]={};map[row][col]=cell;return map};prototype.s=function(row,col,cell){var map={},collen=this.grid.colDefMgr.length(),i=0;map[row]={};for(;i<collen;i++){map[row][i]=true}map[row][col]=cell;return map};prototype.r=function(rowMin,colMin,rowMax,colMax,row,col,cell){var map={},i=rowMin,j;
for(;i<=rowMax;i++){map[i]={};j=colMin;for(;j<=colMax;j++){map[i][j]=true}}map[row][col]=cell;return map};prototype.empty=function(){this.k();this.l();this.p({})};JGM.b("SelectionManager",SelectionManager)}());(function(){function TooltipManager(args){this.mid=args.mid;
this.grid=args.grid;this.grid.tooltip=this;this.b=args.container;var options={a:"jgrid-tooltip",b:true,c:0,d:18,e:"#F5F5F5",f:"1px solid #868686",g:"2px 10px",h:"14px Arial,Helvetica,sans-serif",i:"#333"};this.Z=JGM.e(options,args.options,{classTooltip:"a",tooltipSyncEnabled:"b",offsetX:"c",offsetY:"d",background:"e",border:"f",padding:"g",font:"h",color:"i"});
this.a;this.Y()}TooltipManager.X=function(args){return new TooltipManager(args)};var prototype=TooltipManager.prototype;prototype.Y=function(){this.grid.event.bind({onCreateCss:this.V,onDestroy:this.aA,mouseoutCanvas:this.bb,mousemoveCanvas:this.bc,mouseoverCanvas:this.bd},this)
};prototype.aA=function(){JGM.q(this,{name:"TooltipManager",path:"tooltip","$":"a",property:"b",map:"Z"})};prototype.V=function(){var gridId="#"+this.grid.mid+" .",opt=this.Z,rules=[];rules.push(gridId+opt.a+"{position:absolute;z-index:10;background:"+opt.e+";border:"+opt.f+";padding:"+opt.g+";color:"+opt.i+";font:"+opt.h+"}");
return rules.join("")};prototype.bb=function(e,cell){if(Util.isNotNull(this.a)){this.b[0].removeChild(this.a[0]);delete this.a}};prototype.bc=function(e,cell){var opt=this.Z;if(opt.b&&Util.isNotNull(this.a)){this.a.css({left:(e.pageX+opt.c)+"px",top:(e.pageY+opt.d)+"px"})
}};prototype.bd=function(e,cell){if(cell.getColDef().tooltipEnabled){if(Util.isNull(this.a)){var opt=this.Z,temp=document.createElement("div");temp.innerHTML="<div class='"+opt.a+"' style='left:"+(e.pageX+opt.c)+"px;top:"+(e.pageY+opt.d)+"px'>"+cell.getValue()+"</div>";
this.a=$(temp.firstChild);this.b[0].appendChild(this.a[0])}}};JGM.b("TooltipManager",TooltipManager)}());(function(){function ViewportManager(args){this.mid=args.mid;this.b=args.container;this.a;this.c;this.grid=args.grid;this.grid.view=this;var options={a:"r",b:3,c:10,d:6,e:10,f:21,g:1,h:"solid #D0D7E5",i:1,j:false,k:"#F4F4F4",q:"",r:"",s:"",t:"",l:"jgrid-row",m:"jgrid-cell",n:"jgrid-viewport",o:"jgrid-canvas",u:"#FFF",v:"2px solid #f1ca7f",w:false,x:false};
this.Z=JGM.e(options,args.options,{attrRowIdx:"a",appendThreshold:"b",renderThreshold:"c",bufferSize:"d",rowsPerPage:"e",rowH:"f",borderThickness:"g",border:"h",padding:"i",evenOddRows:"j",oddRowsBackground:"k",classRow:"l",classCell:"m",classView:"n",classCanvas:"o",style:"q",canvasStyle:"r",rowStyle:"s",cellStyle:"t",focusBackground:"u",focusOutline:"v",autoHeight:"w",autoWidth:"x"});
this.W={a:false,d:0,e:0,l:0};this.A={};this.B={};this.Bd=[0];this.Y()}ViewportManager.X=function(args){return new ViewportManager(args)};var prototype=ViewportManager.prototype;prototype.Y=function(){this.a=$("<div class='"+this.Z.n+"' tabIndex='0' onscroll='JGM.m.ViewportManager."+this.mid+".As()'>").appendTo(this.b);
this.c=$("<div class='"+this.Z.o+"'>").appendTo(this.a);this.a.bind("selectstart.ui",function(event){return $(event.target).is("input, textarea")});this.Be();this.W.l=this.grid.dataMgr.datalist.length;this.grid.event.bind({canvasFind:this.AC,onCreateCss:this.V,onCreateDynamicCss:this.C,onDestroy:this.e,keydown:this.U,keyup:this.T,keypress:this.S,mousein:this.R,mouseout:this.Q,mouseenter:this.P,mouseleave:this.O,mousemove:this.N,mouseover:this.M,mousedown:this.L,mouseup:this.K,click:this.J,dblclick:this.I,resizeWidth:this.AV,"resizeWidth onResizeCol onResizeCanvasHeight":this.AZ,onAfterRefresh:this.onAfterRefresh,onRenderModules:this.w,onReorderCols:this.Bf,onResizeCanvasWidth:this.As,onUpdateDatarow:this.onUpdateDatarow,onUpdateDatalist:this.onUpdateDatalist,onRemoveDatarow:this.onRemoveDatarow,onRemoveDatalist:this.onRemoveDatalist,onIdChange:this.onIdChange,onIdListChange:this.onIdListChange,unsetDrag:this.unsetDrag},this)
};prototype.unsetDrag=function(){this.W.a=false};prototype.e=function(){JGM.q(this,{name:"ViewportManager",path:"view","$":"c a",property:"b",map:"W B A Z"})};prototype.V=function(){var gridId="#"+this.grid.mid+" .",o=this.Z,cellSel=gridId+o.m,rowSel=gridId+o.l,border=o.g+"px "+o.h,attrRowIdx=rowSel+"["+o.a,colDefs=this.grid.colDefMgr.get(),clen=colDefs.length,i=0,rules=[];
rules.push(gridId+o.n+"{height:"+this.AP()+"px;outline:0;position:relative;white-space:nowrap;overflow:auto;line-height:"+o.f+"px;cursor:default;-moz-user-select:none;-webkit-user-select:none;"+o.q+"}");rules.push(gridId+o.n+":focus{background:"+o.u+";outline:"+o.v+"}");
rules.push(gridId+o.o+"{height:"+this.AR()+"px;"+o.r+";background:#fff}");rules.push(rowSel+"{position:absolute;"+o.s+"}");rules.push(cellSel+"{height:"+o.f+"px;border-bottom:"+border+";display:inline-block;white-space:nowrap;overflow:hidden;float:left;text-overflow:ellipsis;padding-left:"+o.i+"px;border-right:"+border+";"+o.t+"}");
if(o.j){rules.push(attrRowIdx+"$='1'],"+attrRowIdx+"$='3'],"+attrRowIdx+"$='5'],"+attrRowIdx+"$='7'],"+attrRowIdx+"$='9']{background:"+o.k+"}")}for(;i<clen;i++){rules.push(cellSel+".k_"+colDefs[i].key+"{"+colDefs[i].style+"}")}return rules.join("")};prototype.C=function(){var cellSel="#"+this.grid.mid+" ."+this.Z.m,str=this.AH()+"{width:"+this.AT()+"px}",colDefs=this.grid.colDefMgr.get(),clen=colDefs.length,i=0;
for(;i<clen;i++){str+=cellSel+".k_"+colDefs[i].key+"{width:"+colDefs[i].width+"px}"}return str};prototype.onUpdateDatarow=function(datarow,change,before){if(this.isRendered(datarow)){this.rerenderRow(datarow)}};prototype.onUpdateDatalist=function(datalist,changes,befores){var datarow,len=datalist.length,i=0;
for(;i<len;i++){datarow=datalist[i];if(this.isRendered(datarow)){this.rerenderRow(datarow)}}};prototype.onRemoveDatarow=function(datarow){this.destroyRow(datarow)};prototype.onRemoveDatalist=function(datalist){var len=datalist.length,i=0;for(;i<len;i++){this.destroyRow(datalist[i])
}};prototype.onIdChange=function(datarow,before,after){var attrChanged=false,node;if(this.isRowLockedById(before)){this.B[after]=this.B[before];delete this.B[before]}if(this.isRenderedById(before)){(this.A[after]=this.A[before]).setAttribute("i",after);attrChanged=true;
delete this.A[before]}};prototype.onIdListChange=function(datalist,befores,idKey){var len=datalist.length,i=0,locked=this.B,rendered=this.A,before,after,attrChanged,node;for(;i<len;i++){before=befores[i];after=datalist[i][idKey];attrChanged=false;if(locked.hasOwnProperty(before)){locked[after]=locked[before];
delete locked[before]}if(rendered.hasOwnProperty(before)){(rendered[after]=rendered[before]).setAttribute("i",after);attrChanged=true;delete rendered[before]}}};prototype.AG=function(){return"#"+this.grid.mid+" ."+this.Z.m};prototype.AH=function(){return"#"+this.grid.mid+" ."+this.Z.l
};prototype.scrollTo=function(row,col){this.scrollToRow(row);this.scrollToCol(col)};prototype.scrollToRowLazy=function(row){var scrollTop=this.getScrollTop();if(Util.isNull(row)){return scrollTop}if(this.n()<row){return this.scrollToRow(this.o(row))}if(this.l()>row){return this.scrollToRow(row)
}return scrollTop};prototype.scrollToColLazy=function(col){var scrollLeft=this.getScrollLeft();if(Util.isNull(col)){return scrollLeft}if(this.s()<col){return this.setScrollLeft(this.getScrollHForSafe(col))}else{if(this.q()>col){return this.scrollToCol(col)}}return scrollLeft
};prototype.scrollToLazy=function(row,col){this.scrollToRowLazy(row);this.scrollToColLazy(col)};prototype.scrollToRow=function(i){if(Util.isNotNull(i)){return this.setScrollTop(this.AN()*i)}return this.getScrollTop()};prototype.scrollToCol=function(i){return this.setScrollLeft(this.getColLeft(i))
};prototype.AI=function(i){return this.grid.colDefMgr.get(i).width};prototype.AJ=function(i){return this.grid.colDefMgr.getByKey(i).width};prototype.getColWidth=function(i){return this.grid.colDefMgr.get(i).width+this.Z.i};prototype.getColWidthByKey=function(i){return this.grid.colDefMgr.getByKey(i).width+this.Z.i
};prototype.AK=function(i){return this.grid.colDefMgr.get(i).width+this.Z.i+this.Z.g};prototype.AL=function(i){return this.grid.colDefMgr.getByKey(i).width+this.Z.i+this.Z.g};prototype.AM=function(){return this.Z.i};prototype.f=function(){return this.Z.i+this.Z.g
};prototype.AN=function(){return this.Z.f+this.Z.g};prototype.AO=function(){return this.Z.f};prototype.AP=function(){if(this.Z.w){return this.AR()+(this.grid.width()<this.AT()?this.grid.W.b.h:0)}return this.AN()*this.Z.e};prototype.getHeight=function(){return this.a[0].offsetHeight
};prototype.getInnerHeight=function(){return this.a[0].clientHeight};prototype.AQ=function(){return this.a[0].offsetWidth};prototype.getInnerWidth=function(){return this.a[0].clientWidth};prototype.AR=function(){return this.AN()*this.grid.dataMgr.datalist.length
};prototype.getCanvasHeight=function(){return this.c[0].clientHeight};prototype.AS=function(h){h=parseInt(h);if(isNaN(h)||h<1){return}var old=this.getCanvasHeight();if(h!=old){this.c[0].style.height=h+"px";this.grid.event.trigger("onResizeCanvasHeight",[h,old])
}};prototype.AT=function(){return this.Bd[this.grid.colDefMgr.length()]};prototype.getCanvasWidth=function(){return this.c[0].clientWidth};prototype.AU=function(w){w=parseInt(w);if(isNaN(w)||w<1){return}var old=this.getCanvasWidth();if(w!=old){this.c[0].style.width=w+"px";
this.grid.event.trigger("onResizeCanvasWidth",[w,old])}};prototype.getColLeft=function(i){return this.Bd[i]};prototype.Bh=function(){return this.Bd};prototype.Be=function(from,to){if(Util.isNull(from)){from=0}var colDefs=this.grid.colDefMgr.get(),widthPlus=this.f();
if(Util.isNull(to)){to=colDefs.length}for(;from<to;from++){this.Bd[from+1]=this.Bd[from]+colDefs[from].width+widthPlus}return this.Bd};prototype.Bf=function(){this.Be();this.Ba()};prototype.setWidthByKey=function(key,w){var colDef=this.grid.colDefMgr.getByKey(key);
w=Util.bound(w,colDef.minW,colDef.maxW);if(w===colDef.width){return}var old=colDef.width;colDef.width=w;this.AU(this.Be(this.grid.colDefMgr.getIdxByKey(key))[this.grid.colDefMgr.length()]);this.grid.g();this.grid.event.trigger("onResizeCol_"+key+" onResizeCol",[key,w,old])
};prototype.Bg=function(key){var res=this.AC(".k_"+key),max=Number.MIN_VALUE,len=res.length,i=0;for(;i<len;i++){if(max<res[i].scrollWidth){max=res[i].scrollWidth}}max-=this.AM();this.setWidthByKey(key,max)};prototype.AV=function(w){w=parseInt(w);if(isNaN(w)||w<1){return
}this.a[0].style.width=w+"px"};prototype.getScrollTop=function(){return this.a[0].scrollTop};prototype.getScrollLeft=function(){return this.a[0].scrollLeft};prototype.setScrollTop=function(t){var scrollTop=this.getScrollTop();if(Util.isNotNull(t)&&scrollTop!=t){return(this.a[0].scrollTop=t)
}return scrollTop};prototype.setScrollLeft=function(left){var scrollLeft=this.getScrollLeft();if(Util.isNotNull(left)&&scrollLeft!=left){return(this.a[0].scrollLeft=left)}return scrollLeft};prototype.i=function(){return this.a[0].offsetHeight>this.a[0].clientHeight
};prototype.j=function(){return this.a[0].offsetWidth>this.a[0].clientWidth};prototype.AW=function(){return this.a[0].offsetHeight-this.a[0].clientHeight};prototype.AX=function(){return this.a[0].offsetWidth-this.a[0].clientWidth};prototype.k=function(){return Math.floor(this.getScrollTop()/this.AN())
};prototype.l=function(){return Math.ceil(this.getScrollTop()/this.AN())};prototype.m=function(){return Math.ceil((this.getScrollTop()+this.a[0].clientHeight)/this.AN())-1};prototype.n=function(){return Math.floor((this.getScrollTop()+this.a[0].clientHeight)/this.AN())-1
};prototype.o=function(row){return row-Math.floor(this.a[0].clientHeight/this.AN())+1};prototype.p=function(){var scrollLeft=this.getScrollLeft(),colLefts=this.Bd,i=0,len=colLefts.length;for(;i<len;i++){if(colLefts[i]>scrollLeft){return i-1}if(colLefts[i]===scrollLeft){return i
}}return len-2};prototype.q=function(){var scrollLeft=this.getScrollLeft(),colLefts=this.Bd,i=0,len=colLefts.length;for(;i<len;i++){if(colLefts[i]>=scrollLeft){return i}}return len-2};prototype.r=function(){var scrollLeft=this.getScrollLeft()+this.a[0].clientWidth,colLefts=this.Bd,i=0,len=colLefts.length;
for(;i<len;i++){if(colLefts[i]>=scrollLeft){return i-1}}return len-2};prototype.s=function(){var scrollLeft=this.getScrollLeft()+this.a[0].clientWidth,colLefts=this.Bd,i=0,len=colLefts.length;for(;i<len;i++){if(colLefts[i]>scrollLeft){return i-2}}return len-2
};prototype.t=function(col){var colLefts=this.Bd,left=colLefts[col+1]-this.a[0].clientWidth,i=col;if(left<=0){return 0}for(;i>=0;i--){if((i===col&&colLefts[i]<=left)||colLefts[i]===left){return i}if(colLefts[i]<left){return i+1}}return 0};prototype.getScrollHForSafe=function(col){var colLefts=this.Bd,left=colLefts[col+1]-this.a[0].clientWidth;
if(colLefts[col]<=left){return colLefts[col]}return left};prototype.u=function(){if(this.Z.w){return{start:0,end:this.grid.dataMgr.datalist.length-1}}var tmp,max=this.grid.dataMgr.datalist.length-1;return{start:(((tmp=(this.k()-this.Z.d))<0)?0:tmp),end:(((tmp=(this.m()+this.Z.d))>max)?max:tmp)}
};prototype.AY=function(){this.a[0].style.height=this.getCanvasHeight()+this.AW()+"px"};prototype.AZ=function(e){if(this.Z.w){this.AY()}};prototype.onAfterRefresh=function(args){if(args!==undefined&&args.noRerender===true){return}this.Ba()};prototype.Ba=function(){var st=this.getScrollTop(),sl=this.getScrollLeft();
this.grid.event.trigger("onBeforeRerender");this.unlockAllRows();this.y();var rowLen=this.grid.dataMgr.datalist.length;if(this.W.l!==rowLen){this.W.l=rowLen;this.AS(this.AR())}this.w();this.setScrollTop(st);this.setScrollLeft(sl);this.grid.event.trigger("onAfterRerender")
};prototype.w=function(range){this.Am(range)};prototype.x=function(range){if(Util.isNull(range)){range=this.u()}this.z(range);this.Al(range)};prototype.y=function(range){var canvas=this.c[0],rendered=this.A,locked=this.B,id;if(Util.isNull(range)){if(this.Ad()){for(id in rendered){if(rendered.hasOwnProperty(id)){if(locked.hasOwnProperty(id)){canvas.removeChild(rendered[id]);
delete rendered[id]}}}}else{this.A={};canvas.innerHTML=""}}else{var i=range.start,end=range.end,dataMgr=this.grid.dataMgr;for(;i<=end;i++){if(!locked.hasOwnProperty(id=dataMgr.getIdByIdx(i))&&rendered.hasOwnProperty(id)){canvas.removeChild(rendered[id]);delete rendered[id]
}}}};prototype.z=function(range){var canvas=this.c[0],rendered=this.A,locked=this.B,id;if(Util.isNull(range)){if(this.Ad()){for(id in rendered){if(rendered.hasOwnProperty(id)&&locked.hasOwnProperty(id)===false){canvas.removeChild(rendered[id]);delete rendered[id]
}}}else{this.A={};canvas.innerHTML=""}}else{var start=range.start,end=range.end,dataMgr=this.grid.dataMgr,i;for(id in rendered){if(rendered.hasOwnProperty(id)){if(locked.hasOwnProperty(id)||(start<=(i=dataMgr.getIdxById(id))&&i<=end)){continue}canvas.removeChild(rendered[id]);
delete rendered[id]}}}};prototype.destroyRow=function(datarow){return this.destroyRowById(this.grid.dataMgr.getId(datarow))};prototype.destroyRowById=function(id){if(Util.isNotNull(id)){this.unlockRowById(id);if(this.A.hasOwnProperty(id)){this.c[0].removeChild(this.A[id]);
delete this.A[id]}}};prototype.destroyRowByIdx=function(i){return this.destroyRowById(this.grid.dataMgr.getIdByIdx(i))};prototype.Ad=function(){return Util.isNotEmptyObj(this.B)};prototype.isRowLockedById=function(id){if(Util.isNotNull(id)){return this.B.hasOwnProperty(id)
}return false};prototype.isRowLocked=function(datarow){return this.isRowLockedById(this.grid.dataMgr.getId(datarow))};prototype.isRowLockedByIdx=function(i){return this.isRowLockedById(this.grid.dataMgr.getIdByIdx(i))};prototype.lockRowById=function(id){if(Util.isNotNull(id)&&this.grid.dataMgr.hasById(id)){this.B[id]=true
}};prototype.lockRow=function(datarow){return this.lockRowById(this.grid.dataMgr.getId(datarow))};prototype.lockRowByIdx=function(i){return this.lockRowById(this.grid.dataMgr.getIdByIdx(i))};prototype.unlockRowById=function(id){if(this.isRowLockedById(id)){delete this.B[id]
}};prototype.unlockRow=function(datarow){return this.unlockRowById(this.grid.dataMgr.getId(datarow))};prototype.unlockRowByIdx=function(i){return this.unlockRowById(this.grid.dataMgr.getIdByIdx(i))};prototype.unlockAllRows=function(){this.B={}};prototype.rerenderRowById=function(id){if(!this.grid.dataMgr.containsById(id)){return
}var rmap=this.A,canvas=this.c[0],datam=this.grid.dataMgr,i=datam.getIdxById(id),datarow=datam.getById(id),colDefs=this.grid.colDefMgr.get(),colCommon=this.An(colDefs),rowH=this.AN(),html=[],newNodes;if(rmap.hasOwnProperty(id)){canvas.removeChild(rmap[id]);
this.grid.event.trigger("onBeforeRenderRows",[[i]]);this.Ap(html,i,datarow,colDefs,colCommon,rowH);rmap[id]=Util.appendHTML(canvas,html.join(""))[0];this.grid.event.trigger("onAppendRows",[[i]])}};prototype.rerenderRow=function(datarow){return this.rerenderRowById(this.grid.dataMgr.getId(datarow))
};prototype.rerenderRowByIdx=function(i){return this.rerenderRowById(this.grid.dataMgr.getIdByIdx(i))};prototype.rerenderCellByIdAndKey=function(id,key){var cellnode=this.getCellByIdAndKey(id,key);if(cellnode!==undefined){var datam=this.grid.dataMgr,colm=this.grid.colDefMgr,datarow=datam.getById(id),colDef=colm.getByKey(key),row=datam.getIdxById(id),col=colm.getIdxByKey(key);
cellnode.innerHTML=this.Aq([],row,col,datarow,colDef).join("")}};prototype.rerenderCellByIdx=function(row,col){return this.rerenderCellByIdAndKey(this.grid.dataMgr.getIdByIdx(row),this.grid.colDefMgr.getKeyByIdx(col))};prototype.Al=function(range){this.grid.event.trigger("onBeforeRenderRows",[range]);
var html=[],i=range.start,end=range.end,datalist=this.grid.dataMgr.datalist,idKey=this.grid.dataMgr.idKey,colDefs=this.grid.colDefMgr.get(),collen=colDefs.length,colCommon=this.An(colDefs),rendered=this.A,rowH=this.AN(),canvas=this.c[0],datarow,id,added=[],node,newNodes,len;
for(;i<=end;i++){datarow=datalist[i];if(rendered.hasOwnProperty(id=datarow[idKey])){continue}this.Ap(html,i,datarow,colDefs,colCommon,rowH);added.push(id)}newNodes=Util.appendHTML(canvas,html.join(""));for(i=0,len=added.length;i<len;i++){rendered[added[i]]=newNodes[i]
}this.grid.event.trigger("onAppendRows",[range])};prototype.Am=function(range){if(Util.isNull(range)){range=this.u()}this.grid.event.trigger("onBeforeRenderRows",[range]);var html=[],i=range.start,end=range.end,dataMgr=this.grid.dataMgr,datalist=dataMgr.datalist,idKey=dataMgr.idKey,colDefs=this.grid.colDefMgr.get(),collen=colDefs.length,colCommon=this.An(colDefs),canvas=this.c[0],rowH=this.AN(),datarow,added=[],newRendered={},len;
for(;i<=end;i++){datarow=datalist[i];this.Ap(html,i,datarow,colDefs,colCommon,rowH);added.push(datarow[idKey])}canvas.innerHTML=html.join("");for(i=0,len=added.length;i<len;i++){newRendered[added[i]]=canvas.childNodes[i]}this.A=newRendered;this.grid.event.trigger("onAppendRows",[range])
};prototype.Ao=function(colDef){var cssClass=this.Z.m+" k_"+colDef.key;if(Util.isNotNull(colDef.colClass)){cssClass+=" "+colDef.colClass}cssClass+=" "+this.grid.event.trigger("onGetColCellClass",[colDef]).join(" ");return cssClass};prototype.An=function(colDefs){var cssClasses=[],i=0,len=colDefs.length;
if(Util.isNull(colDefs)){colDefs=this.grid.colDefMgr.get()}for(;i<len;i++){cssClasses.push(this.Ao(colDefs[i]))}return cssClasses};prototype.Ap=function(html,rowIdx,datarow,colDefs,colCommon,rowH){html.push("<div class='"+this.Z.l+"' i='"+datarow[this.grid.dataMgr.idKey]+"' "+this.Z.a+"='"+rowIdx+"' style='top:"+(rowH*rowIdx)+"px'>");
var i=0,collen=colDefs.length;for(;i<collen;i++){html.push("<div class='"+colCommon[i]+" "+this.grid.event.trigger("onGetCellClass",[rowIdx,i,datarow,colDefs[i]]).join(" ")+"'>");this.Aq(html,rowIdx,i,datarow,colDefs[i]);html.push("</div>")}html.push("</div>");
return html};prototype.Aq=function(html,rowIdx,colIdx,datarow,colDef){this.grid.event.trigger("onRenderCell_"+colDef.key+"_prepend",[rowIdx,colIdx,datarow,colDef,html]);var val=datarow[colDef.key];if(typeof val!=="string"||val.substring(0,3)!=="J@H"){if(colDef.rendererInput){html.push(colDef.renderer(JGM.create("Cell",{grid:this.grid,row:rowIdx,col:colIdx,datarow:datarow,colDef:colDef})))
}else{html.push(colDef.renderer(val,rowIdx,colIdx,datarow,colDef,this))}}this.grid.event.trigger("onRenderCell_"+colDef.key+"_append",[rowIdx,colIdx,datarow,colDef,html]);return html};JGM.Cell.prototype.rerender=function(){return this.grid.view.rerenderCellByIdAndKey(this.getId(),this.getKey())
};JGM.Cell.prototype.scrollTo=function(){this.grid.view.scrollTo(this.getRowIdx(),this.getColIdx())};prototype.U=function(e){if(!Util.contains(this.a[0],document.activeElement,this.b[0])){return}this.grid.event.trigger("keydownCanvas_"+e.which+" keydownCanvas",[e])
};prototype.T=function(e){if(!Util.contains(this.a[0],document.activeElement,this.b[0])){return}this.grid.event.trigger("keyupCanvas_"+e.which+" keyupCanvas",[e])};prototype.S=function(e){if(!Util.contains(this.a[0],document.activeElement,this.b[0])){return
}this.grid.event.trigger("keypressCanvas_"+e.which+" keypressCanvas",[e])};prototype.R=function(e){if(this.W.a){this.Ar(e,{event:"draginCanvas mouseinCanvas"})}else{this.Ar(e,{event:"mouseinCanvas"})}};prototype.Q=function(e){if(this.W.a){this.Ar(e,{event:"dragoutCanvas mouseoutCanvas"})
}else{this.Ar(e,{event:"mouseoutCanvas"})}};prototype.P=function(e){if(this.W.a){this.Ar(e,{event:"dragenterCanvas mouseenterCanvas"})}else{this.Ar(e,{event:"mouseenterCanvas"})}};prototype.O=function(e){if(this.W.a){this.Ar(e,{event:"dragleaveCanvas mouseleaveCanvas"})
}else{this.Ar(e,{event:"mouseleaveCanvas"})}};prototype.N=function(e){if(this.W.a){this.Ar(e,{event:"dragmoveCanvas mousemoveCanvas"})}else{this.Ar(e,{event:"mousemoveCanvas"})}};prototype.M=function(e){if(this.W.a){this.Ar(e,{event:"dragoverCanvas mouseoverCanvas"})
}else{this.Ar(e,{event:"mouseoverCanvas"})}};prototype.L=function(e){if(this.Ar(e,{event:"mousedownCanvas"})){this.W.a=true;this.focus(e)}};prototype.K=function(e){this.W.a=false;if(this.Ar(e,{event:"mouseupCanvas"})){this.focus(e)}};prototype.J=function(e){this.Ar(e,{event:"clickCanvas"})
};prototype.I=function(e){this.Ar(e,{event:"dblclickCanvas"})};prototype.Ar=function(e,args){var node=this.Az(e.target),arr,earr,i,len;if(node===undefined){return false}args.cell=JGM.create("Cell",{grid:this.grid,node:node});arr=Util.split(args.event);len=arr.length;
earr=[];for(i=0;i<len;i++){earr.push(arr[i]+"_"+args.cell.getKey());earr.push(arr[i])}this.grid.event.trigger(earr.join(" "),[e,args.cell]);return true};prototype.As=function(){var scrollTop=this.getScrollTop(),scrollVDist=scrollTop-this.W.d,scrollLeft=this.getScrollLeft(),scrollHDist=scrollLeft-this.W.e;
if(scrollVDist===0&&scrollHDist===0){return}this.grid.event.trigger("onScrollViewport");if(scrollHDist!==0){this.W.e=scrollLeft;this.grid.event.trigger("onScrollViewportH",[scrollLeft])}var numDiff=Math.abs(scrollVDist/this.AN());if(numDiff<this.Z.b){return
}this.W.d=scrollTop;this.w();this.grid.event.trigger("onScrollViewportV")};prototype.focus=function(e){if(Util.isNotNull(e)&&this.grid.event.triggerInvalid("onBeforeFocusCanvas",[e])){return}if(this.a[0]!==document.activeElement){if(Util.isFunction(this.a[0].setActive)){try{this.a[0].setActive()
}catch(exp){}}this.a[0].focus();if(document.activeElement!==this.a[0]){this.a.focus()}}};prototype.isRenderedById=function(id){if(Util.isNotNull(id)){return this.A.hasOwnProperty(id)}return false};prototype.isRendered=function(datarow){return this.isRenderedById(this.grid.dataMgr.getId(datarow))
};prototype.isRenderedByIdx=function(rowIdx){return this.isRenderedById(this.grid.dataMgr.getIdByIdx(rowIdx))};prototype.getRowById=function(id){if(this.isRenderedById(id)){return this.A[id]}};prototype.getRow=function(datarow){return this.getRowById(this.grid.dataMgr.getId(datarow))
};prototype.getRowByIdx=function(i){return this.getRowById(this.grid.dataMgr.getIdByIdx(i))};prototype.getRenderedRowById=function(id){if(this.isRenderedById(id)){return this.A[id]}};prototype.getRenderedRow=function(datarow){return this.getRenderedRowById(this.grid.dataMgr.getId(datarow))
};prototype.getRenderedRowByIdx=function(i){return this.getRenderedRowById(this.grid.dataMgr.getIdByIdx(i))};prototype.getRenderedRows=function(){return Util.toArray(this.A);return Array.prototype.slice.call(this.c[0].childNodes)};prototype.getCell=function(rowIdx,colIdx){var rowNode=this.getRowByIdx(rowIdx);
if(Util.isNotNull(rowNode,colIdx)){return rowNode.childNodes[colIdx]}};prototype.getCellByIdAndKey=function(id,key){var rowNode=this.getRowById(id),colIdx=this.grid.colDefMgr.getIdxByKey(key);if(Util.isNotNullAnd(rowNode,colIdx)){return rowNode.childNodes[colIdx]
}};prototype.getRenderedCell=function(rowIdx,colIdx){var rowNode=this.getRenderedRowByIdx(rowIdx);if(Util.isNotNull(rowNode)){return rowNode.childNodes[colIdx]}};prototype.getRenderedCellByIdAndKey=function(id,key){var rowNode=this.getRenderedRowById(id),colIdx=this.grid.colDefMgr.getIdxByKey(key);
if(Util.isNotNullAnd(rowNode,colIdx)){return rowNode.childNodes[colIdx]}};prototype.Az=function(obj){return Util.closestWithTag(obj,"DIV",this.Z.m,this.c[0])};prototype.AA=function(obj){return Util.closestWithTag(obj,"DIV",this.Z.l,this.c[0])};prototype.AB=function(obj){return this.grid.dataMgr.getIdxByNode(this.AA(obj))
};prototype.AC=function(selector){return this.c.find(selector)};ViewportManager.AD=function(value,rowIdx,colIdx,datarow,colDef,viewMgr){return Util.ifNull(value,"")};JGM.b("ViewportManager",ViewportManager)}())}());